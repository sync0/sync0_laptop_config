/*

 lodash 4.5.1 (Custom Build) lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 Build: `lodash -o ./dist/lodash.js`
 MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors */
define("qowtRoot/utils/typeUtils",[],function(){function h(a,e,c){if(c.types.every(function(a){var e=f[a];if(!e)throw Error("Bad config to checkArgTypes: unknown type: "+a);return!e(c.value)})){var h=1===c.types.length?c.types[0]:"["+c.types.join(",")+"]";throw Error("Argument "+e+" passed to function "+a+" was supposed to be of type "+h+" but had value "+c.value);}}var c={checkArgTypes:function(a,e){for(var c in e){var f={value:e[c][0],types:e[c].slice(1)};h(a,c,f)}},isObject:function(a){return"object"===
typeof a&&null!==a},isPromise:function(a){return a instanceof Promise},isPromiseLike:function(a){return!(!a||!c.isFunction(a.then))},isList:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isNumber:function(a){return"number"===typeof a&&!isNaN(a)},isInteger:function(a){return"number"===typeof a&&parseInt(a,10)===a},isFunction:function(a){return"function"===typeof a},isString:function(a){return"[object String]"===Object.prototype.toString.call(a)},isRegex:function(a){return"[object RegExp]"===
Object.prototype.toString.call(a)},isNode:function(a){return a instanceof Node},isNull:function(a){return null===a},isUndefined:function(a){return void 0===a},isBoolean:function(a){return"boolean"===typeof a},getType:function(a){var e;Object.keys(f).forEach(function(c){f[c](a)&&(e=c)});return e},isArgumentsObjectOrList:function(a){return a instanceof Object&&a.hasOwnProperty("length")},extend:function(a,e){for(var c in e)e.hasOwnProperty(c)&&(a[c]=e[c])},createNewType:function(a){var e=function(){},
c={isOfType:function(a){return void 0!==a&&null!==a&&a.constructor===e},markAsType:function(a){Object.defineProperty(a,"constructor",{value:e,configurable:!1,writable:!1,enumerable:!1});return a}};if(a){if(f[a])throw Error("Already registered type "+a);f[a]=c.isOfType}return c}},f={string:c.isString,object:c.isObject,promise:c.isPromise,promiseLike:c.isPromiseLike,node:c.isNode,regex:c.isRegex,"function":c.isFunction,number:c.isNumber,list:c.isList,boolean:c.isBoolean,"null":c.isNull,undefined:c.isUndefined};
return c});(function(){var h={},c=window.sessionStorage.getItem("featureOverrides");c&&(h=JSON.parse(c));h.isRelease=!0;h.edit=!1;window.sessionStorage.setItem("featureOverrides",JSON.stringify(h));window.localStorage.removeItem("testsToInclude");window.localStorage.removeItem("builtInTests")})();define("configs/releaseFeatures",function(){});
(function(){var h={},c=window.sessionStorage.getItem("featureOverrides");c&&(h=JSON.parse(c));h.save=!!(window.chrome&&window.chrome.fileSystem&&window.chrome.fileSystem.chooseEntry);window.sessionStorage.setItem("featureOverrides",JSON.stringify(h))})();define("configs/chromeFeatures",function(){});define("qowtRoot/features/pack",[],function(){return{edit:!0,save:!1,pointEdit:!1,hats:!0}});
define("qowtRoot/features/utils",["qowtRoot/features/pack"],function(h){var c={isEnabled:function(a){a=h[a];return void 0===a?!1:a},enable:function(a){h[a]=!0},disable:function(a){h[a]=!1},setOverrides:function(a){for(var e in a)a.hasOwnProperty(e)&&(h[e]=a[e])},isDebug:function(){return void 0!==f?f:!c.isEnabled("isRelease")},setDebugOverride:function(a){f=a},clearDebugOverride:function(){f=void 0}},f;return c});
(function(h){h("qowtRoot/third_party/when/lib/timer",["require"],function(c){return{set:setTimeout,clear:clearTimeout}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});
(function(h){h("qowtRoot/third_party/when/lib/timed",[],function(){return function(c,f,a){a.prototype.delay=function(a){var f=this;return new this.constructor(function(h,v,l){f.then(function(f){c(function(){h(f)},a)},v,l)})};a.prototype.timeout=function(a,h){var p=this,v=1<arguments.length;return new this.constructor(function(l,m,r){var w=c(function(){m(v?h:Error("timed out after "+a+"ms"))},a);p.then(function(a){f(w);l(a)},function(a){f(w);m(a)},r)})};return a}})})("function"===typeof define&&define.amd?
define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/array",[],function(){return function(c){var f=Array.prototype.map,a=Array.prototype.reduce,e=Array.prototype.reduceRight,h=Array.prototype.forEach,p=c.resolve,v=c.all;c.any=function(a){return new c(function(e,c){function f(a){G.push(a);0===--v&&c(G)}var v=0,G=[];h.call(a,function(a){++v;p(a).then(e,f)});0===v&&e()})};c.some=function(a,e){return new c(function(c,f,v){function G(a){0<u&&(--u,q.push(a),0===u&&c(q))}function A(a){0<y&&(--y,C.push(a),0===y&&
f(C))}var u=0,y,q=[],C=[];h.call(a,function(a){++u;p(a).then(G,A,v)});e=Math.max(e,0);y=u-e+1;u=Math.min(e,u);0===u&&c(q)})};c.settle=function(a){return v(f.call(a,function(a){function e(){return a.inspect()}a=p(a);return a.then(e,e)}))};c.map=function(a,e,c){return v(f.call(a,function(a){return p(a).then(e,c)}))};c.reduce=function(e,c){function f(a,e,l){return p(a).then(function(a){return p(e).then(function(e){return c(a,e,l)})})}return 2<arguments.length?a.call(e,f,arguments[2]):a.call(e,f)};c.reduceRight=
function(a,c){function f(a,e,l){return p(a).then(function(a){return p(e).then(function(e){return c(a,e,l)})})}return 2<arguments.length?e.call(a,f,arguments[2]):e.call(a,f)};c.prototype.spread=function(a){return this.then(v).then(function(e){return a.apply(void 0,e)})};return c}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/fatal",["require","./timer"],function(c){var f=c("./timer").set;return function(a){f(function(){throw a;},0)}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});
(function(h){h("qowtRoot/third_party/when/lib/flow",["require","./fatal"],function(c){function f(){throw new TypeError("catch predicate must be a function");}function a(a,e){return function(){a.call(this);return e}}function e(){}var h=c("./fatal");return function(c){function v(a,e){return function(c){return(e===Error||null!=e&&e.prototype instanceof Error?c instanceof e:e(c))?a.call(this,c):m(c)}}var l=c.resolve,m=c.reject,r=c.prototype["catch"];c.prototype.done=function(a,c){var f=this._handler;
f.when(this._maybeFatal,e,this,f.receiver,a,c)};c.prototype._maybeFatal=function(a){if(Object(a)===a)l(a)["catch"](this._fatal)};c.prototype._fatal=h;c.prototype["catch"]=c.prototype.otherwise=function(a){return 1===arguments.length?r.call(this,a):"function"!==typeof a?this.ensure(f):r.call(this,v(arguments[1],a))};c.prototype["finally"]=c.prototype.ensure=function(e){if("function"!==typeof e)return this;e=a(e,this);return this.then(e,e)};c.prototype["else"]=c.prototype.orElse=function(a){return this.then(void 0,
function(){return a})};c.prototype.yield=function(a){return this.then(function(){return a})};c.prototype.tap=function(a){return this.then(a).yield(this)};return c}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});(function(h){h("qowtRoot/third_party/when/lib/inspect",[],function(){return function(c){c.prototype.inspect=function(){return this._handler.inspect()};return c}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/iterate",[],function(){return function(c){function f(a,c,h,l){function m(l){return e(h(l)).then(function(){return f(a,c,h,a(l))})}return e(l).then(function(a){return e(c(a)).then(function(e){return e?a:m(a)})})}function a(c,f,h,l){function m(l,m){return e(h(l)).then(function(){return a(c,f,h,m)})}return e(l).then(function(a){return e(f(a)).then(function(f){return f?a:e(c(a)).spread(m)})})}var e=c.resolve;c.iterate=f;c.unfold=a;return c}})})("function"===
typeof define&&define.amd?define:function(h){module.exports=h()});(function(h){h("qowtRoot/third_party/when/lib/progress",[],function(){return function(c){c.prototype.progress=function(c){return this.then(void 0,void 0,c)};return c}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/with",[],function(){return function(c){c.prototype["with"]=c.prototype.withThis=c.prototype._bindContext;return c}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/makePromise",[],function(){return function(c){function f(e){var c=this;this._handler=new w;a(e,function(a){c._handler.resolve(a)},function(a){c._handler.reject(a)},function(a){c._handler.notify(a)})}function a(a,e,c,f){try{a(e,c,f)}catch(h){c(h)}}function e(a){return new h(new J(new y(a)))}function h(a){this._handler=a}function p(a,e){if(a instanceof f){var c=a._handler.join();return e===c?new y(new TypeError("Promise cycle")):c}return ya(a)?l(a):new u(a)}
function v(a){return a instanceof f?a._handler.join():l(a)}function l(a){try{var e=a.then;return"function"===typeof e?new A(e,a):new u(a)}catch(c){return new y(c)}}function m(){}function r(a){this.handler=a;if(this._isMonitored()){var e=this._env.promiseMonitor.captureStack();this.trace=a._addTrace(e)}}function w(a){this.consumers=[];this.receiver=a;this.handler=void 0;this.resolved=!1;this._isMonitored()&&(this.trace=this._env.promiseMonitor.captureStack())}function J(a){r.call(this,a)}function G(a,
e){r.call(this,a);this.receiver=e}function A(a,e){w.call(this);this.assimilated=!1;this.untrustedThen=a;this.thenable=e}function u(a){this.value=a}function y(a){this.value=a;this.observed=!1;this._isMonitored()&&(this.key=this._env.promiseMonitor.startTrace(a))}function q(){return{state:"pending"}}function C(a,e,c,f,h,l,m,q){this.a=a;this.b=e;this.c=c;this.d=f;this.e=h;this.f=l;this.g=m;this.handler=q}function S(a,e){this.q=a;this.value=e}function ya(a){return("object"===typeof a||"function"===typeof a)&&
null!==a}function Oa(a,c,f){try{return a.call(f,c)}catch(h){return e(h)}}function Y(){}var Pa,za=c.scheduler,ga=Object.create||function(a){function e(){}e.prototype=a;return new e};f.resolve=function(a){return a instanceof f?a:new h(new J(p(a)))};f.reject=e;f.never=function(){return Pa};f._defer=function(){return new h(new w)};f.prototype.then=function(a,e,c){var f=this._handler,l=new w(f.receiver);f.when(l.resolve,l.notify,l,f.receiver,a,e,c);return new h(l)};f.prototype["catch"]=f.prototype.otherwise=
function(a){return this.then(void 0,a)};f.prototype._bindContext=function(a){return new h(new G(this._handler,a))};f.all=function(a){function e(a,c,f,h){f.when(Y,Y,void 0,a,function(a){c[h]=a;0===--l&&this.resolve(c)},a.reject,a.notify)}var c=new w,f=a.length>>>0,l=f,m=[],q,p;for(q=0;q<f;++q)q in a?(p=a[q],ya(p)?e(c,m,v(p),q):(m[q]=p,--l)):--l;0===l&&c.resolve(m);return new h(c)};f.race=function(a){if(Object(a)===a&&0===a.length)return Pa;for(var e=new w,c=0;c<a.length;++c)p(a[c]).when(Y,Y,void 0,
e,e.resolve,e.reject);return new h(e)};h.prototype=ga(f.prototype);m.prototype.inspect=q;m.prototype.when=Y;m.prototype.resolve=Y;m.prototype.reject=Y;m.prototype.notify=Y;m.prototype.join=function(){return this};m.prototype._env=c.monitor||f;m.prototype._addTrace=Y;m.prototype._isMonitored=function(){return"undefined"!==typeof this._env.promiseMonitor};r.prototype=ga(m.prototype);r.prototype.join=function(){return this.handler.join()};r.prototype.inspect=function(){return this.handler.inspect()};
r.prototype._addTrace=function(a){return this.handler._addTrace(a)};w.prototype=ga(m.prototype);w.prototype.inspect=function(){return this.resolved?this.handler.join().inspect():q()};w.prototype.resolve=function(a){this._join(p(a,this))};w.prototype.reject=function(a){this._join(new y(a))};w.prototype.join=function(){return this.resolved?this.handler.join():this};w.prototype.run=function(){var a=this.consumers,e=this.handler=this.handler.join();this.consumers=void 0;for(var c=0;c<a.length;c+=7)e.when(a[c],
a[c+1],a[c+2],a[c+3],a[c+4],a[c+5],a[c+6])};w.prototype._join=function(a){this.resolved||(this.resolved=!0,this.handler=a,za.enqueue(this),this._isMonitored()&&(this.trace=a._addTrace(this.trace)))};w.prototype.when=function(a,c,e,f,h,l,m){this.resolved?za.enqueue(new C(a,c,e,f,h,l,m,this.handler.join())):this.consumers.push(a,c,e,f,h,l,m)};w.prototype.notify=function(a){this.resolved||za.enqueue(new S(this.consumers,a))};w.prototype._addTrace=function(a){return this.resolved?this.handler._addTrace(a):
a};J.prototype=ga(r.prototype);J.prototype.when=function(a,c,e,f,h,l,m){za.enqueue(new C(a,c,e,f,h,l,m,this.join()))};G.prototype=ga(r.prototype);G.prototype.when=function(a,c,e,f,h,l,m){void 0!==this.receiver&&(f=this.receiver);this.join().when(a,c,e,f,h,l,m)};A.prototype=ga(w.prototype);A.prototype.when=function(a,c,e,f,h,l,m){this.assimilated||(this.assimilated=!0,this._assimilate());w.prototype.when.call(this,a,c,e,f,h,l,m)};A.prototype._assimilate=function(){var a=this;this._try(this.untrustedThen,
this.thenable,function(c){a.resolve(c)},function(c){a.reject(c)},function(c){a.notify(c)})};A.prototype._try=function(a,c,e,f,h){try{a.call(c,e,f,h)}catch(l){f(l)}};u.prototype=ga(m.prototype);u.prototype.inspect=function(){return{state:"fulfilled",value:this.value}};u.prototype.when=function(a,c,e,f,h){c="function"===typeof h?Oa(h,this.value,f):this.value;a.call(e,c)};y.prototype=ga(m.prototype);y.prototype.inspect=function(){return{state:"rejected",reason:this.value}};y.prototype.when=function(a,
c,f,h,l,m){this._isMonitored()&&!this.observed&&this._env.promiseMonitor.removeTrace(this.key);this.observed=!0;c="function"===typeof m?Oa(m,this.value,h):e(this.value);a.call(f,c)};y.prototype._addTrace=function(a){this.observed||this._env.promiseMonitor.updateTrace(this.key,a)};Pa=new h(new m);C.prototype.run=function(){this.handler.when(this.a,this.b,this.c,this.d,this.e,this.f,this.g)};S.prototype.run=function(){for(var a=this.q,c=1;c<a.length;c+=7)this._notify(a[c],a[c+1],a[c+2],a[c+5])};S.prototype._notify=
function(a,c,e,f){var h;if("function"===typeof f)try{h=f.call(e,this.value)}catch(l){h=l}else h=this.value;a.call(c,h)};return f}})})("function"===typeof define&&define.amd?define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/Queue",[],function(){function c(c){this.head=this.tail=this.length=0;this.buffer=Array(1<<c)}c.prototype.push=function(c){this.length===this.buffer.length&&this._ensureCapacity(2*this.length);this.buffer[this.tail]=c;this.tail=this.tail+1&this.buffer.length-1;++this.length;return this.length};c.prototype.shift=function(){var c=this.buffer[this.head];this.buffer[this.head]=void 0;this.head=this.head+1&this.buffer.length-1;--this.length;return c};c.prototype._ensureCapacity=
function(c){var a=this.head,e=this.buffer,h=Array(c),p=0,v;if(0===a)for(v=this.length;p<v;++p)h[p]=e[p];else{c=e.length;for(v=this.tail;a<c;++p,++a)h[p]=e[a];for(a=0;a<v;++p,++a)h[p]=e[a]}this.buffer=h;this.head=0;this.tail=this.length};return c})})("function"===typeof define&&define.amd?define:function(h){module.exports=h()});
(function(h){h("qowtRoot/third_party/when/lib/scheduler",["require","./Queue"],function(c){function f(c){this._enqueue=c;this._handlerQueue=new a(15);var f=this;this.drainQueue=function(){f._drainQueue()}}var a=c("./Queue");f.prototype.enqueue=function(a){1===this._handlerQueue.push(a)&&this._enqueue(this.drainQueue)};f.prototype._drainQueue=function(){for(var a=this._handlerQueue;0<a.length;)a.shift().run()};return f})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});
(function(h){h("qowtRoot/third_party/when/lib/async",["require"],function(c){var f;return"undefined"!==typeof process&&null!==process&&"function"===typeof process.nextTick?function(a){process.nextTick(a)}:(f="function"===typeof MutationObserver&&MutationObserver||"function"===typeof WebKitMutationObserver&&WebKitMutationObserver)?function(a,c){var f,h=a.createElement("div");(new c(function(){var a=f;f=void 0;a()})).observe(h,{attributes:!0});return function(a){f=a;h.setAttribute("class","x")}}(document,
f):function(a){var c=setTimeout;return function(a){c(a,0)}}(c)})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});(function(h){h("qowtRoot/third_party/when/lib/Promise",["require","./makePromise","./scheduler","./async"],function(c){var f=c("./makePromise"),a=c("./scheduler");c=c("./async");return f({scheduler:new a(c),monitor:"undefined"!==typeof console?console:void 0})})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});
(function(h){h("qowtRoot/third_party/when/when","require ./lib/timer ./lib/timed ./lib/array ./lib/flow ./lib/inspect ./lib/iterate ./lib/progress ./lib/with ./lib/Promise".split(" "),function(c){function f(a,c,e,f){var h=y(a);return 2>arguments.length?h:h.then(c,e,f)}function a(a){return function(){return h(a,this,q.call(arguments))}}function e(a){return h(a,this,q.call(arguments,1))}function h(a,c,e){return u.all(e).then(function(e){return a.apply(c,e)})}function p(){function a(c){f._handler.resolve(c)}
function c(a){f._handler.reject(a)}function e(a){f._handler.notify(a)}var f=u._defer();this.promise=f;this.resolve=a;this.reject=c;this.notify=e;this.resolver={resolve:a,reject:c,notify:e}}var v=c("./lib/timer"),l=c("./lib/timed"),m=c("./lib/array"),r=c("./lib/flow"),w=c("./lib/inspect"),J=c("./lib/iterate"),G=c("./lib/progress"),A=c("./lib/with"),u=c("./lib/Promise"),u=[m,r,J,G,w,A].reduceRight(function(a,c){return c(a)},l(v.set,v.clear,u)),y=u.resolve,q=Array.prototype.slice;f.promise=function(a){return new u(a)};
f.resolve=u.resolve;f.reject=u.reject;f.lift=a;f["try"]=e;f.attempt=e;f.iterate=u.iterate;f.unfold=u.unfold;f.join=function(){return u.all(arguments)};f.all=function(a){return f(a,u.all)};f.settle=function(a){return f(a,u.settle)};f.any=a(u.any);f.some=a(u.some);f.map=function(a,c){return f(a,function(a){return u.map(a,c)})};f.reduce=function(a,c){var e=q.call(arguments,1);return f(a,function(a){e.unshift(a);return u.reduce.apply(u,e)})};f.reduceRight=function(a,c){var e=q.call(arguments,1);return f(a,
function(a){e.unshift(a);return u.reduceRight.apply(u,e)})};f.isPromiseLike=function(a){return a&&"function"===typeof a.then};f.Promise=u;f.defer=function(){return new p};return f})})("function"===typeof define&&define.amd?define:function(h){module.exports=h(require)});
define("qowtRoot/utils/promiseUtils",["qowtRoot/utils/typeUtils","qowtRoot/third_party/when/when"],function(h,c){var f={cast:function(a){return a instanceof Promise?a:Promise.resolve(a)},delay:function(a,c){a=a||0;return new Promise(function(f){setTimeout(f.bind(void 0,c),a)})},delayThenReject:function(a,c){a=a||0;return new Promise(function(f,h){setTimeout(h.bind(f,c),a)})},throwAndEscapeChain:function(a){a instanceof Error||(console.error("throwAndEscapeChain wrapping value in new Error: ",a),a=
Error(a));c.reject(a).done();throw a;},pipeline:function(a){function c(){for(var p=Array.prototype.slice.call(arguments,0);0<a.length;){var l=a.shift();if(h.isPromiseLike(l))return f.cast(l).then(function(f){a.unshift(f);return c.apply(t,p)});h.checkArgTypes("PromiseUtils.pipeline",{task:[l,"function"]});l=l.apply(t,p);if(h.isPromiseLike(l))return f.cast(l).then(function(a){return c(a)});p=[l]}return p[0]}var t=this,p=Array.prototype.slice.call(arguments,0);if(p.some(h.isPromiseLike))return Promise.all(p).then(function(a){return f.pipeline.apply(t,
a)});h.checkArgTypes("PromiseUtils.pipeline",{tasks:[a,"list"]});a=a.slice(0);return c.apply(t,p.slice(1))},finally:function(a,c){function h(){return f.cast(c()).then(function(){return a})}return f.cast(a).then(h,h)},waitForNextMacroTurn:function(a){return new Promise(function(c){window.setTimeout(c.bind(null,a),0)})}};return f});
define("utils/analytics/googleAnalytics",["qowtRoot/features/utils","qowtRoot/utils/promiseUtils"],function(h,c){function f(c,e){var f;void 0!==u?f=u?Promise.resolve():Promise.reject(Error("ga permission cached (not permitted)")):(window.analytics&&chrome&&chrome.metricsPrivate&&chrome.metricsPrivate.getIsCrashReportingEnabled&&(!h.isDebug()||void 0!==window.__gaMock)?f=Promise.resolve():(console.warn("GA not supported on this platform"),f=Promise.reject(Error("GA not supported on this platform"))),
f=f.then(a).catch(p));return f.then(v).then(c.bind(null,e)).catch(function(){})}function a(){var a=Error("Crash reporting setting timed out");return Promise.race([e(),c.delayThenReject(1E3,a)]).then(t)}function e(){return new Promise(function(a){chrome.metricsPrivate.getIsCrashReportingEnabled(a)})}function t(a){return new Promise(function(c,e){y=window.analytics.getService(G);y.getConfig().addCallback(function(f){f.setTrackingPermitted(a);(u=a)?c():(console.warn("Crash reporting not allowed"),e())})})}
function p(){u=!1;return Promise.reject()}function v(){void 0===q&&l("QO");return Promise.resolve()}function l(a){q&&q.sendAppView(a);q=y.getTracker(J[a]);C&&q.set(window.analytics.Parameters.SESSION_GROUP,C);q.forceSessionStart();return Promise.resolve()}function m(a){A!==a&&(A=a,q.sendAppView(a));return Promise.resolve()}function r(a){q.sendException(a.msg,a.fatal);return Promise.resolve()}function w(a){q.sendEvent(a.category,a.action,a.label,a.value);return Promise.resolve()}var J={word:"UA-44583639-1",
sheet:"UA-44583639-2",point:"UA-44583639-3",QO:"UA-44583639-4"},G="Quickoffice",A,u,y,q,C;return{setSessionGroup:function(a){C=a},setTracker:function(a){return f(l,a)},sendState:function(a){return f(m,a)},sendException:function(a){return f(r,a)},sendEvent:function(a){return f(w,a)},reset:function(){q=y=u=A=void 0}}});
define("qowtRoot/utils/i18n",["qowtRoot/utils/typeUtils","utils/analytics/googleAnalytics"],function(h,c){var f={getMessage:function(a,c){var t="????";if(!chrome||!chrome.i18n)return a;h.isString(a)?(t=chrome.i18n.getMessage(a,c),t||(t=a,f.logError_("Missing translation",a))):f.logError_("Invalid string translation Id",a);return t},logError_:function(a,e){console.error(a+" "+e);c.sendException({msg:a,fatal:!1})}};return f});
(function(){function h(a,g){return a.set(g[0],g[1]),a}function c(a,g){return a.add(g),a}function f(a,g,c){switch(c.length){case 0:return a.call(g);case 1:return a.call(g,c[0]);case 2:return a.call(g,c[0],c[1]);case 3:return a.call(g,c[0],c[1],c[2])}return a.apply(g,c)}function a(a,g,c,e){for(var f=-1,h=a.length;++f<h;){var l=a[f];g(e,l,c(l),a)}return e}function e(a,g){for(var c=-1,e=a.length;++c<e&&!1!==g(a[c],c,a););return a}function t(a,g){for(var c=-1,e=a.length;++c<e;)if(!g(a[c],c,a))return!1;
return!0}function p(a,g){for(var c=-1,e=a.length,f=-1,h=[];++c<e;){var l=a[c];g(l,c,a)&&(h[++f]=l)}return h}function v(a,g){return!!a.length&&-1<q(a,g,0)}function l(a,g,c){for(var e=-1,f=a.length;++e<f;)if(c(g,a[e]))return!0;return!1}function m(a,g){for(var c=-1,e=a.length,f=Array(e);++c<e;)f[c]=g(a[c],c,a);return f}function r(a,c){for(var e=-1,f=c.length,h=a.length;++e<f;)a[h+e]=c[e];return a}function w(a,c,e,f){var h=-1,l=a.length;for(f&&l&&(e=a[++h]);++h<l;)e=c(e,a[h],h,a);return e}function J(a,
c,e,f){var h=a.length;for(f&&h&&(e=a[--h]);h--;)e=c(e,a[h],h,a);return e}function G(a,c){for(var e=-1,f=a.length;++e<f;)if(c(a[e],e,a))return!0;return!1}function A(a,c,e){for(var f=-1,h=a.length;++f<h;){var l=a[f],m=c(l);if(null!=m&&(q===k?m===m:e(m,q)))var q=m,p=l}return p}function u(a,c,e,f){var h;return e(a,function(a,e,l){return c(a,e,l)?(h=f?e:a,!1):void 0}),h}function y(a,c,e){for(var f=a.length,h=e?f:-1;e?h--:++h<f;)if(c(a[h],h,a))return h;return-1}function q(a,c,e){if(c!==c)return Kc(a,e);
--e;for(var f=a.length;++e<f;)if(a[e]===c)return e;return-1}function C(a,c,e,f,h){return h(a,function(a,h,l){e=f?(f=!1,a):c(e,a,h,l)}),e}function S(a,c){var e=a.length;for(a.sort(c);e--;)a[e]=a[e].c;return a}function ya(a,c){for(var e,f=-1,h=a.length;++f<h;){var l=c(a[f]);l!==k&&(e=e===k?l:e+l)}return e}function Oa(a,c){for(var e=-1,f=Array(a);++e<a;)f[e]=c(e);return f}function Y(a,c){return m(c,function(c){return[c,a[c]]})}function Pa(a){return function(c){return a(c)}}function za(a,c){return m(c,
function(c){return a[c]})}function ga(a,c){for(var e=-1,f=a.length;++e<f&&-1<q(c,a[e],0););return e}function Ic(a,c){for(var e=a.length;e--&&-1<q(c,a[e],0););return e}function pa(a){return a&&a.Object===Object?a:null}function Jc(a,c){if(a!==c){var e=null===a,f=a===k,h=a===a,l=null===c,m=c===k,q=c===c;if(a>c&&!l||!h||e&&!m&&q||f&&q)return 1;if(c>a&&!e||!q||l&&!f&&h||m&&h)return-1}return 0}function te(a){return Ob[a]}function ue(a){return Pb[a]}function ve(a){return"\\"+Qb[a]}function Kc(a,c,e){var f=
a.length;for(c+=e?0:-1;e?c--:++c<f;){var h=a[c];if(h!==h)return c}return-1}function bb(a){var c=!1;if(null!=a&&"function"!=typeof a.toString)try{c=!!(a+"")}catch(e){}return c}function Aa(a,c){return a="number"==typeof a||Rb.test(a)?+a:-1,-1<a&&0==a%1&&(null==c?9007199254740991:c)>a}function Lc(a){for(var c,e=[];!(c=a.next()).done;)e.push(c.value);return e}function Nb(a){var c=-1,e=Array(a.size);return a.forEach(function(a,f){e[++c]=[f,a]}),e}function Ba(a,c){for(var e=-1,f=a.length,h=-1,l=[];++e<
f;){var k=a[e];(k===c||"__lodash_placeholder__"===k)&&(a[e]="__lodash_placeholder__",l[++h]=e)}return l}function pb(a){var c=-1,e=Array(a.size);return a.forEach(function(a){e[++c]=a}),e}function cb(a){if(!a||!qb.test(a))return a.length;for(var c=aa.lastIndex=0;aa.test(a);)c++;return c}function we(a){return Sb[a]}function Mc(L){function g(b){if(O(b)&&!B(b)&&!(b instanceof D)){if(b instanceof Z)return b;if(N.call(b,"__wrapped__"))return Nc(b)}return new Z(b)}function X(){}function Z(b,d){this.__wrapped__=
b;this.__actions__=[];this.__chain__=!!d;this.__index__=0;this.__values__=k}function D(b){this.__wrapped__=b;this.__actions__=[];this.__dir__=1;this.__filtered__=!1;this.__iteratees__=[];this.__takeCount__=4294967295;this.__views__=[]}function xa(){}function Ca(b){var d=-1,n=b?b.length:0;for(this.clear();++d<n;){var a=b[d];this.set(a[0],a[1])}}function oa(b){var d=-1,n=b?b.length:0;for(this.__data__=new Ca;++d<n;)this.push(b[d])}function pa(b,d){var n=b.__data__;return Qa(d)?(n=n.__data__,"__lodash_hash_undefined__"===
("string"==typeof d?n.string:n.hash)[d]):n.has(d)}function qa(b){var d=-1,n=b?b.length:0;for(this.clear();++d<n;){var a=b[d];this.set(a[0],a[1])}}function ab(b,d){var n=db(b,d);return 0>n?!1:(n==b.length-1?b.pop():rb.call(b,n,1),!0)}function ob(b,d){var n=db(b,d);return 0>n?k:b[n][1]}function db(b,d){for(var n=b.length;n--;)if(ra(b[n][0],d))return n;return-1}function Oc(b,d,n){var a=db(b,d);0>a?b.push([d,n]):b[a][1]=n}function Tb(b,d,n,a){return b===k||ra(b,Ra[n])&&!N.call(a,n)?d:b}function Pc(b,
d,n){(n===k||ra(b[d],n))&&("number"!=typeof d||n!==k||d in b)||(b[d]=n)}function sb(b,d,n){var a=b[d];N.call(b,d)&&ra(a,n)&&(n!==k||d in b)||(b[d]=n)}function Ob(b,d,n,a){return sa(b,function(b,c,e){d(a,b,n(b),e)}),a}function Qc(b,d){return b&&eb(d,T(d),b)}function Ub(b,d){for(var n=-1,a=null==b,c=d.length,e=Array(c);++n<c;)e[n]=a?k:fb(b,d[n]);return e}function Vb(b){return P(b)?b:[]}function Fa(b){return"function"==typeof b?b:ha}function Ga(b){return B(b)?b:Rc(b)}function Sa(b,d,n){return b===b&&
(n!==k&&(b=b>n?n:b),d!==k&&(b=d>b?d:b)),b}function ia(b,d,n,a,c,g){var f;if(n&&(f=c?n(b,a,c,g):n(b)),f!==k)return f;if(!M(b))return b;if(a=B(b)){if(f=ye(b),!d)return U(b,f)}else{var h=ja(b),l="[object Function]"==h||"[object GeneratorFunction]"==h;if(Sc(b))return ze(b,d);if("[object Object]"==h||"[object Arguments]"==h||l&&!c){if(bb(b))return c?b:{};if(f=Ae(l?{}:b),!d)return Tc(b,Qc(f,b))}else{if(!H[h])return c?b:{};f=Be(b,h,d)}}return g||(g=new qa),(c=g.get(b))?c:(g.set(b,f),(a?e:ka)(b,function(a,
c){sb(f,c,ia(a,d,n,c,b,g))}),a?f:Tc(b,f))}function Pb(b){var d=T(b),n=d.length;return function(a){if(null==a)return!n;for(var c=n;c--;){var e=d[c],g=b[e],f=a[e];if(f===k&&!(e in Object(a))||!g(f))return!1}return!0}}function Ta(b){return M(b)?Ce(b):{}}function Uc(b,d,n){if("function"!=typeof b)throw new ba("Expected a function");return tb(function(){b.apply(k,n)},d)}function Ha(b,d,n,a){var c=-1,e=v,g=!0,f=b.length,h=[],k=d.length;if(!f)return h;n&&(d=m(d,Pa(n)));a?(e=l,g=!1):200<=d.length&&(e=pa,
g=!1,d=new oa(d));a:for(;++c<f;){var q=b[c],p=n?n(q):q;if(g&&p===p){for(var r=k;r--;)if(d[r]===p)continue a;h.push(q)}else e(d,p,a)||h.push(q)}return h}function Qb(b,d){var n=!0;return sa(b,function(b,a,c){return n=!!d(b,a,c)}),n}function Vc(b,d){var n=[];return sa(b,function(b,a,c){d(b,a,c)&&n.push(b)}),n}function K(b,d,n,a){a||(a=[]);for(var c=-1,e=b.length;++c<e;){var g=b[c];0<d&&P(g)&&(n||B(g)||Ia(g))?1<d?K(g,d-1,n,a):r(a,g):n||(a[a.length]=g)}return a}function Rb(b,d){return null==b?b:Wb(b,d,
ca)}function ka(b,d){return b&&Wb(b,d,T)}function Xb(b,d){return b&&Wc(b,d,T)}function ub(b,d){return p(d,function(d){return da(b[d])})}function Yb(b,d){d=ta(d,b)?[d+""]:Ga(d);for(var n=0,a=d.length;null!=b&&a>n;)b=b[d[n++]];return n&&n==a?b:k}function Zb(b,d){return N.call(b,d)||"object"==typeof b&&d in b&&null===vb(b)}function Sb(b,d){return d in Object(b)}function $b(b,d,n){for(var a=n?l:v,c=b.length,e=c,g=Array(c),f=[];e--;){var h=b[e];e&&d&&(h=m(h,Pa(d)));g[e]=n||!d&&120>h.length?k:new oa(e&&
h)}var h=b[0],q=-1,p=h.length,r=g[0];a:for(;++q<p;){var t=h[q],u=d?d(t):t;if(r?!pa(r,u):!a(f,u,n)){for(e=c;--e;){var w=g[e];if(w?!pa(w,u):!a(b[e],u,n))continue a}r&&r.push(u);f.push(t)}}return f}function Hc(b,d,n,a){return ka(b,function(b,c,e){d(a,n(b),c,e)}),a}function gb(b,d,n){return ta(d,b)||(d=Ga(d),b=hb(b,d),d=V(d)),d=null==b?b:b[d],null==d?k:f(d,b,n)}function Ja(b,d,n,a,c){if(b===d)return!0;if(null==b||null==d||!M(b)&&!O(d))return b!==b&&d!==d;var e=B(b),g=B(d),f="[object Array]",h="[object Array]";
e||(f=ja(b),"[object Arguments]"==f?f="[object Object]":"[object Object]"!=f&&(e=Ua(b)));g||(h=ja(d),"[object Arguments]"==h?h="[object Object]":"[object Object]"!=h&&Ua(d));var l="[object Object]"==f&&!bb(b),g="[object Object]"==h&&!bb(d),h=f==h;!h||e||l?2&a||(f=l&&N.call(b,"__wrapped__"),g=g&&N.call(d,"__wrapped__"),!f&&!g)?h?(c||(c=new qa),b=(e?De:Ee)(b,d,Ja,n,a,c)):b=!1:b=Ja(f?b.value():b,g?d.value():d,n,a,c):b=Fe(b,d,f,Ja,n,a);return b}function ac(b,d,n,a){var c=n.length,e=c,g=!a;if(null==b)return!e;
for(b=Object(b);c--;){var f=n[c];if(g&&f[2]?f[1]!==b[f[0]]:!(f[0]in b))return!1}for(;++c<e;){var f=n[c],h=f[0],l=b[h],m=f[1];if(g&&f[2]){if(l===k&&!(h in b))return!1}else if(f=new qa,h=a?a(l,m,h,b,d,f):k,h===k?!Ja(m,l,a,3,f):!h)return!1}return!0}function Xc(b){var d=typeof b;return"function"==d?b:null==b?ha:"object"==d?B(b)?Yc(b[0],b[1]):Zc(b):$c(b)}function ad(b){b=null==b?b:Object(b);var d,n=[];for(d in b)n.push(d);return n}function bd(b,d){var n=-1,a=ea(b)?Array(b.length):[];return sa(b,function(b,
c,e){a[++n]=d(b,c,e)}),a}function Zc(b){var d=bc(b);if(1==d.length&&d[0][2]){var n=d[0][0],a=d[0][1];return function(b){return null==b?!1:b[n]===a&&(a!==k||n in Object(b))}}return function(n){return n===b||ac(n,b,d)}}function Yc(b,d){return function(n){var a=fb(n,b);return a===k&&a===d?cd(n,b):Ja(d,a,k,3)}}function wb(b,d,n,a,c){if(b!==d){var g=B(d)||Ua(d)?k:ca(d);e(g||d,function(e,f){if(g&&(f=e,e=d[f]),M(e)){c||(c=new qa);var h=f,l=c,m=b[h],q=d[h],p=l.get(q);if(!p){var p=a?a(m,q,h+"",b,d,l):k,r=
p===k;r&&(p=q,B(q)||Ua(q)?B(m)?p=m:P(m)?p=U(m):(r=!1,p=ia(q,!0)):cc(q)||Ia(q)?Ia(m)?p=dd(m):!M(m)||n&&da(m)?(r=!1,p=ia(q,!0)):p=m:r=!1);l.set(q,p);r&&wb(p,q,n,a,l)}Pc(b,h,p)}else h=a?a(b[f],e,f+"",b,d,c):k,h===k&&(h=e),Pc(b,f,h)})}}function ed(b,d,n){var a=-1,c=z();return d=m(d.length?d:Array(1),function(b){return c(b)}),b=bd(b,function(b,n,c){return{a:m(d,function(d){return d(b)}),b:++a,c:b}}),S(b,function(b,d){var a;a:{a=-1;for(var c=b.a,e=d.a,xe=c.length,g=n.length;++a<xe;){var f=Jc(c[a],e[a]);
if(f){if(a>=g){a=f;break a}a=f*("desc"==n[a]?-1:1);break a}}a=b.b-d.b}return a})}function fd(b,d){return b=Object(b),w(d,function(d,a){return a in b&&(d[a]=b[a]),d},{})}function gd(b,d){var n={};return Rb(b,function(b,a){d(b,a)&&(n[a]=b)}),n}function dc(b){return function(d){return null==d?k:d[b]}}function Ge(b){return function(d){return Yb(d,b)}}function hd(b,d,n){var a=-1,c=d.length,e=b;for(n&&(e=m(b,function(b){return n(b)}));++a<c;)for(var g=0,f=d[a],f=n?n(f):f;-1<(g=q(e,f,g));)e!==b&&rb.call(e,
g,1),rb.call(b,g,1);return b}function id(b,d){for(var n=b?d.length:0,a=n-1;n--;){var c=d[n];if(a==n||c!=e){var e=c;if(Aa(c))rb.call(b,c,1);else if(ta(c,b))delete b[c];else{var c=Ga(c),g=hb(b,c);null!=g&&delete g[V(c)]}}}return b}function ec(b,d){return b+xb(jd()*(d-b+1))}function fc(b,d,n,a){d=ta(d,b)?[d+""]:Ga(d);for(var c=-1,e=d.length,g=e-1,f=b;null!=f&&++c<e;){var h=d[c];if(M(f)){var l=n;if(c!=g){var m=f[h],l=a?a(m,h,f):k;l===k&&(l=null==m?Aa(d[c+1])?[]:{}:m)}sb(f,h,l)}f=f[h]}return b}function ua(b,
d,n){var a=-1,c=b.length;0>d&&(d=-d>c?0:c+d);n=n>c?c:n;0>n&&(n+=c);c=d>n?0:n-d>>>0;d>>>=0;for(n=Array(c);++a<c;)n[a]=b[a+d];return n}function He(b,d){var n;return sa(b,function(b,a,c){return n=d(b,a,c),!n}),!!n}function yb(b,d,n){var a=0,c=b?b.length:a;if("number"==typeof d&&d===d&&2147483647>=c){for(;c>a;){var e=a+c>>>1,f=b[e];(n?d>=f:d>f)&&null!==f?a=e+1:c=e}return c}return gc(b,d,ha,n)}function gc(b,d,n,a){d=n(d);for(var c=0,e=b?b.length:0,f=d!==d,g=null===d,h=d===k;e>c;){var l=xb((c+e)/2),m=n(b[l]),
q=m!==k,p=m===m;(f?p||a:g?p&&q&&(a||null!=m):h?p&&(a||q):null==m?0:a?d>=m:d>m)?c=l+1:e=l}return fa(e,4294967294)}function kd(b,d){for(var n=0,a=b.length,c=b[0],e=d?d(c):c,f=e,g=0,h=[c];++n<a;)c=b[n],e=d?d(c):c,ra(e,f)||(f=e,h[++g]=c);return h}function Ka(b,d,n){var a=-1,c=v,e=b.length,f=!0,g=[],h=g;if(n)f=!1,c=l;else if(200>e)h=d?[]:g;else{if(c=d?null:Ie(b))return pb(c);f=!1;c=pa;h=new oa}a:for(;++a<e;){var k=b[a],m=d?d(k):k;if(f&&m===m){for(var q=h.length;q--;)if(h[q]===m)continue a;d&&h.push(m);
g.push(k)}else c(h,m,n)||(h!==g&&h.push(m),g.push(k))}return g}function zb(b,d,n,a){for(var c=b.length,e=a?c:-1;(a?e--:++e<c)&&d(b[e],e,b););return n?ua(b,a?0:e,a?e+1:c):ua(b,a?e+1:0,a?c:e)}function ld(b,d){var n=b;return n instanceof D&&(n=n.value()),w(d,function(b,d){return d.func.apply(d.thisArg,r([b],d.args))},n)}function hc(b,d,n){for(var a=-1,c=b.length;++a<c;)var e=e?r(Ha(e,b[a],d,n),Ha(b[a],e,d,n)):b[a];return e&&e.length?Ka(e,d,n):[]}function md(b,d,n){for(var a=-1,c=b.length,e=d.length,
f={};++a<c;)n(f,b[a],e>a?d[a]:k);return f}function ze(b,d){if(d)return b.slice();var n=new b.constructor(b.length);return b.copy(n),n}function nd(b){var d=new b.constructor(b.byteLength);return(new Ab(d)).set(new Ab(b)),d}function od(b,d,n,a){var c=-1,e=b.length,f=n.length,g=-1,h=d.length,l=Q(e-f,0),k=Array(h+l);for(a=!a;++g<h;)k[g]=d[g];for(;++c<f;)(a||e>c)&&(k[n[c]]=b[c]);for(;l--;)k[g++]=b[c++];return k}function pd(b,d,a,c){var e=-1,f=b.length,g=-1,h=a.length,l=-1,k=d.length,m=Q(f-h,0),q=Array(m+
k);for(c=!c;++e<m;)q[e]=b[e];for(m=e;++l<k;)q[m+l]=d[l];for(;++g<h;)(c||f>e)&&(q[m+a[g]]=b[e++]);return q}function U(b,d){var a=-1,c=b.length;for(d||(d=Array(c));++a<c;)d[a]=b[a];return d}function eb(b,d,a){return ic(b,d,a)}function ic(b,d,a,c){a||(a={});for(var e=-1,f=d.length;++e<f;){var g=d[e],h=c?c(a[g],b[g],g,a,b):b[g];sb(a,g,h)}return a}function Tc(b,d){return eb(b,Je(b),d)}function Bb(b,d){return function(n,c){var e=B(n)?a:Ob,f=d?d():{};return e(n,b,z(c),f)}}function Va(b){return x(function(d,
a){var c=-1,e=a.length,f=1<e?a[e-1]:k,g=2<e?a[2]:k,f="function"==typeof f?(e--,f):k;g&&la(a[0],a[1],g)&&(f=3>e?k:f,e=1);for(d=Object(d);++c<e;)(g=a[c])&&b(d,g,c,f);return d})}function qd(b,d){return function(a,c){if(null==a)return a;if(!ea(a))return b(a,c);for(var e=a.length,f=d?e:-1,g=Object(a);(d?f--:++f<e)&&!1!==c(g[f],f,g););return a}}function rd(b){return function(d,a,c){var e=-1,f=Object(d);c=c(d);for(var g=c.length;g--;){var h=c[b?g:++e];if(!1===a(f[h],h,f))break}return d}}function Ke(b,d,
a){function c(){return(this&&this!==ma&&this instanceof c?f:b).apply(e?a:this,arguments)}var e=1&d,f=ib(b);return c}function sd(b){return function(d){d=F(d);var a=qb.test(d)?d.match(aa):k,c=a?a[0]:d.charAt(0);return d=a?a.slice(1).join(""):d.slice(1),c[b]()+d}}function Wa(b){return function(d){return w(td(ud(d)),b,"")}}function ib(b){return function(){var d=arguments;switch(d.length){case 0:return new b;case 1:return new b(d[0]);case 2:return new b(d[0],d[1]);case 3:return new b(d[0],d[1],d[2]);case 4:return new b(d[0],
d[1],d[2],d[3]);case 5:return new b(d[0],d[1],d[2],d[3],d[4]);case 6:return new b(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new b(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var a=Ta(b.prototype),d=b.apply(a,d);return M(d)?d:a}}function Le(b,d,a){function c(){for(var g=arguments.length,h=Array(g),l=g,m=Xa(c);l--;)h[l]=arguments[l];return l=3>g&&h[0]!==m&&h[g-1]!==m?[]:Ba(h,m),g-=l.length,a>g?vd(b,d,Cb,c.placeholder,k,h,l,k,k,a-g):f(this&&this!==ma&&this instanceof c?e:b,this,h)}var e=ib(b);return c}function wd(b){return x(function(d){d=
K(d,1);var a=d.length,c=a,e=Z.prototype.thru;for(b&&d.reverse();c--;){var f=d[c];if("function"!=typeof f)throw new ba("Expected a function");if(e&&!g&&"wrapper"==Db(f))var g=new Z([],!0)}for(c=g?c:a;++c<a;)var f=d[c],e=Db(f),h="wrapper"==e?jc(f):k,g=h&&kc(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?g[Db(h[0])].apply(g,h[3]):1==f.length&&kc(f)?g[e]():g.thru(f);return function(){var b=arguments,c=b[0];if(g&&1==b.length&&B(c)&&200<=c.length)return g.plant(c).value();for(var e=0,b=a?d[e].apply(this,b):c;++e<
a;)b=d[e].call(this,b);return b}})}function Cb(b,d,a,c,e,g,f,h,l,m){function q(){for(var y=arguments.length,S=y,C=Array(y);S--;)C[S]=arguments[S];if(t){var x,A=Xa(q),S=C.length;for(x=0;S--;)C[S]===A&&x++}if(c&&(C=od(C,c,e,t)),g&&(C=pd(C,g,f,t)),y-=x,t&&m>y)return A=Ba(C,A),vd(b,d,Cb,q.placeholder,a,C,A,h,l,m-y);if(A=r?a:this,S=u?A[b]:b,y=C.length,h){x=C.length;for(var z=fa(h.length,x),B=U(C);z--;){var ya=h[z];C[z]=Aa(ya,x)?B[ya]:k}}else v&&1<y&&C.reverse();return p&&y>l&&(C.length=l),this&&this!==
ma&&this instanceof q&&(S=w||ib(S)),S.apply(A,C)}var p=128&d,r=1&d,u=2&d,t=24&d,v=512&d,w=u?k:ib(b);return q}function xd(b,d){return function(a,c){return Hc(a,b,d(c),{})}}function lc(b){return x(function(d){return d=m(K(d,1),z()),x(function(a){var c=this;return b(d,function(b){return f(b,c,a)})})})}function Eb(b,d,a){return d=E(d),b=cb(b),d&&d>b?(d-=b,a=a===k?" ":a+"",b=yd(a,Fb(d/cb(a))),qb.test(a)?b.match(aa).slice(0,d).join(""):b.slice(0,d)):""}function Me(b,d,a,c){function e(){for(var d=-1,l=arguments.length,
k=-1,m=c.length,q=Array(m+l),p=this&&this!==ma&&this instanceof e?h:b;++k<m;)q[k]=c[k];for(;l--;)q[k++]=arguments[++d];return f(p,g?a:this,q)}var g=1&d,h=ib(b);return e}function zd(b){return function(d,a,c){c&&"number"!=typeof c&&la(d,a,c)&&(a=c=k);d=R(d);d=d===d?d:0;a===k?(a=d,d=0):a=R(a)||0;c=c===k?a>d?1:-1:R(c)||0;var e=-1;a=Q(Fb((a-d)/(c||1)),0);for(var g=Array(a);a--;)g[b?a:++e]=d,d+=c;return g}}function vd(b,d,a,c,e,g,f,h,l,m){var q=8&d;h=h?U(h):k;var p=q?f:k;f=q?k:f;var r=q?g:k;return g=q?
k:g,d=(d|(q?32:64))&~(q?64:32),4&d||(d&=-4),d=[b,d,e,r,p,g,f,h,l,m],a=a.apply(k,d),kc(b)&&Ad(a,d),a.placeholder=c,a}function mc(b){var d=Ya[b];return function(b,a){if(b=R(b),a=E(a)){var c=(F(b)+"e").split("e"),c=d(c[0]+"e"+(+c[1]+a)),c=(F(c)+"e").split("e");return+(c[0]+"e"+(+c[1]-a))}return d(b)}}function va(b,d,a,c,e,g,f,h){var l=2&d;if(!l&&"function"!=typeof b)throw new ba("Expected a function");var m=c?c.length:0;if(m||(d&=-97,c=e=k),f=f===k?f:Q(E(f),0),h=h===k?h:E(h),m-=e?e.length:0,64&d){var q=
c,p=e;c=e=k}var r=l?k:jc(b);return g=[b,d,a,c,e,q,p,g,f,h],r&&(a=g[1],b=r[1],d=a|b,c=128==b&&8==a||128==b&&256==a&&r[8]>=g[7].length||384==b&&r[8]>=r[7].length&&8==a,131>d||c)&&(1&b&&(g[2]=r[2],d|=1&a?0:4),(a=r[3])&&(c=g[3],g[3]=c?od(c,a,r[4]):U(a),g[4]=c?Ba(g[3],"__lodash_placeholder__"):U(r[4])),(a=r[5])&&(c=g[5],g[5]=c?pd(c,a,r[6]):U(a),g[6]=c?Ba(g[5],"__lodash_placeholder__"):U(r[6])),(a=r[7])&&(g[7]=U(a)),128&b&&(g[8]=null==g[8]?r[8]:fa(g[8],r[8])),null==g[9]&&(g[9]=r[9]),g[0]=r[0],g[1]=d),b=
g[0],d=g[1],a=g[2],c=g[3],e=g[4],h=g[9]=null==g[9]?l?0:b.length:Q(g[9]-m,0),!h&&24&d&&(d&=-25),l=d&&1!=d?8==d||16==d?Le(b,d,h):32!=d&&33!=d||e.length?Cb.apply(k,g):Me(b,d,a,c):Ke(b,d,a),(r?Bd:Ad)(l,g)}function De(b,d,a,c,e,g){var f=-1,h=2&e,l=1&e,m=b.length,q=d.length;if(!(m==q||h&&q>m))return!1;if(q=g.get(b))return q==d;q=!0;for(g.set(b,d);++f<m;){var p=b[f],r=d[f];if(c)var t=h?c(r,p,f,d,b,g):c(p,r,f,b,d,g);if(t!==k){if(t)continue;q=!1;break}if(l){if(!G(d,function(b){return p===b||a(p,b,c,e,g)})){q=
!1;break}}else if(p!==r&&!a(p,r,c,e,g)){q=!1;break}}return g["delete"](b),q}function Fe(b,d,a,c,e,g){switch(a){case "[object ArrayBuffer]":if(b.byteLength!=d.byteLength||!c(new Ab(b),new Ab(d)))break;return!0;case "[object Boolean]":case "[object Date]":return+b==+d;case "[object Error]":return b.name==d.name&&b.message==d.message;case "[object Number]":return b!=+b?d!=+d:b==+d;case "[object RegExp]":case "[object String]":return b==d+"";case "[object Map]":var f=Nb;case "[object Set]":return f||
(f=pb),(2&g||b.size==d.size)&&c(f(b),f(d),e,1|g);case "[object Symbol]":return!!wa&&nc.call(b)==nc.call(d)}return!1}function Ee(b,d,a,c,e,g){var f=2&e,h=T(b),l=h.length,m=T(d).length;if(l!=m&&!f)return!1;for(var q=l;q--;){var p=h[q];if(!(f?p in d:Zb(d,p)))return!1}if(m=g.get(b))return m==d;m=!0;g.set(b,d);for(var r=f;++q<l;){var p=h[q],t=b[p],u=d[p];if(c)var v=f?c(u,t,p,d,b,g):c(t,u,p,b,d,g);if(v===k?t!==u&&!a(t,u,c,e,g):!v){m=!1;break}r||(r="constructor"==p)}return m&&!r&&(a=b.constructor,c=d.constructor,
a!=c&&"constructor"in b&&"constructor"in d&&!("function"==typeof a&&a instanceof a&&"function"==typeof c&&c instanceof c)&&(m=!1)),g["delete"](b),m}function Db(b){for(var d=b.name+"",a=jb[d],c=N.call(jb,d)?a.length:0;c--;){var e=a[c],g=e.func;if(null==g||g==b)return e.name}return d}function z(){var b=g.iteratee||oc,b=b===oc?Xc:b;return arguments.length?b(arguments[0],arguments[1]):b}function bc(b){b=Cd(b);for(var d=b.length;d--;){var a,c=b[d];a=b[d][1];a=a===a&&!M(a);c[2]=a}return b}function Gb(b,
d){var a=null==b?k:b[d];return Dd(a)?a:k}function Xa(b){return(N.call(g,"placeholder")?g:b).placeholder}function ja(b){return W.call(b)}function Ed(b,d,a){if(null==b)return!1;var c=a(b,d);return c||ta(d)||(d=Ga(d),b=hb(b,d),null!=b&&(d=V(d),c=a(b,d))),a=b?b.length:k,c||!!a&&kb(a)&&Aa(d,a)&&(B(b)||La(b)||Ia(b))}function ye(b){var d=b.length,a=b.constructor(d);return d&&"string"==typeof b[0]&&N.call(b,"index")&&(a.index=b.index,a.input=b.input),a}function Ae(b){return da(b.constructor)&&!pc(b)?Ta(vb(b)):
{}}function Be(b,d,a){var e=b.constructor;switch(d){case "[object ArrayBuffer]":return nd(b);case "[object Boolean]":case "[object Date]":return new e(+b);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return d=b.buffer,a=a?nd(d):d,new b.constructor(a,b.byteOffset,b.length);case "[object Map]":return a=
b.constructor,w(Nb(b),h,new a);case "[object Number]":case "[object String]":return new e(b);case "[object RegExp]":return a=new b.constructor(b.source,Fd.exec(b)),a.lastIndex=b.lastIndex,a;case "[object Set]":return a=b.constructor,w(pb(b),c,new a);case "[object Symbol]":return wa?Object(nc.call(b)):{}}}function Gd(b){var d=b?b.length:k;return kb(d)&&(B(b)||La(b)||Ia(b))?Oa(d,String):null}function la(b,d,a){if(!M(a))return!1;var c=typeof d;return("number"==c?ea(a)&&Aa(d,a.length):"string"==c&&d in
a)?ra(a[d],b):!1}function ta(b,d){return"number"==typeof b?!0:!B(b)&&(Ne.test(b)||!Oe.test(b)||null!=d&&b in Object(d))}function Qa(b){var d=typeof b;return"number"==d||"boolean"==d||"string"==d&&"__proto__"!=b||null==b}function kc(b){var d=Db(b),a=g[d];return"function"==typeof a&&d in D.prototype?b===a?!0:(d=jc(a),!!d&&b===d[0]):!1}function pc(b){var d=b&&b.constructor,d=da(d)&&d.prototype||Ra;return b===d}function Hd(b,d,a,c,e,g){return M(b)&&M(d)&&(g.set(d,b),wb(b,d,k,Hd,g)),b}function hb(b,d){return 1==
d.length?b:fb(b,ua(d,0,-1))}function Rc(b){var d=[];return F(b).replace(Pe,function(b,a,c,e){d.push(c?e.replace(Qe,"$1"):a||b)}),d}function Nc(b){if(b instanceof D)return b.clone();var d=new Z(b.__wrapped__,b.__chain__);return d.__actions__=U(b.__actions__),d.__index__=b.__index__,d.__values__=b.__values__,d}function Id(b,d,a){var c=b?b.length:0;return c?(d=a||d===k?1:E(d),ua(b,0>d?0:d,c)):[]}function Jd(b,d,a){var c=b?b.length:0;return c?(d=a||d===k?1:E(d),d=c-d,ua(b,0,0>d?0:d)):[]}function Kd(b){return b?
b[0]:k}function V(b){var d=b?b.length:0;return d?b[d-1]:k}function Ld(b,d){return b&&b.length&&d&&d.length?hd(b,d):b}function qc(b){return b?Re.call(b):b}function rc(b){if(!b||!b.length)return[];var d=0;return b=p(b,function(b){return P(b)?(d=Q(b.length,d),!0):void 0}),Oa(d,function(d){return m(b,dc(d))})}function Md(b,d){if(!b||!b.length)return[];var a=rc(b);return null==d?a:m(a,function(b){return f(d,k,b)})}function Nd(b){return b=g(b),b.__chain__=!0,b}function Hb(b,d){return d(b)}function Se(){return this}
function Od(b,d){return"function"==typeof d&&B(b)?e(b,d):sa(b,Fa(d))}function Pd(b,d){var a;if("function"==typeof d&&B(b)){for(a=b.length;a--&&!1!==d(b[a],a,b););a=b}else a=sc(b,Fa(d));return a}function Qd(b,d){return(B(b)?m:bd)(b,z(d,3))}function Rd(b,d){var a=-1,c=tc(b),e=c.length,g=e-1;for(d=Sa(E(d),0,e);++a<d;){var e=ec(a,g),f=c[e];c[e]=c[a];c[a]=f}return c.length=d,c}function Sd(b,d,a){return d=a?k:d,d=b&&null==d?b.length:d,va(b,128,k,k,k,k,d)}function Td(b,d){var a;if("function"!=typeof d)throw new ba("Expected a function");
return b=E(b),function(){return 0<--b&&(a=d.apply(this,arguments)),1>=b&&(d=k),a}}function Ud(b,d,a){return d=a?k:d,b=va(b,8,k,k,k,k,k,d),b.placeholder=Ud.placeholder,b}function Vd(b,d,a){return d=a?k:d,b=va(b,16,k,k,k,k,k,d),b.placeholder=Vd.placeholder,b}function Wd(b,d,a){function c(){t&&lb(t);m&&lb(m);v=0;l=m=r=t=u=k}function e(d,a){a&&lb(a);m=t=u=k;d&&(v=mb(),q=b.apply(r,l),t||m||(l=r=k))}function g(){var b=d-(mb()-p);0>=b||b>d?e(u,m):t=tb(g,b)}function f(){e(C,t)}function h(){if(l=arguments,
p=mb(),r=this,u=C&&(t||!w),!1===y)var a=w&&!t;else{v||m||w||(v=p);var c=y-(p-v),n=(0>=c||c>y)&&(w||m);n?(m&&(m=lb(m)),v=p,q=b.apply(r,l)):m||(m=tb(f,c))}return n&&t?t=lb(t):t||d===y||(t=tb(g,d)),a&&(n=!0,q=b.apply(r,l)),!n||t||m||(l=r=k),q}var l,m,q,p,r,t,u,v=0,w=!1,y=!1,C=!0;if("function"!=typeof b)throw new ba("Expected a function");return d=R(d)||0,M(a)&&(w=!!a.leading,y="maxWait"in a&&Q(R(a.maxWait)||0,d),C="trailing"in a?!!a.trailing:C),h.cancel=c,h.flush=function(){return(t&&u||m&&C)&&(q=b.apply(r,
l)),c(),q},h}function uc(b,d){if("function"!=typeof b||d&&"function"!=typeof d)throw new ba("Expected a function");var a=function(){var c=arguments,e=d?d.apply(this,c):c[0],g=a.cache;return g.has(e)?g.get(e):(c=b.apply(this,c),a.cache=g.set(e,c),c)};return a.cache=new uc.Cache,a}function x(b,d){if("function"!=typeof b)throw new ba("Expected a function");return d=Q(d===k?b.length-1:E(d),0),function(){for(var a=arguments,c=-1,e=Q(a.length-d,0),g=Array(e);++c<e;)g[c]=a[d+c];switch(d){case 0:return b.call(this,
g);case 1:return b.call(this,a[0],g);case 2:return b.call(this,a[0],a[1],g)}e=Array(d+1);for(c=-1;++c<d;)e[c]=a[c];return e[d]=g,f(b,this,e)}}function ra(b,d){return b===d||b!==b&&d!==d}function vc(b,d){return b>d}function Ia(b){return P(b)&&N.call(b,"callee")&&(!Xd.call(b,"callee")||"[object Arguments]"==W.call(b))}function ea(b){return null!=b&&!("function"==typeof b&&da(b))&&kb(Te(b))}function P(b){return O(b)&&ea(b)}function wc(b){return O(b)?"[object Error]"==W.call(b)||"string"==typeof b.message&&
"string"==typeof b.name:!1}function da(b){return b=M(b)?W.call(b):"","[object Function]"==b||"[object GeneratorFunction]"==b}function Yd(b){return"number"==typeof b&&b==E(b)}function kb(b){return"number"==typeof b&&-1<b&&0==b%1&&9007199254740991>=b}function M(b){var d=typeof b;return!!b&&("object"==d||"function"==d)}function O(b){return!!b&&"object"==typeof b}function Dd(b){return null==b?!1:da(b)?Zd.test(Da.call(b)):O(b)&&(bb(b)?Zd:Ue).test(b)}function $d(b){return"number"==typeof b||O(b)&&"[object Number]"==
W.call(b)}function cc(b){return!O(b)||"[object Object]"!=W.call(b)||bb(b)?!1:(b=vb(b),null===b?!0:(b=b.constructor,"function"==typeof b&&b instanceof b&&Da.call(b)==Ve))}function ae(b){return M(b)&&"[object RegExp]"==W.call(b)}function La(b){return"string"==typeof b||!B(b)&&O(b)&&"[object String]"==W.call(b)}function be(b){return"symbol"==typeof b||O(b)&&"[object Symbol]"==W.call(b)}function Ua(b){return O(b)&&kb(b.length)&&!!I[W.call(b)]}function xc(b,d){return d>b}function tc(b){if(!b)return[];
if(ea(b))return La(b)?b.match(aa):U(b);if(Ma&&b[Ma])return Lc(b[Ma]());var d=ja(b);return("[object Map]"==d?Nb:"[object Set]"==d?pb:Ib)(b)}function E(b){if(!b)return 0===b?b:0;if(b=R(b),b===Jb||b===-Jb)return 1.7976931348623157E308*(0>b?-1:1);var d=b%1;return b===b?d?b-d:b:0}function ce(b){return b?Sa(E(b),0,4294967295):0}function R(b){if(M(b)&&(b=da(b.valueOf)?b.valueOf():b,b=M(b)?b+"":b),"string"!=typeof b)return 0===b?b:+b;b=b.replace(yc,"");var d=We.test(b);return d||Xe.test(b)?Ye(b.slice(2),
d?2:8):Ze.test(b)?$e:+b}function dd(b){return eb(b,ca(b))}function F(b){if("string"==typeof b)return b;if(null==b)return"";if(be(b))return wa?af.call(b):"";var d=b+"";return"0"==d&&1/b==-Jb?"-0":d}function fb(b,d,a){return b=null==b?k:Yb(b,d),b===k?a:b}function de(b,d){return Ed(b,d,Zb)}function cd(b,d){return Ed(b,d,Sb)}function T(b){var d=pc(b);if(!d&&!ea(b))return bf(Object(b));var a,c=Gd(b),e=!!c,c=c||[],g=c.length;for(a in b)!Zb(b,a)||e&&("length"==a||Aa(a,g))||d&&"constructor"==a||c.push(a);
return c}function ca(b){for(var d=-1,a=pc(b),c=ad(b),e=c.length,g=Gd(b),f=!!g,g=g||[],h=g.length;++d<e;){var l=c[d];f&&("length"==l||Aa(l,h))||"constructor"==l&&(a||!N.call(b,l))||g.push(l)}return g}function Cd(b){return Y(b,T(b))}function Ib(b){return b?za(b,T(b)):[]}function zc(b){return ee(F(b).toLowerCase())}function ud(b){return(b=F(b))&&b.replace(cf,te).replace(df,"")}function yd(b,d){b=F(b);d=E(d);var a="";if(!b||1>d||9007199254740991<d)return a;do d%2&&(a+=b),d=xb(d/2),b+=b;while(d);return a}
function td(b,d,a){return b=F(b),d=a?k:d,d===k&&(d=ef.test(b)?ff:gf),b.match(d)||[]}function Ac(b){return function(){return b}}function ha(b){return b}function oc(b){return Xc("function"==typeof b?b:ia(b,!0))}function Bc(b,d,a){var c=T(d),g=ub(d,c);null!=a||M(d)&&(g.length||!c.length)||(a=d,d=b,b=this,g=ub(d,T(d)));var f=M(a)&&"chain"in a?a.chain:!0,h=da(b);return e(g,function(a){var c=d[a];b[a]=c;h&&(b.prototype[a]=function(){var d=this.__chain__;if(f||d){var a=b(this.__wrapped__);return(a.__actions__=
U(this.__actions__)).push({func:c,args:arguments,thisArg:b}),a.__chain__=d,a}return c.apply(b,r([this.value()],arguments))})}),b}function Cc(){}function $c(b){return ta(b)?dc(b):Ge(b)}function fe(b){return b&&b.length?ya(b,ha):0}L=L?Ea.defaults({},L,Ea.pick(ma,hf)):ma;var jf=L.Date,kf=L.Error,Ya=L.Math,Dc=L.RegExp,ba=L.TypeError,Kb=L.Array.prototype,Ra=L.Object.prototype,Da=L.Function.prototype.toString,N=Ra.hasOwnProperty,lf=0,Ve=Da.call(Object),W=Ra.toString,mf=ma._,Zd=Dc("^"+Da.call(N).replace(Ec,
"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),he=ge?L.Buffer:k,ie=L.Reflect,wa=L.Symbol,Ab=L.Uint8Array,lb=L.clearTimeout,je=ie?ie.enumerate:k,vb=Object.getPrototypeOf,nf=Object.getOwnPropertySymbols,Ma="symbol"==typeof(Ma=wa&&wa.iterator)?Ma:k,Ce=Object.create,Xd=Ra.propertyIsEnumerable,tb=L.setTimeout,rb=Kb.splice,Fb=Ya.ceil,xb=Ya.floor,of=L.isFinite,pf=Kb.join,bf=Object.keys,Q=Ya.max,fa=Ya.min,qf=L.parseInt,jd=Ya.random,Re=Kb.reverse,na=Gb(L,"Map"),Na=Gb(L,
"Set"),Za=Gb(L,"WeakMap"),$a=Gb(Object,"create"),Lb=Za&&new Za,rf=na?Da.call(na):"",sf=Na?Da.call(Na):"",tf=Za?Da.call(Za):"",ke=wa?wa.prototype:k,nc=wa?ke.valueOf:k,af=wa?ke.toString:k,jb={};g.templateSettings={escape:uf,evaluate:vf,interpolate:le,variable:"",imports:{_:g}};var sa=qd(ka),sc=qd(Xb,!0),Wb=rd(),Wc=rd(!0);je&&!Xd.call({valueOf:1},"valueOf")&&(ad=function(b){return Lc(je(b))});var Bd=Lb?function(b,d){return Lb.set(b,d),b}:ha,Ie=Na&&2===(new Na([1,2])).size?function(b){return new Na(b)}:
Cc,jc=Lb?function(b){return Lb.get(b)}:Cc,Te=dc("length"),Je=nf||function(){return[]};(na&&"[object Map]"!=ja(new na)||Na&&"[object Set]"!=ja(new Na)||Za&&"[object WeakMap]"!=ja(new Za))&&(ja=function(b){var d=W.call(b);if(b="[object Object]"==d?b.constructor:null,b="function"==typeof b?Da.call(b):"")switch(b){case rf:return"[object Map]";case sf:return"[object Set]";case tf:return"[object WeakMap]"}return d});var Ad=function(){var b=0,d=0;return function(a,c){var e=mb(),g=16-(e-d);if(d=e,0<g){if(150<=
++b)return a}else b=0;return Bd(a,c)}}(),wf=x(function(b,d){B(b)||(b=null==b?[]:[Object(b)]);d=K(d,1);for(var a=b,c=d,e=-1,g=a.length,f=-1,h=c.length,l=Array(g+h);++e<g;)l[e]=a[e];for(;++f<h;)l[e++]=c[f];return l}),xf=x(function(b,d){return P(b)?Ha(b,K(d,1,!0)):[]}),yf=x(function(b,d){var a=V(d);return P(a)&&(a=k),P(b)?Ha(b,K(d,1,!0),z(a)):[]}),zf=x(function(b,d){var a=V(d);return P(a)&&(a=k),P(b)?Ha(b,K(d,1,!0),k,a):[]}),Af=x(function(b){var d=m(b,Vb);return d.length&&d[0]===b[0]?$b(d):[]}),Bf=x(function(b){var d=
V(b),a=m(b,Vb);return d===V(a)?d=k:a.pop(),a.length&&a[0]===b[0]?$b(a,z(d)):[]}),Cf=x(function(b){var d=V(b),a=m(b,Vb);return d===V(a)?d=k:a.pop(),a.length&&a[0]===b[0]?$b(a,k,d):[]}),Df=x(Ld),Ef=x(function(b,d){d=m(K(d,1),String);var a=Ub(b,d);return id(b,d.sort(Jc)),a}),Ff=x(function(b){return Ka(K(b,1,!0))}),Gf=x(function(b){var d=V(b);return P(d)&&(d=k),Ka(K(b,1,!0),z(d))}),Hf=x(function(b){var d=V(b);return P(d)&&(d=k),Ka(K(b,1,!0),k,d)}),If=x(function(b,d){return P(b)?Ha(b,d):[]}),Jf=x(function(b){return hc(p(b,
P))}),Kf=x(function(b){var d=V(b);return P(d)&&(d=k),hc(p(b,P),z(d))}),Lf=x(function(b){var d=V(b);return P(d)&&(d=k),hc(p(b,P),k,d)}),Mf=x(rc),Nf=x(function(b){var d=b.length,d=1<d?b[d-1]:k,d="function"==typeof d?(b.pop(),d):k;return Md(b,d)}),Of=x(function(b){b=K(b,1);var d=b.length,a=d?b[0]:0,c=this.__wrapped__,e=function(d){return Ub(d,b)};return 1>=d&&!this.__actions__.length&&c instanceof D&&Aa(a)?(c=c.slice(a,+a+(d?1:0)),c.__actions__.push({func:Hb,args:[e],thisArg:k}),(new Z(c,this.__chain__)).thru(function(b){return d&&
!b.length&&b.push(k),b})):this.thru(e)}),Pf=Bb(function(b,d,a){N.call(b,a)?++b[a]:b[a]=1}),Qf=Bb(function(b,d,a){N.call(b,a)?b[a].push(d):b[a]=[d]}),Rf=x(function(b,d,a){var c=-1,e="function"==typeof d,g=ta(d),h=ea(b)?Array(b.length):[];return sa(b,function(b){var l=e?d:g&&null!=b?b[d]:k;h[++c]=l?f(l,b,a):gb(b,d,a)}),h}),Sf=Bb(function(b,d,a){b[a]=d}),Tf=Bb(function(b,d,a){b[a?0:1].push(d)},function(){return[[],[]]}),Uf=x(function(b,d){if(null==b)return[];var a=d.length;return 1<a&&la(b,d[0],d[1])?
d=[]:2<a&&la(d[0],d[1],d[2])&&(d.length=1),ed(b,K(d,1),[])}),mb=jf.now,Fc=x(function(b,d,a){var c=1;if(a.length)var e=Ba(a,Xa(Fc)),c=32|c;return va(b,c,d,a,e)}),me=x(function(b,d,a){var c=3;if(a.length)var e=Ba(a,Xa(me)),c=32|c;return va(d,c,b,a,e)}),Vf=x(function(b,d){return Uc(b,1,d)}),Wf=x(function(b,d,a){return Uc(b,R(d)||0,a)}),Xf=x(function(b,d){d=m(K(d,1),z());var a=d.length;return x(function(c){for(var e=-1,g=fa(c.length,a);++e<g;)c[e]=d[e].call(this,c[e]);return f(b,this,c)})}),Gc=x(function(b,
d){var a=Ba(d,Xa(Gc));return va(b,32,k,d,a)}),ne=x(function(b,d){var a=Ba(d,Xa(ne));return va(b,64,k,d,a)}),Yf=x(function(b,d){return va(b,256,k,k,k,K(d,1))}),B=Array.isArray,Sc=he?function(b){return b instanceof he}:Ac(!1),Zf=Va(function(b,d){eb(d,T(d),b)}),oe=Va(function(b,d){eb(d,ca(d),b)}),nb=Va(function(b,d,a,c){ic(d,ca(d),b,c)}),$f=Va(function(b,d,a,c){ic(d,T(d),b,c)}),ag=x(function(b,d){return Ub(b,K(d,1))}),bg=x(function(b){return b.push(k,Tb),f(nb,k,b)}),cg=x(function(b){return b.push(k,
Hd),f(pe,k,b)}),dg=xd(function(b,d,a){b[d]=a},Ac(ha)),eg=xd(function(b,d,a){N.call(b,d)?b[d].push(a):b[d]=[a]},z),fg=x(gb),gg=Va(function(b,d,a){wb(b,d,a)}),pe=Va(function(b,d,a,c){wb(b,d,a,c)}),hg=x(function(b,d){return null==b?{}:(d=m(K(d,1),String),fd(b,Ha(ca(b),d)))}),ig=x(function(b,d){return null==b?{}:fd(b,K(d,1))}),jg=Wa(function(b,d,a){return d=d.toLowerCase(),b+(a?zc(d):d)}),kg=Wa(function(b,d,a){return b+(a?"-":"")+d.toLowerCase()}),lg=Wa(function(b,d,a){return b+(a?" ":"")+d.toLowerCase()}),
mg=sd("toLowerCase"),ee=sd("toUpperCase"),ng=Wa(function(b,d,a){return b+(a?"_":"")+d.toLowerCase()}),og=Wa(function(b,d,a){return b+(a?" ":"")+zc(d)}),pg=Wa(function(b,d,a){return b+(a?" ":"")+d.toUpperCase()}),qe=x(function(b,d){try{return f(b,k,d)}catch(a){return wc(a)?a:new kf(a)}}),qg=x(function(b,d){return e(K(d,1),function(d){b[d]=Fc(b[d],b)}),b}),rg=wd(),sg=wd(!0),tg=x(function(b,d){return function(a){return gb(a,b,d)}}),ug=x(function(b,d){return function(a){return gb(b,a,d)}}),vg=lc(m),wg=
lc(t),xg=lc(G),yg=zd(),zg=zd(!0),Ag=mc("ceil"),Bg=mc("floor"),Cg=mc("round");return g.prototype=X.prototype,Z.prototype=Ta(X.prototype),Z.prototype.constructor=Z,D.prototype=Ta(X.prototype),D.prototype.constructor=D,xa.prototype=$a?$a(null):Ra,Ca.prototype.clear=function(){this.__data__={hash:new xa,map:na?new na:[],string:new xa}},Ca.prototype["delete"]=function(b){var d=this.__data__;return Qa(b)?(d="string"==typeof b?d.string:d.hash,($a?d[b]!==k:N.call(d,b))&&delete d[b]):na?d.map["delete"](b):
ab(d.map,b)},Ca.prototype.get=function(b){var d=this.__data__;return Qa(b)?(d="string"==typeof b?d.string:d.hash,$a?(b=d[b],b="__lodash_hash_undefined__"===b?k:b):b=N.call(d,b)?d[b]:k,b):na?d.map.get(b):ob(d.map,b)},Ca.prototype.has=function(b){var d=this.__data__;return Qa(b)?(d="string"==typeof b?d.string:d.hash,b=$a?d[b]!==k:N.call(d,b)):b=na?d.map.has(b):-1<db(d.map,b),b},Ca.prototype.set=function(b,d){var a=this.__data__;return Qa(b)?("string"==typeof b?a.string:a.hash)[b]=$a&&d===k?"__lodash_hash_undefined__":
d:na?a.map.set(b,d):Oc(a.map,b,d),this},oa.prototype.push=function(b){var d=this.__data__;Qa(b)?(d=d.__data__,("string"==typeof b?d.string:d.hash)[b]="__lodash_hash_undefined__"):d.set(b,"__lodash_hash_undefined__")},qa.prototype.clear=function(){this.__data__={array:[],map:null}},qa.prototype["delete"]=function(b){var d=this.__data__,a=d.array;return a?ab(a,b):d.map["delete"](b)},qa.prototype.get=function(b){var d=this.__data__,a=d.array;return a?ob(a,b):d.map.get(b)},qa.prototype.has=function(b){var d=
this.__data__,a=d.array;return a?-1<db(a,b):d.map.has(b)},qa.prototype.set=function(b,d){var a=this.__data__,c=a.array;return c&&(199>c.length?Oc(c,b,d):(a.array=null,a.map=new Ca(c))),(a=a.map)&&a.set(b,d),this},uc.Cache=Ca,g.after=function(b,d){if("function"!=typeof d)throw new ba("Expected a function");return b=E(b),function(){return 1>--b?d.apply(this,arguments):void 0}},g.ary=Sd,g.assign=Zf,g.assignIn=oe,g.assignInWith=nb,g.assignWith=$f,g.at=ag,g.before=Td,g.bind=Fc,g.bindAll=qg,g.bindKey=me,
g.castArray=function(){if(!arguments.length)return[];var b=arguments[0];return B(b)?b:[b]},g.chain=Nd,g.chunk=function(b,d){d=Q(E(d),0);var a=b?b.length:0;if(!a||1>d)return[];for(var c=0,e=-1,g=Array(Fb(a/d));a>c;)g[++e]=ua(b,c,c+=d);return g},g.compact=function(b){for(var d=-1,a=b?b.length:0,c=-1,e=[];++d<a;){var g=b[d];g&&(e[++c]=g)}return e},g.concat=wf,g.cond=function(b){var d=b?b.length:0,a=z();return b=d?m(b,function(b){if("function"!=typeof b[1])throw new ba("Expected a function");return[a(b[0]),
b[1]]}):[],x(function(a){for(var c=-1;++c<d;){var e=b[c];if(f(e[0],this,a))return f(e[1],this,a)}})},g.conforms=function(b){return Pb(ia(b,!0))},g.constant=Ac,g.countBy=Pf,g.create=function(b,d){var a=Ta(b);return d?Qc(a,d):a},g.curry=Ud,g.curryRight=Vd,g.debounce=Wd,g.defaults=bg,g.defaultsDeep=cg,g.defer=Vf,g.delay=Wf,g.difference=xf,g.differenceBy=yf,g.differenceWith=zf,g.drop=Id,g.dropRight=Jd,g.dropRightWhile=function(b,d){return b&&b.length?zb(b,z(d,3),!0,!0):[]},g.dropWhile=function(b,d){return b&&
b.length?zb(b,z(d,3),!0):[]},g.fill=function(b,d,a,c){var e=b?b.length:0;if(!e)return[];a&&"number"!=typeof a&&la(b,d,a)&&(a=0,c=e);e=b.length;a=E(a);0>a&&(a=-a>e?0:e+a);c=c===k||c>e?e:E(c);0>c&&(c+=e);for(c=a>c?0:ce(c);c>a;)b[a++]=d;return b},g.filter=function(b,d){return(B(b)?p:Vc)(b,z(d,3))},g.flatMap=function(b,d){return K(Qd(b,d),1)},g.flatten=function(b){return b&&b.length?K(b,1):[]},g.flattenDeep=function(b){return b&&b.length?K(b,Jb):[]},g.flattenDepth=function(b,d){return b&&b.length?(d=
d===k?1:E(d),K(b,d)):[]},g.flip=function(b){return va(b,512)},g.flow=rg,g.flowRight=sg,g.fromPairs=function(b){for(var d=-1,a=b?b.length:0,c={};++d<a;){var e=b[d];c[e[0]]=e[1]}return c},g.functions=function(b){return null==b?[]:ub(b,T(b))},g.functionsIn=function(b){return null==b?[]:ub(b,ca(b))},g.groupBy=Qf,g.initial=function(b){return Jd(b,1)},g.intersection=Af,g.intersectionBy=Bf,g.intersectionWith=Cf,g.invert=dg,g.invertBy=eg,g.invokeMap=Rf,g.iteratee=oc,g.keyBy=Sf,g.keys=T,g.keysIn=ca,g.map=
Qd,g.mapKeys=function(b,d){var a={};return d=z(d,3),ka(b,function(b,c,e){a[d(b,c,e)]=b}),a},g.mapValues=function(b,d){var a={};return d=z(d,3),ka(b,function(b,c,e){a[c]=d(b,c,e)}),a},g.matches=function(b){return Zc(ia(b,!0))},g.matchesProperty=function(b,d){return Yc(b,ia(d,!0))},g.memoize=uc,g.merge=gg,g.mergeWith=pe,g.method=tg,g.methodOf=ug,g.mixin=Bc,g.negate=function(b){if("function"!=typeof b)throw new ba("Expected a function");return function(){return!b.apply(this,arguments)}},g.nthArg=function(b){return b=
E(b),function(){return arguments[b]}},g.omit=hg,g.omitBy=function(b,d){return d=z(d),gd(b,function(b,a){return!d(b,a)})},g.once=function(b){return Td(2,b)},g.orderBy=function(b,d,a,c){return null==b?[]:(B(d)||(d=null==d?[]:[d]),a=c?k:a,B(a)||(a=null==a?[]:[a]),ed(b,d,a))},g.over=vg,g.overArgs=Xf,g.overEvery=wg,g.overSome=xg,g.partial=Gc,g.partialRight=ne,g.partition=Tf,g.pick=ig,g.pickBy=function(b,d){return null==b?{}:gd(b,z(d))},g.property=$c,g.propertyOf=function(b){return function(d){return null==
b?k:Yb(b,d)}},g.pull=Df,g.pullAll=Ld,g.pullAllBy=function(b,d,a){return b&&b.length&&d&&d.length?hd(b,d,z(a)):b},g.pullAt=Ef,g.range=yg,g.rangeRight=zg,g.rearg=Yf,g.reject=function(b,d){var a=B(b)?p:Vc;return d=z(d,3),a(b,function(b,a,c){return!d(b,a,c)})},g.remove=function(b,d){var a=[];if(!b||!b.length)return a;var c=-1,e=[],g=b.length;for(d=z(d,3);++c<g;){var f=b[c];d(f,c,b)&&(a.push(f),e.push(c))}return id(b,e),a},g.rest=x,g.reverse=qc,g.sampleSize=Rd,g.set=function(b,d,a){return null==b?b:fc(b,
d,a)},g.setWith=function(b,d,a,c){return c="function"==typeof c?c:k,null==b?b:fc(b,d,a,c)},g.shuffle=function(b){return Rd(b,4294967295)},g.slice=function(b,d,a){var c=b?b.length:0;return c?(a&&"number"!=typeof a&&la(b,d,a)?(d=0,a=c):(d=null==d?0:E(d),a=a===k?c:E(a)),ua(b,d,a)):[]},g.sortBy=Uf,g.sortedUniq=function(b){return b&&b.length?kd(b):[]},g.sortedUniqBy=function(b,d){return b&&b.length?kd(b,z(d)):[]},g.split=function(b,d,a){return F(b).split(d,a)},g.spread=function(b,d){if("function"!=typeof b)throw new ba("Expected a function");
return d=d===k?0:Q(E(d),0),x(function(a){var c=a[d];return a=a.slice(0,d),c&&r(a,c),f(b,this,a)})},g.tail=function(b){return Id(b,1)},g.take=function(b,d,a){return b&&b.length?(d=a||d===k?1:E(d),ua(b,0,0>d?0:d)):[]},g.takeRight=function(b,d,a){var c=b?b.length:0;return c?(d=a||d===k?1:E(d),d=c-d,ua(b,0>d?0:d,c)):[]},g.takeRightWhile=function(b,d){return b&&b.length?zb(b,z(d,3),!1,!0):[]},g.takeWhile=function(b,d){return b&&b.length?zb(b,z(d,3)):[]},g.tap=function(b,d){return d(b),b},g.throttle=function(b,
d,a){var c=!0,e=!0;if("function"!=typeof b)throw new ba("Expected a function");return M(a)&&(c="leading"in a?!!a.leading:c,e="trailing"in a?!!a.trailing:e),Wd(b,d,{leading:c,maxWait:d,trailing:e})},g.thru=Hb,g.toArray=tc,g.toPairs=Cd,g.toPairsIn=function(b){return Y(b,ca(b))},g.toPath=function(b){return B(b)?m(b,String):Rc(b)},g.toPlainObject=dd,g.transform=function(b,d,a){var c=B(b)||Ua(b);if(d=z(d,4),null==a)if(c||M(b)){var g=b.constructor;a=c?B(b)?new g:[]:da(g)?Ta(vb(b)):{}}else a={};return(c?
e:ka)(b,function(b,c,e){return d(a,b,c,e)}),a},g.unary=function(b){return Sd(b,1)},g.union=Ff,g.unionBy=Gf,g.unionWith=Hf,g.uniq=function(b){return b&&b.length?Ka(b):[]},g.uniqBy=function(b,a){return b&&b.length?Ka(b,z(a)):[]},g.uniqWith=function(b,a){return b&&b.length?Ka(b,k,a):[]},g.unset=function(b,a){var c;if(null==b)c=!0;else{c=b;var e=a,e=ta(e,c)?[e+""]:Ga(e);c=hb(c,e);e=V(e);c=null!=c&&de(c,e)?delete c[e]:!0}return c},g.unzip=rc,g.unzipWith=Md,g.values=Ib,g.valuesIn=function(b){return null==
b?[]:za(b,ca(b))},g.without=If,g.words=td,g.wrap=function(b,a){return a=null==a?ha:a,Gc(a,b)},g.xor=Jf,g.xorBy=Kf,g.xorWith=Lf,g.zip=Mf,g.zipObject=function(b,a){return md(b||[],a||[],sb)},g.zipObjectDeep=function(b,a){return md(b||[],a||[],fc)},g.zipWith=Nf,g.extend=oe,g.extendWith=nb,Bc(g,g),g.add=function(b,a){var c;return b===k&&a===k?0:(b!==k&&(c=b),a!==k&&(c=c===k?a:c+a),c)},g.attempt=qe,g.camelCase=jg,g.capitalize=zc,g.ceil=Ag,g.clamp=function(b,a,c){return c===k&&(c=a,a=k),c!==k&&(c=R(c),
c=c===c?c:0),a!==k&&(a=R(a),a=a===a?a:0),Sa(R(b),a,c)},g.clone=function(b){return ia(b)},g.cloneDeep=function(b){return ia(b,!0)},g.cloneDeepWith=function(b,a){return ia(b,!0,a)},g.cloneWith=function(b,a){return ia(b,!1,a)},g.deburr=ud,g.endsWith=function(b,a,c){b=F(b);a="string"==typeof a?a:a+"";var e=b.length;return c=c===k?e:Sa(E(c),0,e),c-=a.length,0<=c&&b.indexOf(a,c)==c},g.eq=ra,g.escape=function(b){return(b=F(b))&&Dg.test(b)?b.replace(re,ue):b},g.escapeRegExp=function(b){return(b=F(b))&&Eg.test(b)?
b.replace(Ec,"\\$&"):b},g.every=function(b,a,c){var e=B(b)?t:Qb;return c&&la(b,a,c)&&(a=k),e(b,z(a,3))},g.find=function(b,a){if(a=z(a,3),B(b)){var c=y(b,a);return-1<c?b[c]:k}return u(b,a,sa)},g.findIndex=function(b,a){return b&&b.length?y(b,z(a,3)):-1},g.findKey=function(b,a){return u(b,z(a,3),ka,!0)},g.findLast=function(b,a){if(a=z(a,3),B(b)){var c=y(b,a,!0);return-1<c?b[c]:k}return u(b,a,sc)},g.findLastIndex=function(b,a){return b&&b.length?y(b,z(a,3),!0):-1},g.findLastKey=function(b,a){return u(b,
z(a,3),Xb,!0)},g.floor=Bg,g.forEach=Od,g.forEachRight=Pd,g.forIn=function(b,a){return null==b?b:Wb(b,Fa(a),ca)},g.forInRight=function(b,a){return null==b?b:Wc(b,Fa(a),ca)},g.forOwn=function(b,a){return b&&ka(b,Fa(a))},g.forOwnRight=function(b,a){return b&&Xb(b,Fa(a))},g.get=fb,g.gt=vc,g.gte=function(b,a){return b>=a},g.has=de,g.hasIn=cd,g.head=Kd,g.identity=ha,g.includes=function(b,a,c,e){return b=ea(b)?b:Ib(b),c=c&&!e?E(c):0,e=b.length,0>c&&(c=Q(e+c,0)),La(b)?e>=c&&-1<b.indexOf(a,c):!!e&&-1<q(b,
a,c)},g.indexOf=function(b,a,c){var e=b?b.length:0;return e?(c=E(c),0>c&&(c=Q(e+c,0)),q(b,a,c)):-1},g.inRange=function(b,a,c){return a=R(a)||0,c===k?(c=a,a=0):c=R(c)||0,b=R(b),b>=fa(a,c)&&b<Q(a,c)},g.invoke=fg,g.isArguments=Ia,g.isArray=B,g.isArrayBuffer=function(b){return O(b)&&"[object ArrayBuffer]"==W.call(b)},g.isArrayLike=ea,g.isArrayLikeObject=P,g.isBoolean=function(b){return!0===b||!1===b||O(b)&&"[object Boolean]"==W.call(b)},g.isBuffer=Sc,g.isDate=function(b){return O(b)&&"[object Date]"==
W.call(b)},g.isElement=function(b){return!!b&&1===b.nodeType&&O(b)&&!cc(b)},g.isEmpty=function(b){if(ea(b)&&(B(b)||La(b)||da(b.splice)||Ia(b)))return!b.length;for(var a in b)if(N.call(b,a))return!1;return!0},g.isEqual=function(b,a){return Ja(b,a)},g.isEqualWith=function(b,a,c){var e=(c="function"==typeof c?c:k)?c(b,a):k;return e===k?Ja(b,a,c):!!e},g.isError=wc,g.isFinite=function(b){return"number"==typeof b&&of(b)},g.isFunction=da,g.isInteger=Yd,g.isLength=kb,g.isMap=function(b){return O(b)&&"[object Map]"==
ja(b)},g.isMatch=function(b,a){return b===a||ac(b,a,bc(a))},g.isMatchWith=function(b,a,c){return c="function"==typeof c?c:k,ac(b,a,bc(a),c)},g.isNaN=function(b){return $d(b)&&b!=+b},g.isNative=Dd,g.isNil=function(b){return null==b},g.isNull=function(b){return null===b},g.isNumber=$d,g.isObject=M,g.isObjectLike=O,g.isPlainObject=cc,g.isRegExp=ae,g.isSafeInteger=function(b){return Yd(b)&&-9007199254740991<=b&&9007199254740991>=b},g.isSet=function(b){return O(b)&&"[object Set]"==ja(b)},g.isString=La,
g.isSymbol=be,g.isTypedArray=Ua,g.isUndefined=function(b){return b===k},g.isWeakMap=function(b){return O(b)&&"[object WeakMap]"==ja(b)},g.isWeakSet=function(b){return O(b)&&"[object WeakSet]"==W.call(b)},g.join=function(b,a){return b?pf.call(b,a):""},g.kebabCase=kg,g.last=V,g.lastIndexOf=function(b,a,c){var e=b?b.length:0;if(!e)return-1;var g=e;if(c!==k&&(g=E(c),g=(0>g?Q(e+g,0):fa(g,e-1))+1),a!==a)return Kc(b,g,!0);for(;g--;)if(b[g]===a)return g;return-1},g.lowerCase=lg,g.lowerFirst=mg,g.lt=xc,g.lte=
function(b,a){return a>=b},g.max=function(b){return b&&b.length?A(b,ha,vc):k},g.maxBy=function(b,a){return b&&b.length?A(b,z(a),vc):k},g.mean=function(b){return fe(b)/(b?b.length:0)},g.min=function(b){return b&&b.length?A(b,ha,xc):k},g.minBy=function(b,a){return b&&b.length?A(b,z(a),xc):k},g.noConflict=function(){return ma._===this&&(ma._=mf),this},g.noop=Cc,g.now=mb,g.pad=function(b,a,c){b=F(b);a=E(a);var e=cb(b);return a&&a>e?(e=(a-e)/2,a=xb(e),e=Fb(e),Eb("",a,c)+b+Eb("",e,c)):b},g.padEnd=function(b,
a,c){return b=F(b),b+Eb(b,a,c)},g.padStart=function(b,a,c){return b=F(b),Eb(b,a,c)+b},g.parseInt=function(b,a,c){return c||null==a?a=0:a&&(a=+a),b=F(b).replace(yc,""),qf(b,a||(Fg.test(b)?16:10))},g.random=function(b,a,c){if(c&&"boolean"!=typeof c&&la(b,a,c)&&(a=c=k),c===k&&("boolean"==typeof a?(c=a,a=k):"boolean"==typeof b&&(c=b,b=k)),b===k&&a===k?(b=0,a=1):(b=R(b)||0,a===k?(a=b,b=0):a=R(a)||0),b>a){var e=b;b=a;a=e}return c||b%1||a%1?(c=jd(),fa(b+c*(a-b+Gg("1e-"+((c+"").length-1))),a)):ec(b,a)},g.reduce=
function(b,a,c){var e=B(b)?w:C,g=3>arguments.length;return e(b,z(a,4),c,g,sa)},g.reduceRight=function(b,a,c){var e=B(b)?J:C,g=3>arguments.length;return e(b,z(a,4),c,g,sc)},g.repeat=yd,g.replace=function(){var b=arguments,a=F(b[0]);return 3>b.length?a:a.replace(b[1],b[2])},g.result=function(b,a,c){if(ta(a,b))e=null==b?k:b[a];else{a=Ga(a);var e=fb(b,a);b=hb(b,a)}return e===k&&(e=c),da(e)?e.call(b):e},g.round=Cg,g.runInContext=Mc,g.sample=function(b){b=ea(b)?b:Ib(b);var a=b.length;return 0<a?b[ec(0,
a-1)]:k},g.size=function(b){if(null==b)return 0;if(ea(b)){var a=b.length;return a&&La(b)?cb(b):a}return T(b).length},g.snakeCase=ng,g.some=function(b,a,c){var e=B(b)?G:He;return c&&la(b,a,c)&&(a=k),e(b,z(a,3))},g.sortedIndex=function(b,a){return yb(b,a)},g.sortedIndexBy=function(b,a,c){return gc(b,a,z(c))},g.sortedIndexOf=function(b,a){var c=b?b.length:0;if(c){var e=yb(b,a);if(c>e&&ra(b[e],a))return e}return-1},g.sortedLastIndex=function(b,a){return yb(b,a,!0)},g.sortedLastIndexBy=function(b,a,c){return gc(b,
a,z(c),!0)},g.sortedLastIndexOf=function(b,a){if(b&&b.length){var c=yb(b,a,!0)-1;if(ra(b[c],a))return c}return-1},g.startCase=og,g.startsWith=function(b,a,c){return b=F(b),c=Sa(E(c),0,b.length),b.lastIndexOf(a,c)==c},g.subtract=function(b,a){var c;return b===k&&a===k?0:(b!==k&&(c=b),a!==k&&(c=c===k?a:c-a),c)},g.sum=fe,g.sumBy=function(b,a){return b&&b.length?ya(b,z(a)):0},g.template=function(b,a,c){var e=g.templateSettings;c&&la(b,a,c)&&(a=k);b=F(b);a=nb({},a,e,Tb);c=nb({},a.imports,e.imports,Tb);
var f,h,l=T(c),m=za(c,l),q=0;c=a.interpolate||Mb;var p="__p+='";c=Dc((a.escape||Mb).source+"|"+c.source+"|"+(c===le?Hg:Mb).source+"|"+(a.evaluate||Mb).source+"|$","g");var r="sourceURL"in a?"//# sourceURL="+a.sourceURL+"\n":"";if(b.replace(c,function(a,d,c,e,g,l){return c||(c=e),p+=b.slice(q,l).replace(Ig,ve),d&&(f=!0,p+="'+__e("+d+")+'"),g&&(h=!0,p+="';"+g+";\n__p+='"),c&&(p+="'+((__t=("+c+"))==null?'':__t)+'"),q=l+a.length,a}),p+="';",(a=a.variable)||(p="with(obj){"+p+"}"),p=(h?p.replace(Jg,""):
p).replace(Kg,"$1").replace(Lg,"$1;"),p="function("+(a||"obj")+"){"+(a?"":"obj||(obj={});")+"var __t,__p=''"+(f?",__e=_.escape":"")+(h?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+p+"return __p}",a=qe(function(){return Function(l,r+"return "+p).apply(k,m)}),a.source=p,wc(a))throw a;return a},g.times=function(b,a){if(b=E(b),1>b||9007199254740991<b)return[];var c=4294967295,e=fa(b,4294967295);a=Fa(a);b-=4294967295;for(e=Oa(e,a);++c<b;)a(c);return e},g.toInteger=E,g.toLength=
ce,g.toLower=function(b){return F(b).toLowerCase()},g.toNumber=R,g.toSafeInteger=function(b){return Sa(E(b),-9007199254740991,9007199254740991)},g.toString=F,g.toUpper=function(b){return F(b).toUpperCase()},g.trim=function(b,a,c){return(b=F(b))?c||a===k?b.replace(yc,""):(a+="")?(b=b.match(aa),a=a.match(aa),b.slice(ga(b,a),Ic(b,a)+1).join("")):b:b},g.trimEnd=function(b,a,c){return(b=F(b))?c||a===k?b.replace(Mg,""):(a+="")?(b=b.match(aa),b.slice(0,Ic(b,a.match(aa))+1).join("")):b:b},g.trimStart=function(b,
a,c){return(b=F(b))?c||a===k?b.replace(Ng,""):(a+="")?(b=b.match(aa),b.slice(ga(b,a.match(aa))).join("")):b:b},g.truncate=function(b,a){var c=30,e="...";if(M(a))var g="separator"in a?a.separator:g,c="length"in a?E(a.length):c,e="omission"in a?F(a.omission):e;b=F(b);var f=b.length;if(qb.test(b))var h=b.match(aa),f=h.length;if(c>=f)return b;if(f=c-cb(e),1>f)return e;if(c=h?h.slice(0,f).join(""):b.slice(0,f),g===k)return c+e;if(h&&(f+=c.length-f),ae(g)){if(b.slice(f).search(g)){var l=c;g.global||(g=
Dc(g.source,F(Fd.exec(g))+"g"));for(g.lastIndex=0;h=g.exec(l);)var m=h.index;c=c.slice(0,m===k?f:m)}}else b.indexOf(g,f)!=f&&(g=c.lastIndexOf(g),-1<g&&(c=c.slice(0,g)));return c+e},g.unescape=function(b){return(b=F(b))&&Og.test(b)?b.replace(se,we):b},g.uniqueId=function(b){var a=++lf;return F(b)+a},g.upperCase=pg,g.upperFirst=ee,g.each=Od,g.eachRight=Pd,g.first=Kd,Bc(g,function(){var b={};return ka(g,function(a,c){N.call(g.prototype,c)||(b[c]=a)}),b}(),{chain:!1}),g.VERSION="4.5.1",e("bind bindKey curry curryRight partial partialRight".split(" "),
function(b){g[b].placeholder=g}),e(["drop","take"],function(b,a){D.prototype[b]=function(c){var e=this.__filtered__;if(e&&!a)return new D(this);c=c===k?1:Q(E(c),0);var g=this.clone();return e?g.__takeCount__=fa(c,g.__takeCount__):g.__views__.push({size:fa(c,4294967295),type:b+(0>g.__dir__?"Right":"")}),g};D.prototype[b+"Right"]=function(a){return this.reverse()[b](a).reverse()}}),e(["filter","map","takeWhile"],function(b,a){var c=a+1,e=1==c||3==c;D.prototype[b]=function(b){var a=this.clone();return a.__iteratees__.push({iteratee:z(b,
3),type:c}),a.__filtered__=a.__filtered__||e,a}}),e(["head","last"],function(b,a){var c="take"+(a?"Right":"");D.prototype[b]=function(){return this[c](1).value()[0]}}),e(["initial","tail"],function(b,a){var c="drop"+(a?"":"Right");D.prototype[b]=function(){return this.__filtered__?new D(this):this[c](1)}}),D.prototype.compact=function(){return this.filter(ha)},D.prototype.find=function(b){return this.filter(b).head()},D.prototype.findLast=function(b){return this.reverse().find(b)},D.prototype.invokeMap=
x(function(b,a){return"function"==typeof b?new D(this):this.map(function(c){return gb(c,b,a)})}),D.prototype.reject=function(b){return b=z(b,3),this.filter(function(a){return!b(a)})},D.prototype.slice=function(b,a){b=E(b);var c=this;return c.__filtered__&&(0<b||0>a)?new D(c):(0>b?c=c.takeRight(-b):b&&(c=c.drop(b)),a!==k&&(a=E(a),c=0>a?c.dropRight(-a):c.take(a-b)),c)},D.prototype.takeRightWhile=function(b){return this.reverse().takeWhile(b).reverse()},D.prototype.toArray=function(){return this.take(4294967295)},
ka(D.prototype,function(b,a){var c=/^(?:filter|find|map|reject)|While$/.test(a),e=/^(?:head|last)$/.test(a),f=g[e?"take"+("last"==a?"Right":""):a],h=e||/^find/.test(a);f&&(g.prototype[a]=function(){var a=this.__wrapped__,d=e?[1]:arguments,l=a instanceof D,m=d[0],q=l||B(a),p=function(b){return b=f.apply(g,r([b],d)),e&&t?b[0]:b};q&&c&&"function"==typeof m&&1!=m.length&&(l=q=!1);var t=this.__chain__,u=!!this.__actions__.length,m=h&&!t,l=l&&!u;return!h&&q?(a=l?a:new D(this),a=b.apply(a,d),a.__actions__.push({func:Hb,
args:[p],thisArg:k}),new Z(a,t)):m&&l?b.apply(this,d):(a=this.thru(p),m?e?a.value()[0]:a.value():a)})}),e("pop push shift sort splice unshift".split(" "),function(b){var a=Kb[b],c=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",e=/^(?:pop|shift)$/.test(b);g.prototype[b]=function(){var b=arguments;return e&&!this.__chain__?a.apply(this.value(),b):this[c](function(c){return a.apply(c,b)})}}),ka(D.prototype,function(b,a){var c=g[a];if(c){var e=c.name+"";(jb[e]||(jb[e]=[])).push({name:a,func:c})}}),jb[Cb(k,
2).name]=[{name:"wrapper",func:k}],D.prototype.clone=function(){var b=new D(this.__wrapped__);return b.__actions__=U(this.__actions__),b.__dir__=this.__dir__,b.__filtered__=this.__filtered__,b.__iteratees__=U(this.__iteratees__),b.__takeCount__=this.__takeCount__,b.__views__=U(this.__views__),b},D.prototype.reverse=function(){if(this.__filtered__){var b=new D(this);b.__dir__=-1;b.__filtered__=!0}else b=this.clone(),b.__dir__*=-1;return b},D.prototype.value=function(){var b,a=this.__wrapped__.value(),
c=this.__dir__,e=B(a),g=0>c,f=e?a.length:0;b=0;for(var h=f,l=this.__views__,m=-1,k=l.length;++m<k;){var q=l[m],p=q.size;switch(q.type){case "drop":b+=p;break;case "dropRight":h-=p;break;case "take":h=fa(h,b+p);break;case "takeRight":b=Q(b,h-p)}}if(b={start:b,end:h},h=b.start,l=b.end,b=l-h,g=g?l:h-1,h=this.__iteratees__,l=h.length,m=0,k=fa(b,this.__takeCount__),!e||200>f||f==b&&k==b)return ld(a,this.__actions__);e=[];a:for(;b--&&k>m;){g+=c;f=-1;for(q=a[g];++f<l;){var r=h[f],p=r.type,r=(0,r.iteratee)(q);
if(2==p)q=r;else if(!r){if(1==p)continue a;break a}}e[m++]=q}return e},g.prototype.at=Of,g.prototype.chain=function(){return Nd(this)},g.prototype.commit=function(){return new Z(this.value(),this.__chain__)},g.prototype.flatMap=function(b){return this.map(b).flatten()},g.prototype.next=function(){this.__values__===k&&(this.__values__=tc(this.value()));var b=this.__index__>=this.__values__.length,a=b?k:this.__values__[this.__index__++];return{done:b,value:a}},g.prototype.plant=function(b){for(var a,
c=this;c instanceof X;){var e=Nc(c);e.__index__=0;e.__values__=k;a?g.__wrapped__=e:a=e;var g=e,c=c.__wrapped__}return g.__wrapped__=b,a},g.prototype.reverse=function(){var b=this.__wrapped__;return b instanceof D?(this.__actions__.length&&(b=new D(this)),b=b.reverse(),b.__actions__.push({func:Hb,args:[qc],thisArg:k}),new Z(b,this.__chain__)):this.thru(qc)},g.prototype.toJSON=g.prototype.valueOf=g.prototype.value=function(){return ld(this.__wrapped__,this.__actions__)},Ma&&(g.prototype[Ma]=Se),g}var k,
Jb=1/0,$e=NaN,Jg=/\b__p\+='';/g,Kg=/\b(__p\+=)''\+/g,Lg=/(__e\(.*?\)|\b__t\))\+'';/g,se=/&(?:amp|lt|gt|quot|#39|#96);/g,re=/[&<>"'`]/g,Og=RegExp(se.source),Dg=RegExp(re.source),uf=/<%-([\s\S]+?)%>/g,vf=/<%([\s\S]+?)%>/g,le=/<%=([\s\S]+?)%>/g,Oe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ne=/^\w*$/,Pe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,Ec=/[\\^$.*+?()[\]{}|]/g,Eg=RegExp(Ec.source),yc=/^\s+|\s+$/g,Ng=/^\s+/,Mg=/\s+$/,Qe=/\\(\\)?/g,Hg=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,
Fd=/\w*$/,Fg=/^0x/i,Ze=/^[-+]0x[0-9a-f]+$/i,We=/^0b[01]+$/i,Ue=/^\[object .+?Constructor\]$/,Xe=/^0o[0-7]+$/i,Rb=/^(?:0|[1-9]\d*)$/,cf=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Mb=/($^)/,Ig=/['\n\r\u2028\u2029\\]/g,df=/[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]/g,aa=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]?|[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g,
qb=/[\u200d\ud800-\udfff\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0\ufe0e\ufe0f]/,gf=/[a-zA-Z0-9]+/g,ff=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+|[A-Z\xc0-\xd6\xd8-\xde]+|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g,
ef=/[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,hf="Array Buffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Reflect RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),I={};I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=
I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0;I["[object Arguments]"]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object Boolean]"]=I["[object Date]"]=I["[object Error]"]=I["[object Function]"]=I["[object Map]"]=I["[object Number]"]=I["[object Object]"]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object WeakMap]"]=!1;var H={};H["[object Arguments]"]=H["[object Array]"]=H["[object ArrayBuffer]"]=H["[object Boolean]"]=H["[object Date]"]=H["[object Float32Array]"]=
H["[object Float64Array]"]=H["[object Int8Array]"]=H["[object Int16Array]"]=H["[object Int32Array]"]=H["[object Map]"]=H["[object Number]"]=H["[object Object]"]=H["[object RegExp]"]=H["[object Set]"]=H["[object String]"]=H["[object Symbol]"]=H["[object Uint8Array]"]=H["[object Uint8ClampedArray]"]=H["[object Uint16Array]"]=H["[object Uint32Array]"]=!0;H["[object Error]"]=H["[object Function]"]=H["[object WeakMap]"]=!1;var Ob={"\u00c0":"A","\u00c1":"A","\u00c2":"A","\u00c3":"A","\u00c4":"A","\u00c5":"A",
"\u00e0":"a","\u00e1":"a","\u00e2":"a","\u00e3":"a","\u00e4":"a","\u00e5":"a","\u00c7":"C","\u00e7":"c","\u00d0":"D","\u00f0":"d","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u00cb":"E","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u00eb":"e","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u00cf":"I","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u00ef":"i","\u00d1":"N","\u00f1":"n","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u00d5":"O","\u00d6":"O","\u00d8":"O","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u00f5":"o","\u00f6":"o",
"\u00f8":"o","\u00d9":"U","\u00da":"U","\u00db":"U","\u00dc":"U","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u00fc":"u","\u00dd":"Y","\u00fd":"y","\u00ff":"y","\u00c6":"Ae","\u00e6":"ae","\u00de":"Th","\u00fe":"th","\u00df":"ss"},Pb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Sb={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},X={"function":!0,object:!0},Qb={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Gg=parseFloat,Ye=parseInt,
xa=X[typeof exports]&&exports&&!exports.nodeType?exports:k,oa=X[typeof module]&&module&&!module.nodeType?module:k,ge=oa&&oa.exports===xa?xa:k,Hc=pa(xa&&oa&&"object"==typeof global&&global),ob=pa(X[typeof self]&&self),ab=pa(X[typeof window]&&window),X=pa(X[typeof this]&&this),ma=Hc||ab!==(X&&X.window)&&ab||ob||X||Function("return this")(),Ea=Mc();(ab||ob||{})._=Ea;"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("third_party/lo-dash/lo-dash.min",[],function(){return Ea}):xa&&
oa?(ge&&((oa.exports=Ea)._=Ea),xa._=Ea):ma._=Ea}).call(this);
define("qowtRoot/errors/localisedError",["qowtRoot/utils/typeUtils","qowtRoot/utils/i18n","third_party/lo-dash/lo-dash.min"],function(h,c){var f=function(a){a=a||"";this.name="LocalisedError";h.isObject(a)&&_.extend(this,a);this.message=(this.code?this.code+": ":"")+(this.message||JSON.stringify(a)||this.title||this.details||this.additionalInfo);this.title=c.getMessage(this.title);this.details=a.fileName?c.getMessage(this.details,a.fileName):c.getMessage(this.details);this.linkData&&this.linkData.msg&&
(this.linkData.msg=c.getMessage(this.linkData.msg)||this.linkData.msg);Error.captureStackTrace(this,f)};f.prototype=Object.create(Error.prototype);return f.prototype.constructor=f});define("qowtRoot/errors/qowtException",["qowtRoot/errors/localisedError"],function(h){var c=function(){h.apply(this,arguments);this.name="QOWTException";Error.captureStackTrace(this,c);this.fatal=!0};c.prototype=Object.create(h.prototype);c.prototype.constructor=c;return window.QOWTException=c});
define("background/store/fileDetails",["qowtRoot/utils/typeUtils","qowtRoot/errors/qowtException"],function(h,c){var f=function(a){this.mimeType=a.mimeType||a.mimeType_;this.streamURL=a.streamURL||a.streamURL_;this.originalURL=a.originalURL||a.originalURL_;this.preferredFilename=a.preferredFilename||a.preferredFilename_;this.driveDocId=a.driveDocId||a.driveDocId_;this.userFile=a.userFile||a.userFile_;this.tabId=a.tabId||a.tabId_;this.privateFilePath=a.privateFilePath||a.privateFilePath_;this.downloadFilePath=
a.downloadFilePath||a.downloadFilePath_;this.timestamp=a.timestamp||a.timestamp_;this.observerFunc_=void 0;Object.seal(this)};f.prototype=Object.create(Object.prototype,{tabId:{set:function(a){this.tabId_=a;this.invokeObserver_()},get:function(){return this.tabId_}},privateFilePath:{set:function(a){this.privateFilePath_=a;this.invokeObserver_()},get:function(){return this.privateFilePath_}},downloadFilePath:{set:function(a){this.downloadFilePath_=a;this.invokeObserver_()},get:function(){return this.downloadFilePath_}},
timestamp:{set:function(a){this.timestamp_=a;this.invokeObserver_()},get:function(){return this.timestamp_}},mimeType:{set:function(a){this.mimeType_=a;this.invokeObserver_()},get:function(){return this.mimeType_}},streamURL:{set:function(a){this.streamURL_=a;this.invokeObserver_()},get:function(){return this.streamURL_}},originalURL:{set:function(a){this.originalURL_=a;this.invokeObserver_()},get:function(){return this.originalURL_}},preferredFilename:{set:function(a){this.preferredFilename_=a;this.invokeObserver_()},
get:function(){return this.preferredFilename_}},userFile:{set:function(a){this.userFile_=a;this.invokeObserver_()},get:function(){return this.userFile_}},driveDocId:{set:function(a){this.driveDocId_=a;this.invokeObserver_()},get:function(){return this.driveDocId_}}});f.prototype.constructor=f;f.prototype.addObserver=function(a){if(!h.isFunction(a))throw new c("Non-function observer provided to FileDetails object");this.observerFunc_=a};f.prototype.hasExpired=function(){return!this.tabId&&(new Date).getTime()-
this.timestamp>a};f.prototype.toJSON=function(){var a=_.extend({},this);a.userFile_=void 0;return a};var a=7776E6;f.prototype.invokeObserver_=function(){this.observerFunc_&&this.observerFunc_()};return f});define("qowtRoot/utils/localStorageManager",["qowtRoot/errors/qowtException"],function(h){return{setItem:function(c,f){try{window.localStorage.setItem(c,f)}catch(a){throw new h({title:"storage_quota_exceed_error_short_msg",details:"storage_quota_exceed_error_msg",message:a.message});}},getItem:function(c){return window.localStorage.getItem(c)}}});
define("qowtRoot/utils/uuid",[],function(){return{generateUUID:function(){var h=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var f=(h+16*Math.random())%16|0;h=Math.floor(h/16);return("x"===c?f:f&7|8).toString(16)})}}});
define("background/store/fileStore",["background/store/fileDetails","qowtRoot/utils/localStorageManager","qowtRoot/utils/uuid"],function(h,c,f){var a={init:function(){try{e=(e=c.getItem("qo_file_store"))?JSON.parse(e):{}}catch(a){e={},console.warn("Failed to initialize file store so resetting it to be empty: "+a)}for(var f in e){var v=new h(e[f]);v.addObserver(t);e[f]=v}},addEntry:function(a){var c;a instanceof h&&(a.addObserver(t),c=f.generateUUID(),e[c]=a,t());return c},getEntry:function(a){return e[a]},
findTabId:function(a){var c=[];if(a)for(var f in e)e[f].tabId===a&&c.push(f);return 0<c.length?c:void 0},removeAllTabIds:function(){for(var a in e)e[a].tabId=void 0},deleteOrphans:function(a){for(var c=[],f=a.length,h=0;h<f;h++){var r=a[h];if(!r.isDirectory){var r=r.fullPath,w;w=void 0;if(r){var J=void 0;for(J in e)if(e[J].privateFilePath===r||e[J].downloadFilePath===r){w=J;break}}if(!e[w]||e[w].hasExpired())c.push(r),delete e[w]}}t();return c},window__:function(){return window}},e,t=function(){var f;
a.window__()&&(f=JSON.stringify(e),c.setItem("qo_file_store",f))};return a});
define("background/fileReaper",["background/store/fileStore","qowtRoot/utils/typeUtils","qowtRoot/third_party/when/when","qowtRoot/features/utils","third_party/lo-dash/lo-dash.min"],function(h,c,f,a){var e={init:function(){f(r()).then(w)},addLock:function(a){l.push(a)},removeLock:function(a){a=l.indexOf(a);-1!==a&&l.splice(a,1)}},t,p=!1,v=[],l=[],m=0,r=function(){var a;return function(){var c=f.defer();a?c.resolve(a):window.webkitRequestFileSystem(window.TEMPORARY,1048576,function(e){a=e;c.resolve(a)},
function(){c.reject(Error("File Reaper failed to access the file system"))});return c.promise}}(),w=function(){var a=_.throttle(J,3E4);chrome.tabs.onRemoved.addListener(function(c){e.removeLock(c);h.findTabId(c)&&a()})},J=function(){m||0<l.length||a.isEnabled("suppressFileReapear")||(h.removeAllTabIds(),p=!1,t=window.setTimeout(A,3E5),chrome.windows.getAll({populate:!0},function(a){for(var c=a.length,e=0;e<c;e++)a[e].tabs.forEach(function(a){m++;chrome.tabs.sendMessage(a.id,"reaperCheck",G.bind(this,
a.id))})}))},G=function(a,c){if(p)C(c)&&console.warn("Reaper received a belated Quickoffice tab response - this may result in its private temp file being incorrectly deleted");else{if(C(c)){var e=h.getEntry(c.uuid);e&&(e.tabId=a)}1===m?(window.clearTimeout(t),0<l.length?m=0:u()):m--}},A=function(){p=!0;0<l.length?m=0:u()},u=function(){f(r()).then(function(a){v=[];var c=a.root.createReader(),e=function(){c.readEntries(function(a){0<a.length?(a.forEach(function(a){v.push(a)}),e()):y(v)},y)};e()})},
y=function(a){0<l.length||!c.isList(a)||h.deleteOrphans(a).forEach(function(a){q(a)});m=0},q=function(a){a&&f(r()).then(function(c){c.root.getFile(a,{create:!1},function(c){c.remove(function(){console.log("File Reaper has deleted file "+a)})})})},C=function(a){return c.isObject(a)&&a.hasOwnProperty("uuid")};return e});
define("utils/logUtils",["qowtRoot/utils/typeUtils"],function(h){return{logError:function(c){c&&c.stack?h.isList(c.stack)?(console.error(c.message),c.stack.forEach(function(c){console.error(c.toString())})):console.error(c.stack):console.error(c)}}});define("qowtRoot/models/fileInfo",[],function(){return{}});
define("qowtRoot/pubsub/pubsub",["third_party/lo-dash/lo-dash.min"],function(){function h(a,e){var f=[],h=[],p=[],G=[];t[a]&&t[a].length&&(v++,t[a].forEach(function(a){a.config.after?h.push(a):f.push(a);a.config.once&&G.push(a)}),f.concat(h).forEach(function(c){p.push(c.callback(a,e))}),G.forEach(function(a){c(a.token)}));return Promise.all(p)}function c(a){var c;_.values(t).some(function(e){return e.some(function(f,h){return f.token===a?(c=e.splice(h,1)[0],!0):!1})});return c}function f(a){var c=
0;return c=a?t[a]?t[a].length:0:_.values(t).reduce(function(a,c){return a+c.length},0)}function a(){t={}}var e=Object.create(Object.prototype,{subscriberCount:{get:function(){return f()}},registeredSignals:{get:function(){return _.keys(t)}},publishCount:{get:function(){return v}}});e.subscribe=function(a,c,e){if(!_.isString(a)||!a)throw new TypeError("invalid signal");if(!_.isFunction(c))throw new TypeError("invalid callback");e=e||{};e.once=!!e.once;e.after=!!e.after;var f=(++p).toString();t[a]=
t[a]||[];t[a].push({token:f,callback:c,config:e});return f};e.publish=function(a,c){if(!_.isString(a)||!a)throw new TypeError("invalid signal");c=c||{};return h(a,c)};e.doAction=function(a,c){if(!_.isString(a)||!a)throw new TypeError("invalid action");c=c||{};c=_.isString(c)?{contentType:c}:c;return h("qowt:doAction",{action:a,context:c})};e.unsubscribe=function(a){if(void 0!==a){if(!_.isString(a)||!a)throw new TypeError("invalid token");return c(a)}};e.subscriberCountForSignal=function(a){if(!_.isString(a)||
!a)throw new TypeError("invalid signal");return f(a)};e.clear=a;e.reset=function(){a();v=p=0};var t={},p=0,v=0;return e});define("qowtRoot/models/env",[],function(){return{pointsPerEm:12,fontUnit:"pt"}});
define("qowtRoot/utils/domListener",["qowtRoot/models/env"],function(h){var c={},f=0,a=function(a,e,f,m,r){r=r||!1;e||(console.warn("invalid element supplied for addListener"),e=h.rootNode?h.rootNode:window.document);e.addEventListener(f,m,r);a&&(c[a]=c[a]||[],c[a].push({element:e,eventName:f,handlerFunction:m,useCapture:r}))},e=function(a,c,e,f){f=f||!1;a||(console.warn("invalid element supplied for removeListener"),a=h.rootNode?h.rootNode:window.document);a.removeEventListener(c,e,f)},t=function(a){if(a=
c[a])for(;0<a.length;){var f=a.pop();e(f.element,f.eventName,f.handlerFunction,f.useCapture)}};return{add:function(c,e,f,h,r){a(c,e,f,h,r)},removeGroup:function(a){t(a)},reset:function(){for(var a in c)t(a)},addListener:function(c,e,h,m){a("__DOMLISTENER"+f++,c,e,h,m)},removeListener:function(a,c,f,h){e(a,c,f,h)},dispatchEvent:function(a,c,e){a||(console.warn("invalid element supplied for dispatchEvent"),a=h.rootNode?h.rootNode:window.document);var f=document.createEvent("Event");f.initEvent(c,!0,
!1);f.detail=e;f.eventName=c;a.dispatchEvent(f)}}});
define("qowtRoot/customElements/ui/shareButton",["qowtRoot/models/fileInfo","qowtRoot/pubsub/pubsub","qowtRoot/utils/domListener","qowtRoot/utils/i18n"],function(h,c,f,a){var e=Object.create(HTMLElement.prototype);e.createdCallback=function(){this.classList.add("button");this.classList.add("primary");this.classList.add("blue");h.isMacroEnabledFile&&this.classList.add("disabled");this.innerText=a.getMessage("share_button");var c=document.createElement("span");this.insertBefore(c,this.firstChild);f.addListener(this,
"mouseover",this.onMouseOver_);f.addListener(this,"mouseout",this.onMouseOut_);this.classList.contains("disabled")?this.setAttribute("aria-label",a.getMessage("disabled_share_button")):(f.addListener(this,"click",this.onClick_,!1),f.addListener(this,"keydown",this.onKeyDownHandler_,!1),f.addListener(this,"focus",this.onFocus_.bind(this),!1),this.setAttribute("aria-label",a.getMessage("share_button")));this.setAttribute("tabIndex",0);this.setAttribute("role","button")};e.appendTo=function(a){a.appendChild(this)};
e.onClick_=function(){c.publish("qowt:doAction",{action:"share",context:{contentType:"common"}})};e.onMouseOver_=function(){var a={name:"share",dimensions:this.getBoundingClientRect()};this.classList.contains("disabled")?a.name="share_for_macroenabledfiles":a.name="share";document.getElementById("main-toolbar").$.tooltip.show(a)};e.onMouseOut_=function(){document.getElementById("main-toolbar").$.tooltip.hide()};e.onKeyDownHandler_=function(a){if(13===a.keyCode||32===a.keyCode)a.preventDefault(),a.stopPropagation(),
this.onClick_()};e.onFocus_=function(){var a=this.getAttribute("aria-label")+" "+this.getAttribute("role"),c=window.cvox;c&&c.Api.speak(a,0)};e.detach=function(){f.removeListener(this,"click",this.onClick_,!1);f.removeListener(this,"mouseover",this.onMouseOver_);f.removeListener(this,"mouseout",this.onMouseOut_);f.removeListener(this,"keydown",this.onKeyDownHandler_,!1);f.removeListener(this,"focus",this.onFocus_.bind(this),!1)};window.QOWTShareButton=document.registerElement("qowt-sharebutton",{prototype:e});
return{}});
define("qowtRoot/customElements/ui/presentButton",["qowtRoot/pubsub/pubsub","qowtRoot/utils/domListener","qowtRoot/utils/i18n"],function(h,c,f){var a=Object.create(HTMLElement.prototype);a.createdCallback=function(){this.classList.add("button");this.classList.add("basic");this.innerText=f.getMessage("present_button");var a=document.createElement("span");this.insertBefore(a,this.firstChild);c.addListener(this,"click",this.onClick_,!1);c.addListener(this,"mouseover",this.onMouseOver_);c.addListener(this,"mouseout",
this.onMouseOut_);c.addListener(this,"keydown",this.onKeyDownHandler_,!1);c.addListener(this,"focus",this.onFocus_.bind(this),!1);this.setAttribute("tabIndex",0);this.setAttribute("role","button");this.setAttribute("aria-label",f.getMessage("present_button"))};a.appendTo=function(a){a.appendChild(this)};a.onClick_=function(){h.publish("qowt:doAction",{action:"startSlideshow",context:{contentType:"presentation"}})};a.onMouseOver_=function(){var a={name:"presentation",dimensions:this.getBoundingClientRect()};
document.getElementById("main-toolbar").$.tooltip.show(a)};a.onMouseOut_=function(){document.getElementById("main-toolbar").$.tooltip.hide()};a.onKeyDownHandler_=function(a){if(13===a.keyCode||32===a.keyCode)a.preventDefault(),a.stopPropagation(),this.onClick_()};a.onFocus_=function(){var a=this.getAttribute("aria-label")+" "+this.getAttribute("role"),c=window.cvox;c&&c.Api.speak(a,0)};a.detach=function(){c.removeListener(this,"click",this.onClick_,!1);c.removeListener(this,"mouseover",this.onMouseOver_);
c.removeListener(this,"mouseout",this.onMouseOut_);c.removeListener(this,"keydown",this.onKeyDownHandler_,!1);c.removeListener(this,"focus",this.onFocus_.bind(this),!1)};window.QOWTPresentButton=document.registerElement("qowt-presentbutton",{prototype:a});return{}});
define("qowtRoot/customElements/ui/downloadButton",["qowtRoot/pubsub/pubsub","qowtRoot/utils/domListener","qowtRoot/utils/i18n"],function(h,c,f){var a=Object.create(HTMLElement.prototype);a.createdCallback=function(){this.classList.add("button");this.classList.add("basic");this.innerText=f.getMessage("download_button");var a=document.createElement("span");this.insertBefore(a,this.firstChild);c.addListener(this,"click",this.onClick_,!1);c.addListener(this,"mouseover",this.onMouseOver_);c.addListener(this,
"mouseout",this.onMouseOut_);c.addListener(this,"keydown",this.onKeyDownHandler_,!1);c.addListener(this,"focus",this.onFocus_.bind(this),!1);this.setAttribute("tabIndex",0);this.setAttribute("role","button");this.setAttribute("aria-label",f.getMessage("download_button"))};a.appendTo=function(a){a.appendChild(this)};a.onClick_=function(){h.publish("qowt:doAction",{action:"download",context:{contentType:"common"}})};a.onMouseOver_=function(){var a={name:"download",dimensions:this.getBoundingClientRect()};
document.getElementById("main-toolbar").$.tooltip.show(a)};a.onMouseOut_=function(){document.getElementById("main-toolbar").$.tooltip.hide()};a.onKeyDownHandler_=function(a){if(13===a.keyCode||32===a.keyCode)a.preventDefault(),a.stopPropagation(),this.onClick_(),this.blur()};a.onFocus_=function(){var a=this.getAttribute("aria-label")+" "+this.getAttribute("role"),c=window.cvox;c&&c.Api.speak(a,0)};a.detach=function(){c.removeListener(this,"click",this.onClick_,!1);c.removeListener(this,"mouseover",
this.onMouseOver_);c.removeListener(this,"mouseout",this.onMouseOut_);c.removeListener(this,"keydown",this.onKeyDownHandler_,!1);c.removeListener(this,"focus",this.onFocus_.bind(this),!1)};window.QOWTDownloadButton=document.registerElement("qowt-downloadbutton",{prototype:a});return{}});
define("qowtRoot/customElements/ui/appIcon",["qowtRoot/models/env","qowtRoot/utils/i18n","qowtRoot/utils/domListener"],function(h,c,f){var a=Object.create(HTMLElement.prototype),e={word:"http://docs.google.com/document",sheet:"http://docs.google.com/spreadsheets",point:"http://docs.google.com/presentation"};a.createdCallback=function(){var a=document.createElement("a");a.href=e[h.app];a.target="_blank";a.classList.add("qowt-main-appIcon");a.setAttribute("tabindex",0);a.setAttribute("role","link");
var p=h.app+c.getMessage("app_icon_aria_spoken_word");a.setAttribute("aria-label",p);f.addListener(a,"focus",this.onFocus_.bind(this),!1);this.appendChild(a)};a.appendTo=function(a){a.appendChild(this)};a.onFocus_=function(a){if(a.path&&-1!==Array.prototype.slice.call(a.path).indexOf(this)){a=this.querySelector("a.qowt-main-appIcon").getAttribute("aria-label")+" "+this.querySelector("a.qowt-main-appIcon").getAttribute("role");var c=window.cvox;c&&c.Api.speak(a,0)}};window.QOWTAppIcon=document.registerElement("qowt-app-icon",
{prototype:a});return{}});
define("qowtRoot/configs/common",["qowtRoot/customElements/ui/shareButton","qowtRoot/customElements/ui/presentButton","qowtRoot/customElements/ui/downloadButton","qowtRoot/customElements/ui/appIcon"],function(){var h={SUPPORTED_IMAGE_FORMATS:{jpg:!0,jpeg:!0,gif:!0,png:!0,pic:!1,pict:!1,bmp:!0,tif:!0,tiff:!0},ZOOM:{current:void 0,next:void 0,levels:void 0},LAYOUT_DEFAULT_MAXZOOM:void 0,LAYOUT_DEFAULT_MINZOOM:void 0,LAYOUT_DEFAULT_ZOOM_LEVEL:void 0,DOC_VERIFY_DEBOUNCE:50,DEFAULT_COLORS:"#6B9CD4 #DE7872 #B7D37C #A48CC2 #6CC7E1 #F3AB63 #AEC8EE".split(" "),TEXT_STYLE:{defaultHighlightColor:"rgb(255, 255, 255)",
defaultTxtColor:"rgb(0, 0, 0)",shadowText:{setValue:"#000000 0.07em 0.07em 0.07em",getValue:"rgb(0, 0, 0) 0.07em 0.07em 0.07em"},outlineText:{webkitTextFillColor:"transparent",webkitTextStroke:".05em #000000",webkitTextStrokeWidth:"0.05em",webkitTextStrokeColor:"rgb(0, 0, 0)"},embossedText:{setColor:"#ffffff",getColor:"rgb(255, 255, 255)",setShadow:"#000000 1px 1px 2px",getShadow:"rgb(0, 0, 0) 1px 1px 2px"},engravedText:{setColor:"#999999",getColor:"rgb(153, 153, 153)",setShadow:"#000000 -1px -1px 2px",
getShadow:"rgb(0, 0, 0) -1px -1px 2px"}},DEFAULT_BLIP_FILL_PROPERTIES:{tileProps:{Sx:100,Sy:100,Tx:0,Ty:0,align:"TL"},type:"tileFill"},kMESSAGE_BUS_CONNECTION_RETRY:10,kMESSAGE_BUS_CONNECTION_TIMEOUT:3E4,kMESSAGE_BUS_CONNECTION_TIMEOUT_MSG:"MessageBus: Connection timeout",create:function(){return{SUPPORTED_IMAGE_FORMATS:h.SUPPORTED_IMAGE_FORMATS,DIALOGUE_CONFIG:h.DIALOGUE_CONFIG,DEFAULT_COLORS:h.DEFAULT_COLORS,ZOOM:h.ZOOM,LAYOUT_DEFAULT_MAXZOOM:h.LAYOUT_DEFAULT_MAXZOOM,LAYOUT_DEFAULT_MINZOOM:h.LAYOUT_DEFAULT_MINZOOM,
LAYOUT_DEFAULT_ZOOM_LEVEL:h.LAYOUT_DEFAULT_ZOOM_LEVEL}}};return h});
define("qowtRoot/messageBus/messageBusImpl",["qowtRoot/utils/typeUtils","qowtRoot/configs/common","qowtRoot/third_party/when/when"],function(h,c,f){var a=function(a){this.myWin_=a||window;this.pendingConnections_=[];this.acceptedConnections_=[];this.completedConnections_=[];this.acknowledgements_=[];this.listeners_=[];this.msgQueue_=[];this.pendingMsgs_=[];this.myWin_.addEventListener("message",this.handleIncomingMessage_.bind(this),!1)};a.prototype=Object.create(Object.prototype);a.prototype.constructor=
a;a.prototype.connect=function(a,c){if(!a||null===a||!h.isObject(a)||!a.postMessage)throw Error("MessageBus: A valid HTML window object has not been provided to connect()");if(a===this.myWin_)throw Error("MessageBus: Trying to connect to its own window");if(c&&!h.isFunction(c))throw Error("MessageBus: The provided callback function is not of the correct type");for(var e=this.pendingConnections_.length,p=0;p<e;p++)if(this.pendingConnections_[p].win===a)throw Error("MessageBus: Trying to connect to a window that we are already trying to connect to");
e=this.acceptedConnections_.length;for(p=0;p<e;p++)if(this.acceptedConnections_[p].win===a)throw Error("MessageBus: Trying to connect to a window that we are already trying to connect to");e=this.completedConnections_.length;for(p=0;p<e;p++)if(this.completedConnections_[p].win===a)throw Error("MessageBus: Trying to connect to a window that has already been connected");e={win:a,callback:c,currentWaitTime:0,deferred:f.defer()};this.pendingConnections_.push(e);this.tryToConnect_(e);return e.deferred.promise};
a.prototype.pushMessage=function(a){if(!h.isObject(a))throw Error("MessageBus: A valid message object has not been provided to pushMessage()");var c=this.completedConnections_.length;if(0===c)this.pendingMsgs_.push(a);else{if(!h.isObject(a))throw Error("Cannot mark non-object value as quickoffice message");a.qoMessageBus=!0;this.msgQueue_.length>=e&&this.msgQueue_.shift();this.msgQueue_.push(a);for(var f=0;f<c;f++)this.completedConnections_[f].win.postMessage(a,"*")}};a.prototype.listen=function(a,
c){if(!h.isFunction(a))throw Error("MessageBus: A valid listener function has not been provided to listen()");if(c&&!h.isFunction(c))throw Error("MessageBus: The provided filter function is not of the correct type");this.listeners_.push({listener:a,filter:c})};a.prototype.stopListening=function(a){if(!h.isFunction(a))throw Error("MessageBus: A valid listener function has not been provided to stopListening()");for(var c=this.listeners_.length,e=0;e<c;e++)if(this.listeners_[e].listener===a){this.listeners_.splice(e,
1);break}};a.prototype.isConnectedTo=function(a){for(var c=!1,e=this.completedConnections_.length,f=0;f<e;f++)if(a===this.completedConnections_[f].win){c=!0;break}return c};a.prototype.tryToConnect_=function(a){a.currentWaitTime>c.kMESSAGE_BUS_CONNECTION_TIMEOUT?this.handleTimeOut_(a):(a.currentWaitTime+=c.kMESSAGE_BUS_CONNECTION_RETRY,-1!==this.pendingConnections_.indexOf(a)&&a.win.postMessage(t,"*"),a.timeoutId=setTimeout(this.tryToConnect_.bind(this,a),c.kMESSAGE_BUS_CONNECTION_RETRY))};a.prototype.handleTimeOut_=
function(a){var e=c.kMESSAGE_BUS_CONNECTION_TIMEOUT_MSG;window.connectFromAppToQowt&&(e=window.connectFromQowtToApp?Math.abs(Math.round(window.connectFromQowtToApp-window.connectFromAppToQowt)/1E3)>Math.round(c.kMESSAGE_BUS_CONNECTION_TIMEOUT/1E3*.8)?e+":qowt too late to connect":e+":qowt and app connected:handshake failed?":e+":qowt failed to connect");a.deferred.reject(Error(e))};a.prototype.handleIncomingMessage_=function(a){if(a){if(-1!==this.msgQueue_.indexOf(a.data))throw Error("MessageBus: A message that was pushed onto thisbus has arrived back on it - we have a circular dependancy!");
a.data===t?this.handleConnectionRequestMsg_(a):a.data===p?this.handleConnectionAcceptedMsg_(a):a.data===v?this.handleConnectionAckMsg_(a):a&&a.data&&!0===a.data.qoMessageBus&&this.handleClientMsg_(a)}};a.prototype.handleConnectionRequestMsg_=function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionRequest message");a.source.postMessage(p,"*")};a.prototype.handleConnectionAcceptedMsg_=function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionAccepted message");
for(var c=this.pendingConnections_.length,e=0;e<c;e++)if(this.pendingConnections_[e].win===a.source){c=this.pendingConnections_.splice(e,1)[0];a=this.acknowledgements_.indexOf(a.source);-1===a?this.acceptedConnections_.push(c):(this.acknowledgements_.splice(a,1),this.connectionCompleted_(c));c.win.postMessage(v,"*");break}};a.prototype.handleConnectionAckMsg_=function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionAck message");for(var c=this.acceptedConnections_.length,e=
0;e<c;e++)if(this.acceptedConnections_[e].win===a.source){a=this.acceptedConnections_.splice(e,1)[0];this.connectionCompleted_(a);return}this.acknowledgements_.push(a.source)};a.prototype.handleClientMsg_=function(a){if(a.source){for(var c=this.listeners_.slice(),e=c.length,f=0;f<e;f++){var h=c[f];!h||h.filter&&!h.filter.call(this,a)||h.listener.call(this,a)}e=this.completedConnections_.length;for(f=0;f<e;f++)this.completedConnections_[f].win!==a.source&&this.completedConnections_[f].win.postMessage(a.data,
"*")}};a.prototype.connectionCompleted_=function(a){this.completedConnections_.push(a);clearTimeout(a.timeoutId);for(a.callback&&a.callback.call(this);0<this.pendingMsgs_.length;)this.pushMessage(this.pendingMsgs_.shift());a.deferred.resolve()};var e=10,t="qoConnectionRequest",p="qoConnectionAccepted",v="qoConnectionAck";return a});define("qowtRoot/messageBus/messageBus",["qowtRoot/messageBus/messageBusImpl"],function(h){return new h});
define("qowtRoot/errors/qowtError",["qowtRoot/errors/localisedError"],function(h){var c=function(){h.apply(this,arguments);this.name="QOWTError";Error.captureStackTrace(this,c);this.fatal=!1};c.prototype=Object.create(h.prototype);c.prototype.constructor=c;return window.QOWTError=c});
define("qowtRoot/errors/qowtSilentError",["qowtRoot/errors/localisedError"],function(h){var c=function(){h.apply(this,arguments);this.name="QOWTSilentError";Error.captureStackTrace(this,c);this.fatal=!1;this.silent=!0};c.prototype=Object.create(h.prototype);c.prototype.constructor=c;return window.QOWTSilentError=c});
define("qowtRoot/errors/errorCatcher","qowtRoot/utils/typeUtils qowtRoot/messageBus/messageBus qowtRoot/pubsub/pubsub qowtRoot/errors/qowtError qowtRoot/errors/qowtSilentError qowtRoot/errors/qowtException".split(" "),function(h,c,f,a,e,t){function p(a){a.error?(console.error("%s caught js exception: %s",A,a.error.name||a.error.message?a.error.name+": "+a.error.message:a.error),console.error(a.error.stack),void 0===a.error.fatal&&(a.error.fatal=!0),l(a.error)):console.error(a)}function v(a,c){console.log("%s caught deprecated error",
A);console.log(c);c.isDeprecatedError=!0;l(c)}function l(f){if(f instanceof Error)void 0===f.fatal&&(f.fatal=!0);else{console.log("%s converting deprecated/bad error",A);switch(!0){case h.isObject(f)&&f.isDeprecatedError:var l={title:f.errorId?f.errorId+"_short_msg":void 0,details:f.errorId?f.errorId+"_msg":void 0,linkData:f.linkData,message:f.additionalInfo};f=f.fatal?new t(l):f.silent?new e(l):new a(l);break;case h.isNumber(f):f=new t({code:f});break;case h.isString(f):f=new t(f);break;default:f=
new t(f.toString())}f.stack=void 0}y.push(f);m(f);if(!f.isSynced){console.log("%s pushing error to msg bus",A);l=_.extend({},f);l.name=f.name;l.message=f.message;l.stack=f.stack;try{c.pushMessage({id:J,error:JSON.stringify(l)})}catch(p){}}}function m(a){console.log("%s dispatching error to observers",A);G.forEach(function(c){try{c.call(c,a)}catch(e){console.warn("Error observer %s threw an exception; ignored",c.name||""),console.warn(e.stack)}})}function r(a){if(a&&a.data&&a.data.error){console.log("%s receiving error from msg bus",
A);a=JSON.parse(a.data.error);var c={};-1!=="Error EvalError RangeError ReferenceError SyntaxError TypeError URIError QOWTError QOWTSilentError QOWTException".split(" ").indexOf(a.name)?(console.log("cast to %s",a.name),c=new window[a.name]):(console.log("cast fallback to Error"),c=Error());_.extend(c,a);void 0===a.stack&&(c.stack=void 0);a=c;a.isSynced=!0;l(a)}}function w(a){return a&&a.data&&a.data.id===J}var J="errorSync",G=[],A="sandbox"===window.name?"QOWT":"App",u,y=[];return{init:function(){u=
f.subscribe("qowt:error",v);window.addEventListener("error",p);c.listen(r,w);Error.stackTraceLimit=Infinity},reset:function(){f.unsubscribe(u);window.removeEventListener("error",p);c.stopListening(r);G=[]},handleError:function(a){l(a)},addObserver:function(a){h.isFunction(a)?G.push(a):console.warn("Error observer must be a function")},observers:function(){return G},lastError:function(){return y[y.length-1]}}});
define("background/chromeHandler","background/store/fileStore background/store/fileDetails background/fileReaper utils/logUtils qowtRoot/errors/errorCatcher qowtRoot/errors/qowtSilentError qowtRoot/third_party/when/when".split(" "),function(h,c,f,a,e,t,p){function v(c,e,f){var h=c.length,t=[];return e?J(e,c[0],f):m().catch(function(){return l()}).catch(function(){return r()}).then(function(a){if(A(a)){for(var e=0;e<h;e++)0===e&&a.useTabId?t.push(J(a.useTabId,c[e],f)):t.push(w(a.id,c[e],f));return p.all(t)}throw Error("Could not find valid window");
}).catch(a.logError)}function l(){return p.promise(function(a,c){chrome.windows.getLastFocused({populate:!1},function(e){A(e)?a(e):c(Error("invalid window"))})})}function m(){return p.promise(function(a,c){chrome.windows.getCurrent({populate:!1},function(e){A(e)?a(e):c(Error("invalid window"))})})}function r(){return p.promise(function(a,c){chrome.windows.create({type:"normal",focused:!0},function(e){A(e)?(e.useTabId=e.tabs[0].id,a(e)):c(Error("invalid window"))})})}function w(a,c,e){var f={active:e?
e:!1,windowId:a,url:"../views/app.html?uuid="+c};return p.promise(function(a){chrome.tabs.create(f,a)})}function J(a,c,e){var f={active:e?e:!1,url:"../views/app.html?uuid="+c};return p.promise(function(e,l){var m=h.getEntry(c);m?(m.tabId=a,chrome.tabs.update(a,f,e)):l()})}function G(a){return a&&void 0!==a.id}f.init();var A=function(a){return a&&void 0!==a.id&&!a.incognito};return{handleIncomingMsg:function(a,c){"driveEnabled"===c.msg&&a.postMessage({driveEnabled:!0,supportsTeamDrives:!0})},handleStream:function(a){var f;
a:{var l=a.responseHeaders;if(l&&(l=l["Content-Disposition"]||l["content-disposition"]))try{f=l.split("=")[1].trim().replace(/\"/g,"");break a}catch(m){e.handleError(new t("Failed to parse Content-Disposition Header: "+m));f=void 0;break a}f=void 0}f=new c({mimeType:a.mimeType,streamURL:a.streamUrl,originalURL:a.originalUrl,preferredFilename:f});f=h.addEntry(f);return a.embedded?v(Array(f)):v(Array(f),a.tabId)},handleChromeOSFile:function(a){var e,f=p.reject(Error("No file entries were passed to open"));
A=G;if(a){e=[];for(var l=0;l<a.length;++l){var m=new c({userFile:a[l].entry});e.push(h.addEntry(m))}e=v(e,void 0,!0)}return e||f},handleDriveDoc:function(a){var e,f,l=p.reject(Error("No drive doc ids were passed to open"));if(a){f=[];for(var m=0;m<a.length;++m){var r=new c({driveDocId:a[m]}),r=h.addEntry(r);0===m?e=r:f.push(r)}f=0===f.length?p.resolve(e):v(f).yield(e)}return f||l}}});
define("background/pageAPI",["background/fileReaper","background/store/fileStore","background/chromeHandler"],function(h,c,f){window.handleDriveDoc=function(a){return f.handleDriveDoc(a)};window.getFileDetails=function(a){return c.getEntry(a)};window.addReaperLock=function(a){h.addLock(a)};window.removeReaperLock=function(a){h.removeLock(a)};window.cacheTabId=function(a,e){var f=c.getEntry(a);f&&(f.tabId=e)};window.cachePrivateFilePath=function(a,e){var f=c.getEntry(a);f&&(f.privateFilePath=e)};window.cacheDownloadFilePath=
function(a,e){var f=c.getEntry(a);f&&(f.downloadFilePath=e)};window.cacheTimestamp=function(a){if(a=c.getEntry(a))a.timestamp=(new Date).getTime()};window.isReady=!0;return{}});
(function(){function h(c){console.error(c.stack?c.stack:c)}var c=(new Promise(function(c){require(["background/store/fileStore","background/chromeHandler","background/pageAPI"],function(a,e){a.init();c(e)})})).catch(h);(function(){var c=chrome&&chrome.runtime&&chrome.runtime.onConnectExternal&&chrome.runtime.onConnectExternal.addListener;c||console.warn("Missing Chrome Connect API... drive integration wont work");return c})()&&chrome.runtime.onConnectExternal.addListener(function(f){f.onDisconnect.addListener(function(){});
f.onMessage.addListener(function(a){c.then(function(c){c.handleIncomingMsg(f,a)}).catch(h)})});(function(){var c=chrome&&chrome.streamsPrivate&&chrome.streamsPrivate.onExecuteMimeTypeHandler&&chrome.streamsPrivate.onExecuteMimeTypeHandler.addListener;c||console.warn("Missing Chrome Streams API... blue links wont work");return c})()&&chrome.streamsPrivate.onExecuteMimeTypeHandler.addListener(function(f){c.then(function(a){a.handleStream(f)}).catch(h)});(function(){var c=chrome&&chrome.app&&chrome.app.runtime&&
chrome.app.runtime.onLaunched&&chrome.app.runtime.onLaunched.addListener;c||console.warn("Missing ChromeOS Runtime OnLaunched API... opening documents from file browser wont work");return c})()&&chrome.app.runtime.onLaunched.addListener(function(f){"qo_documents"===f.id&&c.then(function(a){a.handleChromeOSFile(f.items)}).catch(h)})})();define("background/backgroundMain",function(){});
