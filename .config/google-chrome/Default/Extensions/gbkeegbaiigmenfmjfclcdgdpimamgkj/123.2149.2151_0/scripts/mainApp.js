/*
 RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/domReady for details

 lodash 4.5.1 (Custom Build) lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 Build: `lodash -o ./dist/lodash.js`
 MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors */
define("third_party/domready/domReady",[],function(){function c(){if(!l){l=!0;e&&clearInterval(e);var a=n;if(l&&a.length){n=[];var c;for(c=0;c<a.length;c+=1)a[c](t)}}}function f(a){l?a(t):n.push(a);return f}var k,a,e,g="undefined"!==typeof window&&window.document,l=!g,t=g?document:null,n=[];if(g){if(document.addEventListener)document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1);else if(window.attachEvent){window.attachEvent("onload",c);a=document.createElement("div");
try{k=null===window.frameElement}catch(p){}a.doScroll&&k&&window.external&&(e=setInterval(function(){try{a.doScroll(),c()}catch(e){}},30))}"complete"===document.readyState&&c()}f.version="2.0.1";f.load=function(a,c,e,g){g.isBuild?e(null):f(e)};return f});
(function(){function c(c){var k=null;if(this.id===c)return this;if(this.hasChildNodes())for(var a=0,e=this.childNodes.length;a<e&&(this.childNodes[a].nodeType!==Node.ELEMENT_NODE||!(k=this.childNodes[a].getElementById(c))||k.id!==c);a++);return k}Element.prototype.clear=function(){if(this.hasChildNodes())for(;1<=this.childNodes.length;)this.removeChild(this.firstChild);return this};Element.prototype.removeElm=function(){return this.parentNode?(this.parentNode.removeChild(this),this):null};Function.prototype.bake=
function(c){var k=this,a=[].slice.call(arguments,1);return function(){return k.apply(c,a.concat([].slice.call(arguments,0)))}};Element.prototype.getElementById=c;DocumentFragment.prototype.getElementById=c})();define("qowtRoot/lib/framework/framework",function(){});
(function(){var c,f=f||{},k=this,a=function(b){return void 0!==b},e=function(){},g=function(b){var m=typeof b;if("object"==m)if(b){if(b instanceof Array)return"array";if(b instanceof Object)return m;var a=Object.prototype.toString.call(b);if("[object Window]"==a)return"object";if("[object Array]"==a||"number"==typeof b.length&&"undefined"!=typeof b.splice&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("splice"))return"array";if("[object Function]"==a||"undefined"!=typeof b.call&&
"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==m&&"undefined"==typeof b.call)return"object";return m},l=function(b){return"array"==g(b)},t=function(b){var m=g(b);return"array"==m||"object"==m&&"number"==typeof b.length},n=function(b){return"string"==typeof b},p=function(b){return"number"==typeof b},w=function(b){return"function"==g(b)},u=function(b){var m=typeof b;return"object"==m&&null!=b||"function"==m},N=function(b,
m,a){return b.call.apply(b.bind,arguments)},F=function(b,m,a){if(!b)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(a,d);return b.apply(m,a)}}return function(){return b.apply(m,arguments)}},x=function(b,m,a){x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?N:F;return x.apply(null,arguments)},z=function(b,m){var a=Array.prototype.slice.call(arguments,
1);return function(){var m=a.slice();m.push.apply(m,arguments);return b.apply(this,m)}},D=Date.now||function(){return+new Date},r=function(b,m){var da=b.split("."),d=k;da[0]in d||!d.execScript||d.execScript("var "+da[0]);for(var c;da.length&&(c=da.shift());)!da.length&&a(m)?d[c]=m:d=d[c]?d[c]:d[c]={}},E=function(b,m){function a(){}a.prototype=m.prototype;b.K=m.prototype;b.prototype=new a;b.Qc=function(b,a,da){return m.prototype[a].apply(b,Array.prototype.slice.call(arguments,2))}};Function.prototype.bind=
Function.prototype.bind||function(b,m){if(1<arguments.length){var a=Array.prototype.slice.call(arguments,1);a.unshift(this,b);return x.apply(null,a)}return x(this,b)};var R=function(b){if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var m=Error().stack;m&&(this.stack=m)}b&&(this.message=String(b))};E(R,Error);R.prototype.name="CustomError";var V=String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},ta=function(b,m){return b<m?
-1:b>m?1:0},G=Array.prototype,v=G.indexOf?function(b,m,a){return G.indexOf.call(b,m,a)}:function(b,m,a){a=null==a?0:0>a?Math.max(0,b.length+a):a;if(n(b))return n(m)&&1==m.length?b.indexOf(m,a):-1;for(;a<b.length;a++)if(a in b&&b[a]===m)return a;return-1},P=G.forEach?function(b,m,a){G.forEach.call(b,m,a)}:function(b,m,a){for(var d=b.length,c=n(b)?b.split(""):b,e=0;e<d;e++)e in c&&m.call(a,c[e],e,b)},pa=G.some?function(b,m,a){return G.some.call(b,m,a)}:function(b,m,a){for(var d=b.length,c=n(b)?b.split(""):
b,e=0;e<d;e++)if(e in c&&m.call(a,c[e],e,b))return!0;return!1},S=G.every?function(b,m,a){return G.every.call(b,m,a)}:function(b,m,a){for(var d=b.length,c=n(b)?b.split(""):b,e=0;e<d;e++)if(e in c&&!m.call(a,c[e],e,b))return!1;return!0},I=function(b){var m;a:{m=Nd;for(var a=b.length,d=n(b)?b.split(""):b,c=0;c<a;c++)if(c in d&&m.call(void 0,d[c],c,b)){m=c;break a}m=-1}return 0>m?null:n(b)?b.charAt(m):b[m]},eb=function(b,m){var a=v(b,m),d;(d=0<=a)&&G.splice.call(b,a,1);return d},Cc=function(b){return G.concat.apply(G,
arguments)},Dc=function(b,m,a){return 2>=arguments.length?G.slice.call(b,m):G.slice.call(b,m,a)},Ec="StopIteration"in k?k.StopIteration:Error("StopIteration"),Gb=function(){};Gb.prototype.next=function(){throw Ec;};Gb.prototype.wc=function(){return this};var Wa=function(b,m,a){for(var d in b)m.call(a,b[d],d,b)},za=function(b){var m=[],a=0,d;for(d in b)m[a++]=b[d];return m},Hb=function(b){var m=[],a=0,d;for(d in b)m[a++]=d;return m},Ib=function(b,m){var a;a:{for(a in b)if(m.call(void 0,b[a],a,b))break a;
a=void 0}return a&&b[a]},Aa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Jb=function(b,m){for(var a,d,c=1;c<arguments.length;c++){d=arguments[c];for(a in d)b[a]=d[a];for(var e=0;e<Aa.length;e++)a=Aa[e],Object.prototype.hasOwnProperty.call(d,a)&&(b[a]=d[a])}},fa=function(b,m){this.q={};this.b=[];this.ra=this.j=0;var a=arguments.length;if(1<a){if(a%2)throw Error("Uneven number of arguments");for(var d=0;d<a;d+=2)this.set(arguments[d],arguments[d+
1])}else b&&this.la(b)};fa.prototype.w=function(){tb(this);for(var b=[],m=0;m<this.b.length;m++)b.push(this.q[this.b[m]]);return b};fa.prototype.H=function(){tb(this);return this.b.concat()};fa.prototype.R=function(b){return Xa(this.q,b)};fa.prototype.remove=function(b){return Xa(this.q,b)?(delete this.q[b],this.j--,this.ra++,this.b.length>2*this.j&&tb(this),!0):!1};var tb=function(b){if(b.j!=b.b.length){for(var m=0,a=0;m<b.b.length;){var d=b.b[m];Xa(b.q,d)&&(b.b[a++]=d);m++}b.b.length=a}if(b.j!=
b.b.length){for(var c={},a=m=0;m<b.b.length;)d=b.b[m],Xa(c,d)||(b.b[a++]=d,c[d]=1),m++;b.b.length=a}};c=fa.prototype;c.get=function(b,m){return Xa(this.q,b)?this.q[b]:m};c.set=function(b,m){Xa(this.q,b)||(this.j++,this.b.push(b),this.ra++);this.q[b]=m};c.la=function(b){var m;b instanceof fa?(m=b.H(),b=b.w()):(m=Hb(b),b=za(b));for(var a=0;a<m.length;a++)this.set(m[a],b[a])};c.forEach=function(b,m){for(var a=this.H(),d=0;d<a.length;d++){var c=a[d],e=this.get(c);b.call(m,e,c,this)}};c.clone=function(){return new fa(this)};
c.Lb=function(){tb(this);for(var b={},m=0;m<this.b.length;m++){var a=this.b[m];b[a]=this.q[a]}return b};c.wc=function(b){tb(this);var m=0,a=this.b,d=this.q,c=this.ra,e=this,g=new Gb;g.next=function(){for(;;){if(c!=e.ra)throw Error("The map has changed since the iterator was created");if(m>=a.length)throw Ec;var g=a[m++];return b?g:d[g]}};return g};var Xa=function(b,m){return Object.prototype.hasOwnProperty.call(b,m)},q,fb,ac={id:"hitType",name:"t",valueType:"text",maxLength:void 0,defaultValue:void 0},
Fc={id:"sessionControl",name:"sc",valueType:"text",maxLength:void 0,defaultValue:void 0},bc={id:"description",name:"cd",valueType:"text",maxLength:2048,defaultValue:void 0},cc={id:"eventCategory",name:"ec",valueType:"text",maxLength:150,defaultValue:void 0},dc={id:"eventAction",name:"ea",valueType:"text",maxLength:500,defaultValue:void 0},ub={id:"eventLabel",name:"el",valueType:"text",maxLength:500,defaultValue:void 0},Kb={id:"eventValue",name:"ev",valueType:"integer",maxLength:void 0,defaultValue:void 0},
Gc={qd:ac,Rc:{id:"anonymizeIp",name:"aip",valueType:"boolean",maxLength:void 0,defaultValue:void 0},Bd:{id:"queueTime",name:"qt",valueType:"integer",maxLength:void 0,defaultValue:void 0},Xc:{id:"cacheBuster",name:"z",valueType:"text",maxLength:void 0,defaultValue:void 0},Hd:Fc,Id:{id:"sessionGroup",name:"sg",valueType:"text",maxLength:void 0,defaultValue:void 0},Yd:{id:"userId",name:"uid",valueType:"text",maxLength:void 0,defaultValue:void 0},yd:{id:"nonInteraction",name:"ni",valueType:"boolean",
maxLength:void 0,defaultValue:void 0},gd:bc,Rd:{id:"title",name:"dt",valueType:"text",maxLength:1500,defaultValue:void 0},Tc:{id:"appId",name:"aid",valueType:"text",maxLength:150,defaultValue:void 0},Uc:{id:"appInstallerId",name:"aiid",valueType:"text",maxLength:150,defaultValue:void 0},kd:cc,jd:dc,ld:ub,md:Kb,Kd:{id:"socialNetwork",name:"sn",valueType:"text",maxLength:50,defaultValue:void 0},Jd:{id:"socialAction",name:"sa",valueType:"text",maxLength:50,defaultValue:void 0},Ld:{id:"socialTarget",
name:"st",valueType:"text",maxLength:2048,defaultValue:void 0},Ud:{id:"transactionId",name:"ti",valueType:"text",maxLength:500,defaultValue:void 0},Td:{id:"transactionAffiliation",name:"ta",valueType:"text",maxLength:500,defaultValue:void 0},Vd:{id:"transactionRevenue",name:"tr",valueType:"currency",maxLength:void 0,defaultValue:void 0},Wd:{id:"transactionShipping",name:"ts",valueType:"currency",maxLength:void 0,defaultValue:void 0},Xd:{id:"transactionTax",name:"tt",valueType:"currency",maxLength:void 0,
defaultValue:void 0},ed:{id:"currencyCode",name:"cu",valueType:"text",maxLength:10,defaultValue:void 0},ud:{id:"itemPrice",name:"ip",valueType:"currency",maxLength:void 0,defaultValue:void 0},vd:{id:"itemQuantity",name:"iq",valueType:"integer",maxLength:void 0,defaultValue:void 0},sd:{id:"itemCode",name:"ic",valueType:"text",maxLength:500,defaultValue:void 0},td:{id:"itemName",name:"in",valueType:"text",maxLength:500,defaultValue:void 0},rd:{id:"itemCategory",name:"iv",valueType:"text",maxLength:500,
defaultValue:void 0},cd:{id:"campaignSource",name:"cs",valueType:"text",maxLength:100,defaultValue:void 0},ad:{id:"campaignMedium",name:"cm",valueType:"text",maxLength:50,defaultValue:void 0},bd:{id:"campaignName",name:"cn",valueType:"text",maxLength:100,defaultValue:void 0},$c:{id:"campaignKeyword",name:"ck",valueType:"text",maxLength:500,defaultValue:void 0},Yc:{id:"campaignContent",name:"cc",valueType:"text",maxLength:500,defaultValue:void 0},Zc:{id:"campaignId",name:"ci",valueType:"text",maxLength:100,
defaultValue:void 0},pd:{id:"gclid",name:"gclid",valueType:"text",maxLength:void 0,defaultValue:void 0},fd:{id:"dclid",name:"dclid",valueType:"text",maxLength:void 0,defaultValue:void 0},Ad:{id:"pageLoadTime",name:"plt",valueType:"integer",maxLength:void 0,defaultValue:void 0},hd:{id:"dnsTime",name:"dns",valueType:"integer",maxLength:void 0,defaultValue:void 0},Md:{id:"tcpConnectTime",name:"tcp",valueType:"integer",maxLength:void 0,defaultValue:void 0},Gd:{id:"serverResponseTime",name:"srt",valueType:"integer",
maxLength:void 0,defaultValue:void 0},zd:{id:"pageDownloadTime",name:"pdt",valueType:"integer",maxLength:void 0,defaultValue:void 0},Cd:{id:"redirectResponseTime",name:"rrt",valueType:"integer",maxLength:void 0,defaultValue:void 0},Nd:{id:"timingCategory",name:"utc",valueType:"text",maxLength:150,defaultValue:void 0},Qd:{id:"timingVar",name:"utv",valueType:"text",maxLength:500,defaultValue:void 0},Pd:{id:"timingValue",name:"utt",valueType:"integer",maxLength:void 0,defaultValue:void 0},Od:{id:"timingLabel",
name:"utl",valueType:"text",maxLength:500,defaultValue:void 0},nd:{id:"exDescription",name:"exd",valueType:"text",maxLength:150,defaultValue:void 0},od:{id:"exFatal",name:"exf",valueType:"boolean",maxLength:void 0,defaultValue:"1"}},Hc=function(b){if(1>b||200<b)throw Error("Expected dimension index range 1-200, but was : "+b);return{id:"dimension"+b,name:"cd"+b,valueType:"text",maxLength:150,defaultValue:void 0}},Ic=function(b){if(1>b||200<b)throw Error("Expected metric index range 1-200, but was : "+
b);return{id:"metric"+b,name:"cm"+b,valueType:"integer",maxLength:void 0,defaultValue:void 0}},Jc=function(b){if(1>b)return"0";if(3>b)return"1-2";b=Math.floor(Math.log(b-1)/Math.log(2));return Math.pow(2,b)+1+"-"+Math.pow(2,b+1)},Ia=function(b,m){for(var a=0,d=b.length-1,c=0;a<=d;){var e=Math.floor((a+d)/2),c=b[e];if(m<=c){d=0==e?0:b[e-1];if(m>d)return(d+1).toString()+"-"+c.toString();d=e-1}else if(m>c){if(e>=b.length-1)return(b[b.length-1]+1).toString()+"+";a=e+1}}return"<= 0"},Ja=function(){this.bb=
[]},Ka=function(){return new Ja};c=Ja.prototype;c.when=function(b){this.bb.push(b);return this};c.Ab=function(b){var m=arguments;this.when(function(b){return 0<=v(m,b.Ib())});return this};c.Pc=function(b,m){var a=Dc(arguments,1);this.when(function(m){m=m.W().get(b);return 0<=v(a,m)});return this};c.zb=function(b,m){if(u(this.g))throw Error("Filter has already been set.");this.g=u(m)?x(b,m):b;return this};c.Da=function(){if(0==this.bb.length)throw Error("Must specify at least one predicate using #when or a helper method.");
if(!u(this.g))throw Error("Must specify a delegate filter using #applyFilter.");return x(function(b){S(this.bb,function(m){return m(b)})&&this.g(b)},this)};var ka=function(){this.Cb=!1;this.Db="";this.sb=!1;this.Aa=null};ka.prototype.xc=function(b){this.Cb=!0;this.Db=b||" - ";return this};ka.prototype.Oc=function(){this.sb=!0;return this};ka.prototype.Fc=function(){return Lb(this,Jc)};ka.prototype.Gc=function(b){return Lb(this,z(Ia,b))};var Lb=function(b,m){if(null!=b.Aa)throw Error("LabelerBuilder: Only one labeling strategy may be used.");
b.Aa=x(function(b){var a=b.W().get(Kb),d=b.W().get(ub);p(a)&&(a=m(a),null!=d&&this.Cb&&(a=d+this.Db+a),b.W().set(ub,a))},b);return b};ka.prototype.Da=function(){if(null==this.Aa)throw Error("LabelerBuilder: a labeling strategy must be specified prior to calling build().");return Ka().Ab("event").zb(x(function(b){this.Aa(b);this.sb&&b.W().remove(Kb)},this)).Da()};var ec=function(b,m){var a=Array.prototype.slice.call(arguments),d=a.shift();if("undefined"==typeof d)throw Error("[goog.string.format] Template required");
return d.replace(/%([0\-\ \+]*)(\d+)?(\.(\d+))?([%sfdiu])/g,function(b,m,d,c,e,g,n,f){if("%"==g)return"%";var k=a.shift();if("undefined"==typeof k)throw Error("[goog.string.format] Not enough arguments");arguments[0]=k;return gb[g].apply(null,arguments)})},gb={s:function(b,m,a){return isNaN(a)||""==a||b.length>=a?b:-1<m.indexOf("-",0)?b+Array(a-b.length+1).join(" "):Array(a-b.length+1).join(" ")+b},f:function(b,m,a,d,c){d=b.toString();isNaN(c)||""==c||(d=b.toFixed(c));var e;e=0>b?"-":0<=m.indexOf("+")?
"+":0<=m.indexOf(" ")?" ":"";0<=b&&(d=e+d);if(isNaN(a)||d.length>=a)return d;d=isNaN(c)?Math.abs(b).toString():Math.abs(b).toFixed(c);b=a-d.length-e.length;return 0<=m.indexOf("-",0)?e+d+Array(b+1).join(" "):e+Array(b+1).join(0<=m.indexOf("0",0)?"0":" ")+d},d:function(b,m,a,d,c,e,g,n){return gb.f(parseInt(b,10),m,a,d,0,e,g,n)}};gb.i=gb.d;gb.u=gb.d;var fc=function(b){if("function"==typeof b.w)return b.w();if(n(b))return b.split("");if(t(b)){for(var m=[],a=b.length,d=0;d<a;d++)m.push(b[d]);return m}return za(b)},
hd=function(b,m){if("function"==typeof b.forEach)b.forEach(m,void 0);else if(t(b)||n(b))P(b,m,void 0);else{var a;if("function"==typeof b.H)a=b.H();else if("function"!=typeof b.w)if(t(b)||n(b)){a=[];for(var d=b.length,c=0;c<d;c++)a.push(c)}else a=Hb(b);else a=void 0;for(var d=fc(b),c=d.length,e=0;e<c;e++)m.call(void 0,d[e],a&&a[e],b)}},Y=function(b){this.F=new fa;if(0<arguments.length%2)throw Error("Uneven number of arguments to ParameterMap constructor.");for(var m=arguments,a=0;a<m.length;a+=2)this.set(m[a],
m[a+1])};Y.prototype.set=function(b,m){if(null==m)throw Error("undefined-or-null value for key: "+b.name);this.F.set(b.name,{key:b,value:m})};Y.prototype.remove=function(b){this.F.remove(b.name)};Y.prototype.get=function(b){b=this.F.get(b.name,null);return null===b?null:b.value};Y.prototype.la=function(b){this.F.la(b.F)};var hb=function(b,m){P(b.F.w(),function(b){m(b.key,b.value)})};Y.prototype.Lb=function(){var b={};hb(this,function(m,a){b[m.id]=a});return b};Y.prototype.clone=function(){var b=new Y;
b.F=this.F.clone();return b};Y.prototype.toString=function(){var b={};hb(this,function(m,a){b[m.id]=a});return JSON.stringify(b)};var M=function(b){this.g=b};c=M.prototype;c.yc=function(b){var m=new M(x(this.Q,this));m.I=cc;m.M=b;return m};c.action=function(b){var m=new M(x(this.Q,this));m.I=dc;m.M=b;return m};c.label=function(b){var m=new M(x(this.Q,this));m.I=ub;m.M=b;return m};c.value=function(b){var m=new M(x(this.Q,this));m.I=Kb;m.M=b;return m};c.zc=function(b){var m=new M(x(this.Q,this));m.I=
Hc(b.index);m.M=b.value;return m};c.Ec=function(b){var m=new M(x(this.Q,this));m.I=Ic(b.index);m.M=b.value;return m};c.send=function(b){var m=new Y;this.Q(m);return b.send("event",m)};c.Q=function(b){null!=this.I&&null!=this.M&&!b.F.R(this.I.name)&&b.set(this.I,this.M);u(this.g)&&this.g(b)};var Kc=new M(e),Ba=function(){this.ba=this.ba;this.Ea=this.Ea};Ba.prototype.ba=!1;Ba.prototype.$=function(){this.ba||(this.ba=!0,this.l())};Ba.prototype.l=function(){if(this.Ea)for(;this.Ea.length;)this.Ea.shift()()};
var qa=function(b,m){this.type=b;this.currentTarget=this.target=m;this.defaultPrevented=this.X=!1;this.nb=!0};qa.prototype.l=function(){};qa.prototype.$=function(){};qa.prototype.preventDefault=function(){this.defaultPrevented=!0;this.nb=!1};var vb=function(b){vb[" "](b);return b};vb[" "]=e;var Z;a:{var Mb=k.navigator;if(Mb){var Ca=Mb.userAgent;if(Ca){Z=Ca;break a}}Z=""}var aa=function(b){return-1!=Z.indexOf(b)},ib=aa("Opera")||aa("OPR"),y=aa("Trident")||aa("MSIE"),Ya=aa("Gecko")&&-1==Z.toLowerCase().indexOf("webkit")&&
!(aa("Trident")||aa("MSIE")),Nb=-1!=Z.toLowerCase().indexOf("webkit"),Od=function(){var b=k.document;return b?b.documentMode:void 0},Pd=function(){var b="",m;if(ib&&k.opera)return b=k.opera.version,w(b)?b():b;Ya?m=/rv\:([^\);]+)(\)|;)/:y?m=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Nb&&(m=/WebKit\/(\S+)/);m&&(b=(b=m.exec(Z))?b[1]:"");return y&&(m=Od(),m>parseFloat(b))?String(m):b}(),Qd={},K=function(b){var m;if(!(m=Qd[b])){m=0;for(var a=V(String(Pd)).split("."),d=V(String(b)).split("."),c=Math.max(a.length,
d.length),e=0;0==m&&e<c;e++){var g=a[e]||"",n=d[e]||"",f=/(\d*)(\D*)/g,k=/(\d*)(\D*)/g;do{var l=f.exec(g)||["","",""],p=k.exec(n)||["","",""];if(0==l[0].length&&0==p[0].length)break;m=ta(0==l[1].length?0:parseInt(l[1],10),0==p[1].length?0:parseInt(p[1],10))||ta(0==l[2].length,0==p[2].length)||ta(l[2],p[2])}while(0==m)}m=Qd[b]=0<=m}return m},Q=k.document,gc=Q&&y?Od()||("CSS1Compat"==Q.compatMode?parseInt(Pd,10):5):void 0,Lc=!y||y&&9<=gc,id=y&&!K("9"),ha=!Nb||K("528"),jd=Ya&&K("1.9b")||y&&K("8")||ib&&
K("9.5")||Nb&&K("528"),pe=Ya&&!K("8")||y&&!K("9"),Ob=function(b,m){qa.call(this,b?b.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.Fb=this.state=null;if(b){var a=this.type=b.type;this.target=b.target||b.srcElement;this.currentTarget=m;var d=b.relatedTarget;if(d){if(Ya){var c;a:{try{vb(d.nodeName);c=!0;break a}catch(e){}c=
!1}c||(d=null)}}else"mouseover"==a?d=b.fromElement:"mouseout"==a&&(d=b.toElement);this.relatedTarget=d;this.offsetX=Nb||void 0!==b.offsetX?b.offsetX:b.layerX;this.offsetY=Nb||void 0!==b.offsetY?b.offsetY:b.layerY;this.clientX=void 0!==b.clientX?b.clientX:b.pageX;this.clientY=void 0!==b.clientY?b.clientY:b.pageY;this.screenX=b.screenX||0;this.screenY=b.screenY||0;this.button=b.button;this.keyCode=b.keyCode||0;this.charCode=b.charCode||("keypress"==a?b.keyCode:0);this.ctrlKey=b.ctrlKey;this.altKey=
b.altKey;this.shiftKey=b.shiftKey;this.metaKey=b.metaKey;this.state=b.state;this.Fb=b;b.defaultPrevented&&this.preventDefault()}};E(Ob,qa);Ob.prototype.preventDefault=function(){Ob.K.preventDefault.call(this);var b=this.Fb;if(b.preventDefault)b.preventDefault();else if(b.returnValue=!1,id)try{if(b.ctrlKey||112<=b.keyCode&&123>=b.keyCode)b.keyCode=-1}catch(m){}};Ob.prototype.l=function(){};var Za="closure_listenable_"+(1E6*Math.random()|0),ba=function(b){return!(!b||!b[Za])},Rd=0,kd=function(b,m,a,
d,c){this.O=b;this.proxy=null;this.src=m;this.type=a;this.sa=!!d;this.va=c;this.key=++Rd;this.removed=this.ta=!1},jb=function(b){b.removed=!0;b.O=null;b.proxy=null;b.src=null;b.va=null},ra=function(b){this.src=b;this.k={};this.ca=0};ra.prototype.add=function(b,m,a,d,c){var e=b.toString();(b=this.k[e])||(b=this.k[e]=[],this.ca++);var g=La(b,m,d,c);-1<g?(m=b[g],a||(m.ta=!1)):(m=new kd(m,this.src,e,!!d,c),m.ta=a,b.push(m));return m};ra.prototype.remove=function(b,m,a,d){b=b.toString();if(!(b in this.k))return!1;
var c=this.k[b];m=La(c,m,a,d);return-1<m?(jb(c[m]),G.splice.call(c,m,1),0==c.length&&(delete this.k[b],this.ca--),!0):!1};var xa=function(b,m){var a=m.type;if(!(a in b.k))return!1;var d=eb(b.k[a],m);d&&(jb(m),0==b.k[a].length&&(delete b.k[a],b.ca--));return d};ra.prototype.removeAll=function(b){b=b&&b.toString();var m=0,a;for(a in this.k)if(!b||a==b){for(var d=this.k[a],c=0;c<d.length;c++)++m,jb(d[c]);delete this.k[a];this.ca--}return m};ra.prototype.aa=function(b,m,a,d){b=this.k[b.toString()];var c=
-1;b&&(c=La(b,m,a,d));return-1<c?b[c]:null};var La=function(b,a,d,c){for(var e=0;e<b.length;++e){var g=b[e];if(!g.removed&&g.O==a&&g.sa==!!d&&g.va==c)return e}return-1},qe="closure_lm_"+(1E6*Math.random()|0),d={},Le=0,ia=function(b,a,d,c,e){if(l(a)){for(var g=0;g<a.length;g++)ia(b,a[g],d,c,e);return null}d=hc(d);return ba(b)?b.listen(a,d,c,e):H(b,a,d,!1,c,e)},H=function(b,a,d,c,e,g){if(!a)throw Error("Invalid event type");var n=!!e,f=Pb(b);f||(b[qe]=f=new ra(b));d=f.add(a,d,c,e,g);if(d.proxy)return d;
c=uf();d.proxy=c;c.src=b;c.O=d;b.addEventListener?b.addEventListener(a.toString(),c,n):b.attachEvent(Ma(a.toString()),c);Le++;return d},uf=function(){var b=ic,a=Lc?function(d){return b.call(a.src,a.O,d)}:function(d){d=b.call(a.src,a.O,d);if(!d)return d};return a},Me=function(b,a,d,c,e){if(l(a)){for(var g=0;g<a.length;g++)Me(b,a[g],d,c,e);return null}d=hc(d);return ba(b)?b.cb(a,d,c,e):H(b,a,d,!0,c,e)},Ne=function(b,a,d,c,e){if(l(a))for(var g=0;g<a.length;g++)Ne(b,a[g],d,c,e);else d=hc(d),ba(b)?b.Wa(a,
d,c,e):b&&(b=Pb(b))&&(a=b.aa(a,d,!!c,e))&&kb(a)},kb=function(b){if(p(b)||!b||b.removed)return!1;var a=b.src;if(ba(a))return xa(a.D,b);var d=b.type,c=b.proxy;a.removeEventListener?a.removeEventListener(d,c,b.sa):a.detachEvent&&a.detachEvent(Ma(d),c);Le--;(d=Pb(a))?(xa(d,b),0==d.ca&&(d.src=null,a[qe]=null)):jb(b);return!0},Ma=function(b){return b in d?d[b]:d[b]="on"+b},Pe=function(b,a,d,c){var e=1;if(b=Pb(b))if(a=b.k[a.toString()])for(a=a.concat(),b=0;b<a.length;b++){var g=a[b];g&&g.sa==d&&!g.removed&&
(e&=!1!==Oe(g,c))}return Boolean(e)},Oe=function(b,a){var d=b.O,c=b.va||b.src;b.ta&&kb(b);return d.call(c,a)},ic=function(b,a){if(b.removed)return!0;if(!Lc){var d;if(!(d=a))a:{d=["window","event"];for(var c=k,e;e=d.shift();)if(null!=c[e])c=c[e];else{d=null;break a}d=c}e=d;d=new Ob(e,this);c=!0;if(!(0>e.keyCode||void 0!=e.returnValue)){a:{var g=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(n){g=!0}if(g||void 0==e.returnValue)e.returnValue=!0}e=[];for(g=d.currentTarget;g;g=g.parentNode)e.push(g);
for(var g=b.type,f=e.length-1;!d.X&&0<=f;f--)d.currentTarget=e[f],c&=Pe(e[f],g,!0,d);for(f=0;!d.X&&f<e.length;f++)d.currentTarget=e[f],c&=Pe(e[f],g,!1,d)}return c}return Oe(b,new Ob(a,this))},Pb=function(b){b=b[qe];return b instanceof ra?b:null},jc="__closure_events_fn_"+(1E9*Math.random()>>>0),hc=function(b){if(w(b))return b;b[jc]||(b[jc]=function(a){return b.handleEvent(a)});return b[jc]},X=function(){Ba.call(this);this.D=new ra(this);this.mc=this;this.Ra=null};E(X,Ba);X.prototype[Za]=!0;c=X.prototype;
c.addEventListener=function(b,a,d,c){ia(this,b,a,d,c)};c.removeEventListener=function(b,a,d,c){Ne(this,b,a,d,c)};c.dispatchEvent=function(b){var a,d=this.Ra;if(d){a=[];for(var c=1;d;d=d.Ra)a.push(d),++c}d=this.mc;c=b.type||b;if(n(b))b=new qa(b,d);else if(b instanceof qa)b.target=b.target||d;else{var e=b;b=new qa(c,d);Jb(b,e)}var e=!0,g;if(a)for(var f=a.length-1;!b.X&&0<=f;f--)g=b.currentTarget=a[f],e=Mc(g,c,!0,b)&&e;b.X||(g=b.currentTarget=d,e=Mc(g,c,!0,b)&&e,b.X||(e=Mc(g,c,!1,b)&&e));if(a)for(f=
0;!b.X&&f<a.length;f++)g=b.currentTarget=a[f],e=Mc(g,c,!1,b)&&e;return e};c.l=function(){X.K.l.call(this);this.D&&this.D.removeAll(void 0);this.Ra=null};c.listen=function(b,a,d,c){return this.D.add(String(b),a,!1,d,c)};c.cb=function(b,a,d,c){return this.D.add(String(b),a,!0,d,c)};c.Wa=function(b,a,d,c){return this.D.remove(String(b),a,d,c)};var Mc=function(b,a,d,c){a=b.D.k[String(a)];if(!a)return!0;a=a.concat();for(var e=!0,g=0;g<a.length;++g){var f=a[g];if(f&&!f.removed&&f.sa==d){var n=f.O,k=f.va||
f.src;f.ta&&xa(b.D,f);e=!1!==n.call(k,c)&&e}}return e&&0!=c.nb};X.prototype.aa=function(b,a,d,c){return this.D.aa(String(b),a,d,c)};var ld=function(b){k.setTimeout(function(){throw b;},0)},kc,md=function(){var b=k.MessageChannel;"undefined"===typeof b&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&(b=function(){var b=document.createElement("iframe");b.style.display="none";b.src="";document.documentElement.appendChild(b);var a=b.contentWindow,b=a.document;b.open();b.write("");
b.close();var d="callImmediate"+Math.random(),m="file:"==a.location.protocol?"*":a.location.protocol+"//"+a.location.host,b=x(function(b){if(("*"==m||b.origin==m)&&b.data==d)this.port1.onmessage()},this);a.addEventListener("message",b,!1);this.port1={};this.port2={postMessage:function(){a.postMessage(d,m)}}});if("undefined"!==typeof b&&!aa("Trident")&&!aa("MSIE")){var d=new b,c={},e=c;d.port1.onmessage=function(){if(a(c.next)){c=c.next;var b=c.Hb;c.Hb=null;b()}};return function(b){e.next={Hb:b};e=
e.next;d.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("script")?function(b){var a=document.createElement("script");a.onreadystatechange=function(){a.onreadystatechange=null;a.parentNode.removeChild(a);a=null;b();b=null};document.documentElement.appendChild(a)}:function(b){k.setTimeout(b,0)}},Oa=function(b,a){Na||Qb();ua||(Na(),ua=!0);Nc.push(new vf(b,a))},Na,Qb=function(){if(k.Promise&&k.Promise.resolve){var b=k.Promise.resolve();Na=function(){b.then(wb)}}else Na=
function(){var b=wb;!w(k.setImmediate)||k.Window&&k.Window.prototype.setImmediate==k.setImmediate?(kc||(kc=md()),kc(b)):k.setImmediate(b)}},ua=!1,Nc=[],wb=function(){for(;Nc.length;){var b=Nc;Nc=[];for(var a=0;a<b.length;a++){var d=b[a];try{d.Ac.call(d.scope)}catch(c){ld(c)}}}ua=!1},vf=function(b,a){this.Ac=b;this.scope=a},lb=function(b){b.prototype.then=b.prototype.then;b.prototype.$goog_Thenable=!0},Qe=function(b){if(!b)return!1;try{return!!b.$goog_Thenable}catch(a){return!1}},$a=function(b,a){this.n=
0;this.B=void 0;this.o=this.p=null;this.wa=this.Ma=!1;try{var d=this;b.call(a,function(b){mb(d,2,b)},function(b){mb(d,3,b)})}catch(c){mb(this,3,c)}};$a.prototype.then=function(b,a,d){return Da(this,w(b)?b:null,w(a)?a:null,d)};lb($a);$a.prototype.cancel=function(b){0==this.n&&Oa(function(){var a=new xb(b);T(this,a)},this)};var T=function(b,a){if(0==b.n)if(b.p){var d=b.p;if(d.o){for(var c=0,e=-1,g=0,f;f=d.o[g];g++)if(f=f.xa)if(c++,f==b&&(e=g),0<=e&&1<c)break;0<=e&&(0==d.n&&1==c?T(d,a):(c=d.o.splice(e,
1)[0],Oc(d),c.Oa(a)))}}else mb(b,3,a)},wf=function(b,a){b.o&&b.o.length||2!=b.n&&3!=b.n||b.Ma||(b.Ma=!0,Oa(b.vc,b));b.o||(b.o=[]);b.o.push(a)},Da=function(b,d,c,e){var g={xa:null,kb:null,Oa:null};g.xa=new $a(function(b,f){g.kb=d?function(a){try{var c=d.call(e,a);b(c)}catch(g){f(g)}}:b;g.Oa=c?function(d){try{var m=c.call(e,d);!a(m)&&d instanceof xb?f(d):b(m)}catch(g){f(g)}}:f});g.xa.p=b;wf(b,g);return g.xa};$a.prototype.xb=function(b){this.n=0;mb(this,2,b)};$a.prototype.yb=function(b){this.n=0;mb(this,
3,b)};var mb=function(b,a,d){if(0==b.n){if(b==d)a=3,d=new TypeError("Promise cannot resolve to itself");else{if(Qe(d)){b.n=1;d.then(b.xb,b.yb,b);return}if(u(d))try{var c=d.then;if(w(c)){Pc(b,d,c);return}}catch(e){a=3,d=e}}b.B=d;b.n=a;b.Ma||(b.Ma=!0,Oa(b.vc,b));3!=a||d instanceof xb||nd(b,d)}},Pc=function(b,a,d){b.n=1;var c=!1,e=function(a){c||(c=!0,b.xb(a))},g=function(a){c||(c=!0,b.yb(a))};try{d.call(a,e,g)}catch(f){g(f)}};$a.prototype.vc=function(){for(;this.o&&this.o.length;){var b=this.o;this.o=
[];for(var a=0;a<b.length;a++){var d=b[a],c=this.B;2==this.n?d.kb(c):(Oc(this),d.Oa(c))}}this.Ma=!1};var Oc=function(b){for(;b&&b.wa;b=b.p)b.wa=!1},nd=function(b,a){b.wa=!0;Oa(function(){b.wa&&xf.call(null,a)})},xf=ld,xb=function(b){R.call(this,b)};E(xb,R);xb.prototype.name="cancel";var U=function(b,a){this.ma=[];this.ib=b;this.hb=a||null;this.Z=this.A=!1;this.B=void 0;this.La=this.Nb=this.Ka=!1;this.na=0;this.p=null;this.Ja=0};U.prototype.cancel=function(b){if(this.A)this.B instanceof U&&this.B.cancel();
else{if(this.p){var a=this.p;delete this.p;b?a.cancel(b):(a.Ja--,0>=a.Ja&&a.cancel())}this.ib?this.ib.call(this.hb,this):this.La=!0;this.A||this.C(new Rb)}};U.prototype.jb=function(b,a){this.Ka=!1;yb(this,b,a)};var yb=function(b,a,d){b.A=!0;b.B=d;b.Z=!a;od(b)},nb=function(b){if(b.A){if(!b.La)throw new zb;b.La=!1}};U.prototype.t=function(b){nb(this);yb(this,!0,b)};U.prototype.C=function(b){nb(this);yb(this,!1,b)};U.prototype.N=function(b,a){return ob(this,b,null,a)};var ob=function(b,a,d,c){b.ma.push([a,
d,c]);b.A&&od(b);return b};U.prototype.then=function(b,a,d){var c,e,g=new $a(function(b,a){c=b;e=a});ob(this,c,function(b){b instanceof Rb?g.cancel():e(b)});return g.then(b,a,d)};lb(U);var lc=function(b){var a=new U;ob(b,a.t,a.C,a);return a},pd=function(b){return pa(b.ma,function(b){return w(b[1])})},od=function(b){if(b.na&&b.A&&pd(b)){var d=b.na,c=mc[d];c&&(k.clearTimeout(c.pa),delete mc[d]);b.na=0}b.p&&(b.p.Ja--,delete b.p);for(var d=b.B,e=c=!1;b.ma.length&&!b.Ka;){var g=b.ma.shift(),f=g[0],n=g[1],
g=g[2];if(f=b.Z?n:f)try{var l=f.call(g||b.hb,d);a(l)&&(b.Z=b.Z&&(l==d||l instanceof Error),b.B=d=l);Qe(d)&&(e=!0,b.Ka=!0)}catch(p){d=p,b.Z=!0,pd(b)||(c=!0)}}b.B=d;e&&(l=x(b.jb,b,!0),e=x(b.jb,b,!1),d instanceof U?(ob(d,l,e),d.Nb=!0):d.then(l,e));c&&(d=new qd(d),mc[d.pa]=d,b.na=d.pa)},Sb=function(b){var a=new U;a.t(b);return a},Td=function(){var b=Sd,a=new U;a.C(b);return a},zb=function(){R.call(this)};E(zb,R);zb.prototype.message="Deferred has already fired";zb.prototype.name="AlreadyCalledError";
var Rb=function(){R.call(this)};E(Rb,R);Rb.prototype.message="Deferred was canceled";Rb.prototype.name="CanceledError";var qd=function(b){this.pa=k.setTimeout(x(this.qc,this),0);this.ka=b};qd.prototype.qc=function(){delete mc[this.pa];throw this.ka;};var mc={},nc=function(b){this.ab=[];this.g=b};nc.prototype.V=function(b){if(!w(b))throw Error("Invalid filter. Must be a function.");this.ab.push(b)};nc.prototype.send=function(b,a){for(var d=new pb(b,a),c=0;c<this.ab.length&&(this.ab[c](d),!d.Za);c++);
return d.Za?Sb():this.g.send(b,a)};var pb=function(b,a){this.sc=b;this.rc=a;this.Za=!1};pb.prototype.Ib=function(){return this.sc};pb.prototype.W=function(){return this.rc};pb.prototype.cancel=function(){this.Za=!0};var oc=function(b,a){this.width=b;this.height=a};oc.prototype.clone=function(){return new oc(this.width,this.height)};oc.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};!Ya&&!y||y&&y&&9<=gc||Ya&&K("1.9.1");y&&K("9");var rd=
{id:"apiVersion",name:"v",valueType:"text",maxLength:void 0,defaultValue:void 0},Qc={id:"appName",name:"an",valueType:"text",maxLength:100,defaultValue:void 0},Rc={id:"appVersion",name:"av",valueType:"text",maxLength:100,defaultValue:void 0},Ea={id:"clientId",name:"cid",valueType:"text",maxLength:void 0,defaultValue:void 0},Ud={id:"language",name:"ul",valueType:"text",maxLength:20,defaultValue:void 0},pc={id:"libVersion",name:"_v",valueType:"text",maxLength:void 0,defaultValue:void 0},qc={id:"sampleRateOverride",
name:"usro",valueType:"integer",maxLength:void 0,defaultValue:void 0},sd={id:"screenColors",name:"sd",valueType:"text",maxLength:20,defaultValue:void 0},qb={id:"screenResolution",name:"sr",valueType:"text",maxLength:20,defaultValue:void 0},rc={id:"trackingId",name:"tid",valueType:"text",maxLength:void 0,defaultValue:void 0},td={id:"viewportSize",name:"vp",valueType:"text",maxLength:20,defaultValue:void 0},ud={Sc:rd,Vc:Qc,Wc:Rc,dd:Ea,wd:Ud,xd:pc,Dd:qc,Ed:sd,Fd:qb,Sd:rc,Zd:td},vd=function(b){if(!n(b))return b;
var a=Vd(b,Gc);if(u(a))return a;a=Vd(b,ud);if(u(a))return a;a=/^dimension(\d+)$/.exec(b);if(null!==a)return Hc(parseInt(a[1],10));a=/^metric(\d+)$/.exec(b);if(null!==a)return Ic(parseInt(a[1],10));throw Error(b+" is not a valid parameter name.");},Vd=function(b,a){var d=Ib(a,function(a){return a.id==b&&"metric"!=b&&"dimension"!=b});return u(d)?d:null},va=function(b,a){this.bc=a;this.r=a.Ta();this.ub=new Y;this.Ya=!1};c=va.prototype;c.set=function(b,a){if(null==a)throw Error("Value must be defined and not null. Parameter="+
b.id);var d=vd(b);this.ub.set(d,a)};c.V=function(b){this.bc.V(b)};c.send=function(b,a){if(b instanceof M)return b.send(this);var d=this.ub.clone();a instanceof Y?d.la(a):u(a)&&Wa(a,function(b,a){null!=b&&d.set(vd(a),b)},this);this.Ya&&(this.Ya=!1,d.set(Fc,"start"));return this.r.send(b,d)};c.Hc=function(b){var a={description:b};this.set(bc,b);return this.send("appview",a)};c.Ic=function(b,a,d,c){return this.send("event",{eventCategory:b,eventAction:a,eventLabel:d,eventValue:c})};c.Kc=function(b,a,
d){return this.send("social",{socialNetwork:b,socialAction:a,socialTarget:d})};c.Jc=function(b,a){return this.send("exception",{exDescription:b,exFatal:a})};c.Eb=function(b,a,d,c,e){return this.send("timing",{timingCategory:b,timingVar:a,timingLabel:c,timingValue:d,sampleRateOverride:e})};c.Bc=function(){this.Ya=!0};c.Nc=function(b,a,d,c){return new sc(this,b,a,d,c)};var sc=function(b,a,d,c,e){this.Bb=b;this.hc=a;this.kc=d;this.ic=c;this.qa=e;this.jc=D()};sc.prototype.send=function(){var b=this.Bb.Eb(this.hc,
this.kc,D()-this.jc,this.ic,this.qa);this.Bb=null;return b};var Ab=function(b,a,d,c,e){this.gc=b;this.dc=a;this.ec=d;this.e=c;this.fc=e};Ab.prototype.Dc=function(b){var a=new va(0,this.fc.create());a.set(pc,this.gc);a.set(rd,1);a.set(Qc,this.dc);a.set(Rc,this.ec);a.set(rc,b);(b=navigator.language||navigator.browserLanguage)&&a.set(Ud,b);(b=screen.colorDepth+"-bit")&&a.set(sd,b);(b=[screen.width,screen.height].join("x"))&&a.set(qb,b);b=window.document;b="CSS1Compat"==b.compatMode?b.documentElement:
b.body;b=new oc(b.clientWidth,b.clientHeight);(b=[b.width,b.height].join("x"))&&a.set(td,b);return a};Ab.prototype.Cc=function(){return lc(this.e.Y)};var ja=function(b){this.tc=b};ja.prototype.send=function(b,a){this.tc.push({Ub:b,Vb:a});return Sb()};var ab=function(b,a,d){this.e=b;this.T=[];this.L={enabled:new ja(this.T),disabled:d};this.r=this.L.enabled;ob(lc(this.e.Y),z(this.Rb,a),this.Qb,this)};ab.prototype.Rb=function(b,a){if(null===this.T)throw Error("Channel setup already completed.");if(a!=
this.e)throw Error("Yikes! Multiple settings instances!");this.L.enabled=b();Sc(this);P(this.T,function(b){this.send(b.Ub,b.Vb)},this);this.T=null;yf(this.e,x(this.Yb,this))};ab.prototype.Qb=function(){if(null===this.T)throw Error("Channel setup already completed.");this.r=this.L.enabled=this.L.disabled;this.T=null};ab.prototype.send=function(b,a){return this.r.send(b,a)};var Sc=function(b){b.r=b.e.ya()?b.L.enabled:b.L.disabled};ab.prototype.Yb=function(b){switch(b){case "analytics.tracking-permitted":Sc(this)}};
var Tb=function(b,a,d,c,e,g){U.call(this,e,g);this.Na=b;this.Pa=[];this.lb=!!a;this.Pb=!!d;this.Ob=!!c;for(a=this.mb=0;a<b.length;a++)ob(b[a],x(this.tb,this,a,!0),x(this.tb,this,a,!1));0!=b.length||this.lb||this.t(this.Pa)};E(Tb,U);Tb.prototype.tb=function(b,a,d){this.mb++;this.Pa[b]=[a,d];this.A||(this.lb&&a?this.t([b,d]):this.Pb&&!a?this.C(d):this.mb==this.Na.length&&this.t(this.Pa));this.Ob&&!a&&(d=null);return d};Tb.prototype.C=function(b){Tb.K.C.call(this,b);for(b=0;b<this.Na.length;b++)this.Na[b].cancel()};
var Tc=function(b){return(new Tb(b,!1,!0)).N(function(b){for(var a=[],d=0;d<b.length;d++)a[d]=b[d][1];return a})},la=function(b){this.m=b;this.qa=100;this.ob=[];this.U=this.Qa=null;this.Y=Wd(this);this.Y.N(function(){this.pb=ia(this.m,"a",x(this.Sb,this))},this)},Wd=function(b){return wd(b).N(function(){return this},b)},wd=function(b){return Tc([Xd(b),tc(b)])};la.prototype.Sb=function(){Pa(this);var b=rb(this),a=this.ya();wd(this).N(function(){if(b!=rb(this))throw Error("User ID changed unexpectedly!");
a!=this.ya()&&xd(this)},this)};var yf=function(b,a){Pa(b);b.ob.push(a)};la.prototype.Mc=function(b){Pa(this);var a=this.U!=b;this.U=b;this.m.set("analytics.tracking-permitted",b.toString());a&&xd(this)};la.prototype.ya=function(){Pa(this);var b;if(b=this.U)b=k._gaUserPrefs,b=!(b&&b.ioo&&b.ioo());return b};var Xd=function(b){return b.m.get("analytics.tracking-permitted").N(function(b){this.U=!0;if(a(b))switch(b){case "true":this.U=!0;break;case "false":this.U=!1}},b)},rb=function(b){Pa(b);if(!n(b.Qa))throw Error("Invalid state. UserID is not a string.");
return b.Qa},tc=function(b){return b.m.get("analytics.user-id").N(function(b){if(!a(b)){b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split("");for(var d=0,c=b.length;d<c;d++)switch(b[d]){case "x":b[d]=Math.floor(16*Math.random()).toString(16);break;case "y":b[d]=(Math.floor(4*Math.random())+8).toString(16)}b=b.join("");this.m.set("analytics.user-id",b)}this.Qa=b},b)};la.prototype.Lc=function(b){Pa(this);this.qa=b};var Yd=function(b){Pa(b);return b.qa},xd=function(b){P(b.ob,function(b){b("analytics.tracking-permitted")})};
la.prototype.$=function(){null!=this.pb&&kb(this.pb)};var Pa=function(b){if(!lc(b.Y).A)throw Error("Settings object accessed prior to entering ready state.");},Ub=function(){X.call(this);this.P="google-analytics";this.m=chrome.storage.local;chrome.storage.onChanged.addListener(x(this.$a,this))};E(Ub,X);Ub.prototype.$a=function(b){yd(this,b)&&this.dispatchEvent("a")};var yd=function(b,a){return pa(Hb(a),function(b){return 0==b.lastIndexOf(this.P,0)},b)};Ub.prototype.get=function(b){var a=new U,d=this.P+
"."+b;this.m.get(d,function(b){chrome.runtime.lastError?a.C(chrome.runtime.lastError):(b=b[d],a.t(null!=b?b.toString():void 0))});return a};Ub.prototype.set=function(b,a){var d=new U,c={};c[this.P+"."+b]=a;this.m.set(c,function(){chrome.runtime.lastError?d.C(chrome.runtime.lastError):d.t()});return d};var Bb=function(b,a){X.call(this);this.za=b||1;this.S=a||k;this.Sa=x(this.nc,this);this.Ua=D()};E(Bb,X);c=Bb.prototype;c.enabled=!1;c.h=null;c.nc=function(){if(this.enabled){var b=D()-this.Ua;0<b&&b<
.8*this.za?this.h=this.S.setTimeout(this.Sa,this.za-b):(this.h&&(this.S.clearTimeout(this.h),this.h=null),this.dispatchEvent("tick"),this.enabled&&(this.h=this.S.setTimeout(this.Sa,this.za),this.Ua=D()))}};c.start=function(){this.enabled=!0;this.h||(this.h=this.S.setTimeout(this.Sa,this.za),this.Ua=D())};c.stop=function(){this.enabled=!1;this.h&&(this.S.clearTimeout(this.h),this.h=null)};c.l=function(){Bb.K.l.call(this);this.stop();delete this.S};var Uc=function(b,a,d){if(w(b))d&&(b=x(b,d));else if(b&&
"function"==typeof b.handleEvent)b=x(b.handleEvent,b);else throw Error("Invalid listener argument");return 2147483647<a?-1:k.setTimeout(b,a||0)},Vb=function(){X.call(this);this.P="google-analytics";this.m=window.localStorage;ia(window,"storage",x(this.$a,this),!1)};E(Vb,X);Vb.prototype.get=function(b){var a=zd(this,b),d=new U;Uc(function(){d.t(a)});return d};Vb.prototype.set=function(b,a){a!=zd(this,b)&&(this.m.setItem(this.P+"."+b,a),this.dispatchEvent("a"));var d=new U;Uc(function(){d.t()});return d};
Vb.prototype.$a=function(b){b instanceof StorageEvent||"storage"!=b.type||(b=window.event);if(!("storageArea"in b))throw Error('"storageArea" property missing from event type: '+b.type);if(!("key"in b))throw Error('"key" property missing from event type: '+b.type);b.storageArea==this.m&&0==b.key.lastIndexOf(this.P,0)&&this.dispatchEvent("a")};var zd=function(b,a){var d=b.m.getItem(b.P+"."+a);return null!=d?d:void 0},bb=function(){};bb.$b=function(){return bb.Kb?bb.Kb:bb.Kb=new bb};bb.prototype.send=
function(){return Sb()};var Fa=function(b,a){this.Xa=[];var d=x(function(){this.Ba=new nc(a.Ta());P(this.Xa,function(b){this.Ba.V(b)},this);this.Xa=null;return this.Ba},this);this.r=new ab(b,d,bb.$b())};Fa.prototype.Ta=function(){return this.r};Fa.prototype.V=function(b){this.Ba?this.Ba.V(b):this.Xa.push(b)};var Zd=function(b,a){this.e=b;this.oc=a};Zd.prototype.create=function(){return new Fa(this.e,this.oc)};var cb=function(b){Ba.call(this);this.Va=b;this.b={}};E(cb,Ba);var $d=[];cb.prototype.listen=
function(b,a,d,c){l(a)||(a&&($d[0]=a.toString()),a=$d);for(var e=0;e<a.length;e++){var g=ia(b,a[e],d||this.handleEvent,c||!1,this.Va||this);if(!g)break;this.b[g.key]=g}return this};cb.prototype.cb=function(b,a,d,c){return uc(this,b,a,d,c)};var uc=function(b,a,d,c,e,g){if(l(d))for(var f=0;f<d.length;f++)uc(b,a,d[f],c,e,g);else{a=Me(a,d,c||b.handleEvent,e,g||b.Va||b);if(!a)return b;b.b[a.key]=a}return b};cb.prototype.Wa=function(b,a,d,c,e){if(l(a))for(var g=0;g<a.length;g++)this.Wa(b,a[g],d,c,e);else d=
d||this.handleEvent,e=e||this.Va||this,d=hc(d),c=!!c,(a=ba(b)?b.aa(a,d,c,e):b?(b=Pb(b))?b.aa(a,d,c,e):null:null)&&(kb(a),delete this.b[a.key]);return this};cb.prototype.removeAll=function(){Wa(this.b,kb);this.b={}};cb.prototype.l=function(){cb.K.l.call(this);this.removeAll()};cb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var C=function(){X.call(this);this.ua=new cb(this);ha&&(jd?this.ua.listen(pe?document.body:window,["online","offline"],this.vb):(this.wb=
ha?navigator.onLine:!0,this.h=new Bb(250),this.ua.listen(this.h,"tick",this.cc),this.h.start()))};E(C,X);C.prototype.cc=function(){var b=ha?navigator.onLine:!0;b!=this.wb&&(this.wb=b,this.vb())};C.prototype.vb=function(){this.dispatchEvent((ha?navigator.onLine:1)?"online":"offline")};C.prototype.l=function(){C.K.l.call(this);this.ua.$();this.ua=null;this.h&&(this.h.$(),this.h=null)};var Vc=function(b,a){this.e=b;this.g=a};Vc.prototype.send=function(b,a){a.set(Ea,rb(this.e));return this.g.send(b,a)};
var vc=function(b){this.g=b};vc.prototype.send=function(b,a){Wb(a);Ga(a);return this.g.send(b,a)};var Wb=function(b){hb(b,function(d,c){a(d.maxLength)&&"text"==d.valueType&&0<d.maxLength&&c.length>d.maxLength&&b.set(d,c.substring(0,d.maxLength))})},Ga=function(b){hb(b,function(d,c){a(d.defaultValue)&&c==d.defaultValue&&b.remove(d)})},Sd={status:"device-offline",Ca:void 0},re={status:"rate-limited",Ca:void 0},se={status:"sampled-out",Ca:void 0},te={status:"sent",Ca:void 0},Ad=function(b,a){this.Zb=
b;this.g=a};Ad.prototype.send=function(b,a){var d;d=this.Zb;var c=d.rb(),e=Math.floor((c-d.qb)*d.Wb);0<e&&(d.da=Math.min(d.da+e,d.Xb),d.qb=c);1>d.da?d=!1:(--d.da,d=!0);return d||"item"==b||"transaction"==b?this.g.send(b,a):Sb(re)};var Qa=function(){this.da=60;this.Xb=500;this.Wb=5E-4;this.rb=function(){return(new Date).getTime()};this.qb=this.rb()},Ra=function(b,a){this.e=b;this.g=a};Ra.prototype.send=function(b,a){var d=a.get(Ea),d=parseInt(d.split("-")[1],16),c;"timing"!=b?c=Yd(this.e):((c=a.get(qc))&&
a.remove(qc),c=c||Yd(this.e));return d<655.36*c?this.g.send(b,a):Sb(se)};var Xb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,wc=Nb,Wc=function(b,a){if(wc){wc=!1;var d=k.location;if(d){var c=d.href;if(c&&(c=(c=Wc(3,c))?decodeURI(c):c)&&c!=d.hostname)throw wc=!0,Error();}}return a.match(Xb)[b]||null},Bd=function(){};Bd.prototype.Gb=null;var Yb=function(b){var a;(a=b.Gb)||(a={},Cd(b)&&(a[0]=!0,a[1]=!0),a=b.Gb=a);return a},Xc,Dd=function(){};
E(Dd,Bd);var Ed=function(b){return(b=Cd(b))?new ActiveXObject(b):new XMLHttpRequest},Cd=function(b){if(!b.Jb&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var a=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],d=0;d<a.length;d++){var c=a[d];try{return new ActiveXObject(c),b.Jb=c}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return b.Jb};Xc=new Dd;var ya=function(b){X.call(this);
this.headers=new fa;this.ja=b||null;this.G=!1;this.ga=this.a=null;this.fa=this.Ga="";this.J=this.Fa=this.ea=this.Ia=!1;this.ia=0;this.ha=null;this.eb="";this.Ha=this.Mb=!1};E(ya,X);var ma=/^https?$/i,ae=["POST","PUT"],Yc=[],Fd=function(b,a,d){var c=new ya;Yc.push(c);a&&c.listen("complete",a);c.cb("ready",c.uc);c.send(b,"POST",d,void 0)};ya.prototype.uc=function(){this.$();eb(Yc,this)};ya.prototype.send=function(b,a,d,c){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+
this.Ga+"; newUri="+b);a=a?a.toUpperCase():"GET";this.Ga=b;this.fa="";this.Ia=!1;this.G=!0;this.a=this.ja?Ed(this.ja):Ed(Xc);this.ga=this.ja?Yb(this.ja):Yb(Xc);this.a.onreadystatechange=x(this.fb,this);try{this.Fa=!0,this.a.open(a,String(b),!0),this.Fa=!1}catch(e){this.ka(5,e);return}b=d||"";var g=this.headers.clone();c&&hd(c,function(b,a){g.set(a,b)});c=I(g.H());d=k.FormData&&b instanceof k.FormData;!(0<=v(ae,a))||c||d||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");g.forEach(function(b,
a){this.a.setRequestHeader(a,b)},this);this.eb&&(this.a.responseType=this.eb);"withCredentials"in this.a&&(this.a.withCredentials=this.Mb);try{Gd(this),0<this.ia&&((this.Ha=be(this.a))?(this.a.timeout=this.ia,this.a.ontimeout=x(this.gb,this)):this.ha=Uc(this.gb,this.ia,this)),this.ea=!0,this.a.send(b),this.ea=!1}catch(e){this.ka(5,e)}};var be=function(b){return y&&K(9)&&p(b.timeout)&&a(b.ontimeout)},Nd=function(b){return"content-type"==b.toLowerCase()};ya.prototype.gb=function(){"undefined"!=typeof f&&
this.a&&(this.fa="Timed out after "+this.ia+"ms, aborting",this.dispatchEvent("timeout"),this.abort(8))};ya.prototype.ka=function(b,a){this.G=!1;this.a&&(this.J=!0,this.a.abort(),this.J=!1);this.fa=a;xc(this);yc(this)};var xc=function(b){b.Ia||(b.Ia=!0,b.dispatchEvent("complete"),b.dispatchEvent("error"))};ya.prototype.abort=function(){this.a&&this.G&&(this.G=!1,this.J=!0,this.a.abort(),this.J=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),yc(this))};ya.prototype.l=function(){this.a&&
(this.G&&(this.G=!1,this.J=!0,this.a.abort(),this.J=!1),yc(this,!0));ya.K.l.call(this)};ya.prototype.fb=function(){this.ba||(this.Fa||this.ea||this.J?ce(this):this.lc())};ya.prototype.lc=function(){ce(this)};var ce=function(b){if(b.G&&"undefined"!=typeof f&&(!b.ga[1]||4!=Zb(b)||2!=Zc(b)))if(b.ea&&4==Zb(b))Uc(b.fb,0,b);else if(b.dispatchEvent("readystatechange"),4==Zb(b)){b.G=!1;try{var a=Zc(b),d,c;a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1}if(!(d=
c)){var e;if(e=0===a){var g=Wc(1,String(b.Ga));if(!g&&self.location)var n=self.location.protocol,g=n.substr(0,n.length-1);e=!ma.test(g?g.toLowerCase():"")}d=e}if(d)b.dispatchEvent("complete"),b.dispatchEvent("success");else{var k;try{k=2<Zb(b)?b.a.statusText:""}catch(l){k=""}b.fa=k+" ["+Zc(b)+"]";xc(b)}}finally{yc(b)}}},yc=function(b,a){if(b.a){Gd(b);var d=b.a,c=b.ga[0]?e:null;b.a=null;b.ga=null;a||b.dispatchEvent("ready");try{d.onreadystatechange=c}catch(g){}}},Gd=function(b){b.a&&b.Ha&&(b.a.ontimeout=
null);p(b.ha)&&(k.clearTimeout(b.ha),b.ha=null)},Zb=function(b){return b.a?b.a.readyState:0},Zc=function(b){try{return 2<Zb(b)?b.a.status:-1}catch(a){return-1}},$c=function(b,a,d){this.v=b||null;this.pc=!!d},Db=function(b){if(!b.c&&(b.c=new fa,b.j=0,b.v))for(var a=b.v.split("&"),d=0;d<a.length;d++){var c=a[d].indexOf("="),e=null,g=null;0<=c?(e=a[d].substring(0,c),g=a[d].substring(c+1)):e=a[d];e=decodeURIComponent(e.replace(/\+/g," "));e=Cb(b,e);b.add(e,g?decodeURIComponent(g.replace(/\+/g," ")):"")}};
c=$c.prototype;c.c=null;c.j=null;c.add=function(b,a){Db(this);this.v=null;b=Cb(this,b);var d=this.c.get(b);d||this.c.set(b,d=[]);d.push(a);this.j++;return this};c.remove=function(b){Db(this);b=Cb(this,b);return this.c.R(b)?(this.v=null,this.j-=this.c.get(b).length,this.c.remove(b)):!1};c.R=function(b){Db(this);b=Cb(this,b);return this.c.R(b)};c.H=function(){Db(this);for(var b=this.c.w(),a=this.c.H(),d=[],c=0;c<a.length;c++)for(var e=b[c],g=0;g<e.length;g++)d.push(a[c]);return d};c.w=function(b){Db(this);
var a=[];if(n(b))this.R(b)&&(a=Cc(a,this.c.get(Cb(this,b))));else{b=this.c.w();for(var d=0;d<b.length;d++)a=Cc(a,b[d])}return a};c.set=function(b,a){Db(this);this.v=null;b=Cb(this,b);this.R(b)&&(this.j-=this.c.get(b).length);this.c.set(b,[a]);this.j++;return this};c.get=function(b,a){var d=b?this.w(b):[];return 0<d.length?String(d[0]):a};c.toString=function(){if(this.v)return this.v;if(!this.c)return"";for(var b=[],a=this.c.H(),d=0;d<a.length;d++)for(var c=a[d],e=encodeURIComponent(String(c)),c=this.w(c),
g=0;g<c.length;g++){var f=e;""!==c[g]&&(f+="="+encodeURIComponent(String(c[g])));b.push(f)}return this.v=b.join("&")};c.clone=function(){var b=new $c;b.v=this.v;this.c&&(b.c=this.c.clone(),b.j=this.j);return b};var Cb=function(b,a){var d=String(a);b.pc&&(d=d.toLowerCase());return d},Hd=function(b,a){this.ac=b;this.oa=a};Hd.prototype.send=function(b,a){if(ha&&!navigator.onLine)return Td();var d=new U,c=de(b,a);c.length>this.oa?d.C({status:"payload-too-big",Ca:ec("Encoded hit length == %s, but should be <= %s.",
c.length,this.oa)}):Fd(this.ac,function(){d.t(te)},c);return d};var de=function(b,a){var d=new $c;d.add(ac.name,b);hb(a,function(b,a){d.add(b.name,a.toString())});return d.toString()},ad=function(b,a,d){this.e=b;this.Tb=a;this.oa=d};ad.prototype.Ta=function(){if(!this.r){if(!lc(this.e.Y).A)throw Error("Cannot construct shared channel prior to settings being ready.");new C;var b=new vc(new Hd(this.Tb,this.oa)),a=new Qa;this.r=new Vc(this.e,new Ra(this.e,new Ad(a,b)))}return this.r};var B=new fa,Sa=
function(){if(!q){var b="chrome-extension:"==k.location.protocol?new Ub:new Vb;q=new la(b)}return q};r("goog.async.Deferred",U);r("goog.async.Deferred.prototype.addCallback",U.prototype.N);r("goog.events.EventTarget",X);r("goog.events.EventTarget.prototype.listen",X.prototype.listen);r("analytics.getService",function(b,a){var d=B.get(b,null);if(null===d){if("chrome-extension:"==k.location.protocol)d=chrome.runtime.getManifest().version;else{if(!n(a)||/^[\s\xa0]*$/.test(a))throw Error("Invalid version. Must be non-empty string.");
d=a}var c=Sa();if(!fb){var e=Sa();fb=new Zd(e,new ad(e,"https://www.google-analytics.com/collect",8192))}d=new Ab("ca1.6.0prerelease",b,d,c,fb);B.set(b,d)}return d});r("analytics.internal.GoogleAnalyticsService",Ab);r("analytics.internal.GoogleAnalyticsService.prototype.getTracker",Ab.prototype.Dc);r("analytics.internal.GoogleAnalyticsService.prototype.getConfig",Ab.prototype.Cc);r("analytics.internal.ServiceSettings",la);r("analytics.internal.ServiceSettings.prototype.setTrackingPermitted",la.prototype.Mc);
r("analytics.internal.ServiceSettings.prototype.isTrackingPermitted",la.prototype.ya);r("analytics.internal.ServiceSettings.prototype.setSampleRate",la.prototype.Lc);r("analytics.internal.ServiceTracker",va);r("analytics.internal.ServiceTracker.prototype.send",va.prototype.send);r("analytics.internal.ServiceTracker.prototype.sendAppView",va.prototype.Hc);r("analytics.internal.ServiceTracker.prototype.sendEvent",va.prototype.Ic);r("analytics.internal.ServiceTracker.prototype.sendSocial",va.prototype.Kc);
r("analytics.internal.ServiceTracker.prototype.sendException",va.prototype.Jc);r("analytics.internal.ServiceTracker.prototype.sendTiming",va.prototype.Eb);r("analytics.internal.ServiceTracker.prototype.startTiming",va.prototype.Nc);r("analytics.internal.ServiceTracker.Timing",sc);r("analytics.internal.ServiceTracker.Timing.prototype.send",sc.prototype.send);r("analytics.internal.ServiceTracker.prototype.forceSessionStart",va.prototype.Bc);r("analytics.internal.ServiceTracker.prototype.addFilter",
va.prototype.V);r("analytics.internal.FilterChannel.Hit",pb);r("analytics.internal.FilterChannel.Hit.prototype.getHitType",pb.prototype.Ib);r("analytics.internal.FilterChannel.Hit.prototype.getParameters",pb.prototype.W);r("analytics.internal.FilterChannel.Hit.prototype.cancel",pb.prototype.cancel);r("analytics.ParameterMap",Y);r("analytics.ParameterMap.Entry",Y.Entry);r("analytics.ParameterMap.prototype.set",Y.prototype.set);r("analytics.ParameterMap.prototype.get",Y.prototype.get);r("analytics.ParameterMap.prototype.remove",
Y.prototype.remove);r("analytics.ParameterMap.prototype.toObject",Y.prototype.Lb);r("analytics.HitTypes.APPVIEW","appview");r("analytics.HitTypes.EVENT","event");r("analytics.HitTypes.SOCIAL","social");r("analytics.HitTypes.TRANSACTION","transaction");r("analytics.HitTypes.ITEM","item");r("analytics.HitTypes.TIMING","timing");r("analytics.HitTypes.EXCEPTION","exception");Wa(Gc,function(b){var a=b.id.replace(/[A-Z]/,"_$&").toUpperCase();r("analytics.Parameters."+a,b)});r("analytics.filters.EventLabelerBuilder",
ka);r("analytics.filters.EventLabelerBuilder.prototype.appendToExistingLabel",ka.prototype.xc);r("analytics.filters.EventLabelerBuilder.prototype.stripValue",ka.prototype.Oc);r("analytics.filters.EventLabelerBuilder.prototype.powersOfTwo",ka.prototype.Fc);r("analytics.filters.EventLabelerBuilder.prototype.rangeBounds",ka.prototype.Gc);r("analytics.filters.EventLabelerBuilder.prototype.build",ka.prototype.Da);r("analytics.filters.FilterBuilder",Ja);r("analytics.filters.FilterBuilder.builder",Ka);r("analytics.filters.FilterBuilder.prototype.when",
Ja.prototype.when);r("analytics.filters.FilterBuilder.prototype.whenHitType",Ja.prototype.Ab);r("analytics.filters.FilterBuilder.prototype.whenValue",Ja.prototype.Pc);r("analytics.filters.FilterBuilder.prototype.applyFilter",Ja.prototype.zb);r("analytics.filters.FilterBuilder.prototype.build",Ja.prototype.Da);r("analytics.EventBuilder",M);r("analytics.EventBuilder.builder",function(){return Kc});r("analytics.EventBuilder.prototype.category",M.prototype.yc);r("analytics.EventBuilder.prototype.action",
M.prototype.action);r("analytics.EventBuilder.prototype.label",M.prototype.label);r("analytics.EventBuilder.prototype.value",M.prototype.value);r("analytics.EventBuilder.prototype.dimension",M.prototype.zc);r("analytics.EventBuilder.prototype.metric",M.prototype.Ec);r("analytics.EventBuilder.prototype.send",M.prototype.send)})();define("third_party/googleAnalytics/google-analytics-bundle",function(){});
(function(){function c(a,d){return a.set(d[0],d[1]),a}function f(a,d){return a.add(d),a}function k(a,d,c){switch(c.length){case 0:return a.call(d);case 1:return a.call(d,c[0]);case 2:return a.call(d,c[0],c[1]);case 3:return a.call(d,c[0],c[1],c[2])}return a.apply(d,c)}function a(a,d,c,e){for(var g=-1,f=a.length;++g<f;){var n=a[g];d(e,n,c(n),a)}return e}function e(a,d){for(var c=-1,e=a.length;++c<e&&!1!==d(a[c],c,a););return a}function g(a,d){for(var c=-1,e=a.length;++c<e;)if(!d(a[c],c,a))return!1;
return!0}function l(a,d){for(var c=-1,e=a.length,g=-1,f=[];++c<e;){var n=a[c];d(n,c,a)&&(f[++g]=n)}return f}function t(a,d){return!!a.length&&-1<r(a,d,0)}function n(a,d,c){for(var e=-1,g=a.length;++e<g;)if(c(d,a[e]))return!0;return!1}function p(a,d){for(var c=-1,e=a.length,g=Array(e);++c<e;)g[c]=d(a[c],c,a);return g}function w(a,d){for(var c=-1,e=d.length,g=a.length;++c<e;)a[g+c]=d[c];return a}function u(a,d,c,e){var g=-1,f=a.length;for(e&&f&&(c=a[++g]);++g<f;)c=d(c,a[g],g,a);return c}function N(a,
d,c,e){var g=a.length;for(e&&g&&(c=a[--g]);g--;)c=d(c,a[g],g,a);return c}function F(a,d){for(var c=-1,e=a.length;++c<e;)if(d(a[c],c,a))return!0;return!1}function x(a,d,c){for(var e=-1,g=a.length;++e<g;){var f=a[e],n=d(f);if(null!=n&&(k===q?n===n:c(n,k)))var k=n,l=f}return l}function z(a,d,c,e){var g;return c(a,function(a,c,f){return d(a,c,f)?(g=e?c:a,!1):void 0}),g}function D(a,d,c){for(var e=a.length,g=c?e:-1;c?g--:++g<e;)if(d(a[g],g,a))return g;return-1}function r(a,d,c){if(d!==d)return Gb(a,c);
--c;for(var e=a.length;++c<e;)if(a[c]===d)return c;return-1}function E(a,d,c,e,g){return g(a,function(a,g,f){c=e?(e=!1,a):d(c,a,g,f)}),c}function R(a,d){var c=a.length;for(a.sort(d);c--;)a[c]=a[c].c;return a}function V(a,d){for(var c,e=-1,g=a.length;++e<g;){var f=d(a[e]);f!==q&&(c=c===q?f:c+f)}return c}function ta(a,d){for(var c=-1,e=Array(a);++c<a;)e[c]=d(c);return e}function G(a,d){return p(d,function(d){return[d,a[d]]})}function v(a){return function(d){return a(d)}}function P(a,d){return p(d,function(d){return a[d]})}
function pa(a,d){for(var c=-1,e=a.length;++c<e&&-1<r(d,a[c],0););return c}function S(a,d){for(var c=a.length;c--&&-1<r(d,a[c],0););return c}function I(a){return a&&a.Object===Object?a:null}function eb(a,d){if(a!==d){var c=null===a,e=a===q,g=a===a,f=null===d,n=d===q,k=d===d;if(a>d&&!f||!g||c&&!n&&k||e&&k)return 1;if(d>a&&!c||!k||f&&!e&&g||n&&g)return-1}return 0}function Cc(a){return gc[a]}function Dc(a){return Lc[a]}function Ec(a){return"\\"+jd[a]}function Gb(a,d,c){var e=a.length;for(d+=c?0:-1;c?
d--:++d<e;){var g=a[d];if(g!==g)return d}return-1}function Wa(a){var d=!1;if(null!=a&&"function"!=typeof a.toString)try{d=!!(a+"")}catch(c){}return d}function za(a,d){return a="number"==typeof a||Z.test(a)?+a:-1,-1<a&&0==a%1&&(null==d?9007199254740991:d)>a}function Hb(a){for(var d,c=[];!(d=a.next()).done;)c.push(d.value);return c}function Ib(a){var d=-1,c=Array(a.size);return a.forEach(function(a,e){c[++d]=[e,a]}),c}function Aa(a,d){for(var c=-1,e=a.length,g=-1,f=[];++c<e;){var n=a[c];(n===d||"__lodash_placeholder__"===
n)&&(a[c]="__lodash_placeholder__",f[++g]=c)}return f}function Jb(a){var d=-1,c=Array(a.size);return a.forEach(function(a){c[++d]=a}),c}function fa(a){if(!a||!Ya.test(a))return a.length;for(var d=y.lastIndex=0;y.test(a);)d++;return d}function tb(a){return id[a]}function Xa(I){function d(h){if(ga(h)&&!J(h)&&!(h instanceof H)){if(h instanceof ia)return h;if(ca.call(h,"__wrapped__"))return Dd(h)}return new ia(h)}function Z(){}function ia(h,A){this.__wrapped__=h;this.__actions__=[];this.__chain__=!!A;
this.__index__=0;this.__values__=q}function H(h){this.__wrapped__=h;this.__actions__=[];this.__dir__=1;this.__filtered__=!1;this.__iteratees__=[];this.__takeCount__=4294967295;this.__views__=[]}function ha(){}function ba(h){var A=-1,a=h?h.length:0;for(this.clear();++A<a;){var b=h[A];this.set(b[0],b[1])}}function ra(h){var A=-1,a=h?h.length:0;for(this.__data__=new ba;++A<a;)this.push(h[A])}function kb(h,A){var a=h.__data__;return Xb(A)?(a=a.__data__,"__lodash_hash_undefined__"===("string"==typeof A?
a.string:a.hash)[A]):a.has(A)}function Ma(h){var A=-1,a=h?h.length:0;for(this.clear();++A<a;){var b=h[A];this.set(b[0],b[1])}}function Za(h,A){var a=ic(h,A);return 0>a?!1:(a==h.length-1?h.pop():ee.call(h,a,1),!0)}function jb(h,A){var a=ic(h,A);return 0>a?q:h[a][1]}function ic(h,A){for(var a=h.length;a--;)if(Sa(h[a][0],A))return a;return-1}function Pb(h,A,a){var b=ic(h,A);0>b?h.push([A,a]):h[b][1]=a}function jc(h,A,a,b){return h===q||Sa(h,bd[a])&&!ca.call(b,a)?A:h}function hc(h,A,a){(a===q||Sa(h[A],
a))&&("number"!=typeof A||a!==q||A in h)||(h[A]=a)}function X(h,A,a){var b=h[A];ca.call(h,A)&&Sa(b,a)&&(a!==q||A in h)||(h[A]=a)}function Mc(h,A,a,b){return Eb(h,function(h,d,c){A(b,h,a(h),c)}),b}function ld(h,A){return h&&ab(A,sa(A),h)}function kc(h,A){for(var a=-1,b=null==h,d=A.length,c=Array(d);++a<d;)c[a]=b?q:Id(h,A[a]);return c}function md(h){return ea(h)?h:[]}function Oa(h){return"function"==typeof h?h:db}function Na(h){return J(h)?h:Xc(h)}function Qb(h,a,b){return h===h&&(b!==q&&(h=h>b?b:h),
a!==q&&(h=a>h?a:h)),h}function ua(h,a,b,d,c,g){var f;if(b&&(f=c?b(h,d,c,g):b(h)),f!==q)return f;if(!W(h))return h;if(d=J(h)){if(f=re(h),!a)return ja(h,f)}else{var n=Ga(h),k="[object Function]"==n||"[object GeneratorFunction]"==n;if(Re(h))return Vd(h,a);if("[object Object]"==n||"[object Arguments]"==n||k&&!c){if(Wa(h))return c?h:{};if(f=se(k?{}:h),!a)return Tb(h,ld(f,h))}else{if(!Q[n])return c?h:{};f=te(h,n,a)}}return g||(g=new Ma),(c=g.get(h))?c:(g.set(h,f),(d?e:Da)(h,function(d,c){X(f,c,ua(d,a,b,
c,h,g))}),d?f:Tb(h,f))}function Nc(h){var a=sa(h),b=a.length;return function(d){if(null==d)return!b;for(var c=b;c--;){var e=a[c],g=h[e],f=d[e];if(f===q&&!(e in Object(d))||!g(f))return!1}return!0}}function wb(h){return W(h)?zf(h):{}}function gc(h,a,b){if("function"!=typeof h)throw new Ta("Expected a function");return fe(function(){h.apply(q,b)},a)}function lb(h,a,b,d){var c=-1,e=t,g=!0,f=h.length,k=[],l=a.length;if(!f)return k;b&&(a=p(a,v(b)));d?(e=n,g=!1):200<=a.length&&(e=kb,g=!1,a=new ra(a));a:for(;++c<
f;){var m=h[c],y=b?b(m):m;if(g&&y===y){for(var q=l;q--;)if(a[q]===y)continue a;k.push(m)}else e(a,y,d)||k.push(m)}return k}function Lc(h,a){var b=!0;return Eb(h,function(h,d,c){return b=!!a(h,d,c)}),b}function $a(h,a){var b=[];return Eb(h,function(h,d,c){a(h,d,c)&&b.push(h)}),b}function T(h,a,b,d){d||(d=[]);for(var c=-1,e=h.length;++c<e;){var g=h[c];0<a&&ea(g)&&(b||J(g)||m(g))?1<a?T(g,a-1,b,d):w(d,g):b||(d[d.length]=g)}return d}function id(h,a){return null==h?h:ue(h,a,Ua)}function Da(h,a){return h&&
ue(h,a,sa)}function mb(h,a){return h&&Se(h,a,sa)}function Pc(h,a){return l(a,function(a){return Ha(h[a])})}function Oc(h,a){a=Ra(a,h)?[a+""]:Na(a);for(var b=0,d=a.length;null!=h&&d>b;)h=h[a[b++]];return b&&b==d?h:q}function nd(h,a){return ca.call(h,a)||"object"==typeof h&&a in h&&null===ge(h)}function jd(h,a){return a in Object(h)}function xb(h,a,b){for(var d=b?n:t,c=h.length,e=c,g=Array(c),f=[];e--;){var k=h[e];e&&a&&(k=p(k,v(a)));g[e]=b||!a&&120>k.length?q:new ra(e&&k)}var k=h[0],l=-1,m=k.length,
y=g[0];a:for(;++l<m;){var w=k[l],r=a?a(w):w;if(y?!kb(y,r):!d(f,r,b)){for(e=c;--e;){var S=g[e];if(S?!kb(S,r):!d(h[e],r,b))continue a}y&&y.push(r);f.push(w)}}return f}function U(h,a,b,d){return Da(h,function(h,c,e){a(d,b(h),c,e)}),d}function yb(h,a,b){return Ra(a,h)||(a=Na(a),h=Yb(h,a),a=ma(a)),a=null==h?h:h[a],null==a?q:k(a,h,b)}function nb(h,a,b,d,c){if(h===a)return!0;if(null==h||null==a||!W(h)&&!ga(a))return h!==h&&a!==a;var e=J(h),g=J(a),f="[object Array]",n="[object Array]";e||(f=Ga(h),"[object Arguments]"==
f?f="[object Object]":"[object Object]"!=f&&(e=cd(h)));g||(n=Ga(a),"[object Arguments]"==n?n="[object Object]":"[object Object]"!=n&&cd(a));var k="[object Object]"==f&&!Wa(h),g="[object Object]"==n&&!Wa(a),n=f==n;!n||e||k?2&d||(f=k&&ca.call(h,"__wrapped__"),g=g&&ca.call(a,"__wrapped__"),!f&&!g)?n?(c||(c=new Ma),h=(e?Zd:$d)(h,a,nb,b,d,c)):h=!1:h=nb(f?h.value():h,g?a.value():a,b,d,c):h=cb(h,a,f,nb,b,d);return h}function ob(h,a,b,d){var c=b.length,e=c,g=!d;if(null==h)return!e;for(h=Object(h);c--;){var f=
b[c];if(g&&f[2]?f[1]!==h[f[0]]:!(f[0]in h))return!1}for(;++c<e;){var f=b[c],n=f[0],k=h[n],l=f[1];if(g&&f[2]){if(k===q&&!(n in h))return!1}else if(f=new Ma,n=d?d(k,l,n,h,a,f):q,n===q?!nb(l,k,d,3,f):!n)return!1}return!0}function lc(h){var a=typeof h;return"function"==a?h:null==h?db:"object"==a?J(h)?Td(h[0],h[1]):Sb(h):Te(h)}function pd(h){h=null==h?h:Object(h);var a,b=[];for(a in h)b.push(a);return b}function od(h,a){var b=-1,d=da(h)?Array(h.length):[];return Eb(h,function(h,c,e){d[++b]=a(h,c,e)}),
d}function Sb(h){var a=Vc(h);if(1==a.length&&a[0][2]){var b=a[0][0],d=a[0][1];return function(h){return null==h?!1:h[b]===d&&(d!==q||b in Object(h))}}return function(b){return b===h||ob(b,h,a)}}function Td(h,a){return function(b){var d=Id(b,h);return d===q&&d===a?Ue(b,h):nb(a,d,q,3)}}function zb(h,a,b,d,c){if(h!==a){var g=J(a)||cd(a)?q:Ua(a);e(g||a,function(e,f){if(g&&(f=e,e=a[f]),W(e)){c||(c=new Ma);var n=f,k=c,l=h[n],p=a[n],v=k.get(p);if(!v){var v=d?d(l,p,n+"",h,a,k):q,y=v===q;y&&(v=p,J(p)||cd(p)?
J(l)?v=l:ea(l)?v=ja(l):(y=!1,v=ua(p,!0)):oe(p)||m(p)?m(l)?v=Ve(l):!W(l)||b&&Ha(l)?(y=!1,v=ua(p,!0)):v=l:y=!1);k.set(p,v);y&&zb(v,p,b,d,k)}hc(h,n,v)}else n=d?d(h[f],e,f+"",h,a,c):q,n===q&&(n=e),hc(h,f,n)})}}function Rb(h,a,b){var d=-1,c=C();return a=p(a.length?a:Array(1),function(h){return c(h)}),h=od(h,function(h,b,c){return{a:p(a,function(a){return a(h)}),b:++d,c:h}}),R(h,function(h,a){var A;a:{A=-1;for(var d=h.a,c=a.a,e=d.length,g=b.length;++A<e;){var f=eb(d[A],c[A]);if(f){if(A>=g){A=f;break a}A=
f*("desc"==b[A]?-1:1);break a}}A=h.b-a.b}return A})}function qd(h,a){return h=Object(h),u(a,function(a,b){return b in h&&(a[b]=h[b]),a},{})}function mc(h,a){var b={};return id(h,function(h,d){a(h,d)&&(b[d]=h)}),b}function nc(h){return function(a){return null==a?q:a[h]}}function pb(h){return function(a){return Oc(a,h)}}function oc(h,a,b){var d=-1,c=a.length,e=h;for(b&&(e=p(h,function(h){return b(h)}));++d<c;)for(var g=0,f=a[d],f=b?b(f):f;-1<(g=r(e,f,g));)e!==h&&ee.call(e,g,1),ee.call(h,g,1);return h}
function rd(h,a){for(var b=h?a.length:0,d=b-1;b--;){var c=a[b];if(d==b||c!=e){var e=c;if(za(c))ee.call(h,c,1);else if(Ra(c,h))delete h[c];else{var c=Na(c),g=Yb(h,c);null!=g&&delete g[ma(c)]}}}return h}function Qc(h,a){return h+he(We()*(a-h+1))}function Rc(h,a,b,d){a=Ra(a,h)?[a+""]:Na(a);for(var c=-1,e=a.length,g=e-1,f=h;null!=f&&++c<e;){var n=a[c];if(W(f)){var k=b;if(c!=g){var l=f[n],k=d?d(l,n,f):q;k===q&&(k=null==l?za(a[c+1])?[]:{}:l)}X(f,n,k)}f=f[n]}return h}function Ea(h,a,b){var d=-1,c=h.length;
0>a&&(a=-a>c?0:c+a);b=b>c?c:b;0>b&&(b+=c);c=a>b?0:b-a>>>0;a>>>=0;for(b=Array(c);++d<c;)b[d]=h[d+a];return b}function Ud(h,a){var b;return Eb(h,function(h,d,c){return b=a(h,d,c),!b}),!!b}function pc(h,a,b){var d=0,c=h?h.length:d;if("number"==typeof a&&a===a&&2147483647>=c){for(;c>d;){var e=d+c>>>1,g=h[e];(b?a>=g:a>g)&&null!==g?d=e+1:c=e}return c}return qc(h,a,db,b)}function qc(h,a,b,d){a=b(a);for(var c=0,e=h?h.length:0,g=a!==a,f=null===a,n=a===q;e>c;){var k=he((c+e)/2),l=b(h[k]),p=l!==q,v=l===l;(g?
v||d:f?v&&p&&(d||null!=l):n?v&&(d||p):null==l?0:d?a>=l:a>l)?c=k+1:e=k}return Va(e,4294967294)}function sd(h,a){for(var b=0,d=h.length,c=h[0],e=a?a(c):c,g=e,f=0,n=[c];++b<d;)c=h[b],e=a?a(c):c,Sa(e,g)||(g=e,n[++f]=c);return n}function qb(h,a,b){var d=-1,c=t,e=h.length,g=!0,f=[],k=f;if(b)g=!1,c=n;else if(200>e)k=a?[]:f;else{if(c=a?null:Af(h))return Jb(c);g=!1;c=kb;k=new ra}a:for(;++d<e;){var l=h[d],p=a?a(l):l;if(g&&p===p){for(var v=k.length;v--;)if(k[v]===p)continue a;a&&k.push(p);f.push(l)}else c(k,
p,b)||(k!==f&&k.push(p),f.push(l))}return f}function rc(h,a,b,d){for(var c=h.length,e=d?c:-1;(d?e--:++e<c)&&a(h[e],e,h););return b?Ea(h,d?0:e,d?e+1:c):Ea(h,d?e+1:0,d?c:e)}function td(h,a){var b=h;return b instanceof H&&(b=b.value()),u(a,function(h,a){return a.func.apply(a.thisArg,w([h],a.args))},b)}function ud(h,a,b){for(var d=-1,c=h.length;++d<c;)var e=e?w(lb(e,h[d],a,b),lb(h[d],e,a,b)):h[d];return e&&e.length?qb(e,a,b):[]}function vd(h,a,b){for(var d=-1,c=h.length,e=a.length,g={};++d<c;)b(g,h[d],
e>d?a[d]:q);return g}function Vd(h,a){if(a)return h.slice();var b=new h.constructor(h.length);return h.copy(b),b}function va(h){var a=new h.constructor(h.byteLength);return(new ie(a)).set(new ie(h)),a}function sc(h,a,b,d){var c=-1,e=h.length,g=b.length,f=-1,n=a.length,k=na(e-g,0),l=Array(n+k);for(d=!d;++f<n;)l[f]=a[f];for(;++c<g;)(d||e>c)&&(l[b[c]]=h[c]);for(;k--;)l[f++]=h[c++];return l}function Ab(h,a,b,d){var c=-1,e=h.length,g=-1,f=b.length,n=-1,k=a.length,l=na(e-f,0),p=Array(l+k);for(d=!d;++c<
l;)p[c]=h[c];for(l=c;++n<k;)p[l+n]=a[n];for(;++g<f;)(d||e>c)&&(p[l+b[g]]=h[c++]);return p}function ja(h,a){var b=-1,d=h.length;for(a||(a=Array(d));++b<d;)a[b]=h[b];return a}function ab(h,a,b){return Sc(h,a,b)}function Sc(h,a,b,d){b||(b={});for(var c=-1,e=a.length;++c<e;){var g=a[c],f=d?d(b[g],h[g],g,b,h):h[g];X(b,g,f)}return b}function Tb(h,a){return ab(h,Bf(h),a)}function Tc(h,b){return function(d,c){var e=J(d)?a:Mc,g=b?b():{};return e(d,h,C(c),g)}}function la(h){return B(function(a,b){var d=-1,
c=b.length,e=1<c?b[c-1]:q,g=2<c?b[2]:q,e="function"==typeof e?(c--,e):q;g&&Qa(b[0],b[1],g)&&(e=3>c?q:e,c=1);for(a=Object(a);++d<c;)(g=b[d])&&h(a,g,d,e);return a})}function Wd(h,a){return function(b,d){if(null==b)return b;if(!da(b))return h(b,d);for(var c=b.length,e=a?c:-1,g=Object(b);(a?e--:++e<c)&&!1!==d(g[e],e,g););return b}}function wd(h){return function(a,b,d){var c=-1,e=Object(a);d=d(a);for(var g=d.length;g--;){var f=d[h?g:++c];if(!1===b(e[f],f,e))break}return a}}function kd(h,a,b){function d(){return(this&&
this!==xa&&this instanceof d?e:h).apply(c?b:this,arguments)}var c=1&a,e=tc(h);return d}function Xd(h){return function(a){a=O(a);var b=Ya.test(a)?a.match(y):q,d=b?b[0]:a.charAt(0);return a=b?b.slice(1).join(""):a.slice(1),d[h]()+a}}function rb(h){return function(a){return u(Xe(Ye(a)),h,"")}}function tc(h){return function(){var a=arguments;switch(a.length){case 0:return new h;case 1:return new h(a[0]);case 2:return new h(a[0],a[1]);case 3:return new h(a[0],a[1],a[2]);case 4:return new h(a[0],a[1],a[2],
a[3]);case 5:return new h(a[0],a[1],a[2],a[3],a[4]);case 6:return new h(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new h(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var b=wb(h.prototype),a=h.apply(b,a);return W(a)?a:b}}function Yd(h,a,b){function d(){for(var e=arguments.length,g=Array(e),f=e,n=Wb(d);f--;)g[f]=arguments[f];return f=3>e&&g[0]!==n&&g[e-1]!==n?[]:Aa(g,n),e-=f.length,b>e?zd(h,a,Pa,d.placeholder,q,g,f,q,q,b-e):k(this&&this!==xa&&this instanceof d?c:h,this,g)}var c=tc(h);return d}function xd(h){return B(function(a){a=
T(a,1);var b=a.length,d=b,c=ia.prototype.thru;for(h&&a.reverse();d--;){var e=a[d];if("function"!=typeof e)throw new Ta("Expected a function");if(c&&!g&&"wrapper"==uc(e))var g=new ia([],!0)}for(d=g?d:b;++d<b;)var e=a[d],c=uc(e),f="wrapper"==c?ve(e):q,g=f&&wc(f[0])&&424==f[1]&&!f[4].length&&1==f[9]?g[uc(f[0])].apply(g,f[3]):1==e.length&&wc(e)?g[c]():g.thru(e);return function(){var h=arguments,d=h[0];if(g&&1==h.length&&J(d)&&200<=d.length)return g.plant(d).value();for(var c=0,h=b?a[c].apply(this,h):
d;++c<b;)h=a[c].call(this,h);return h}})}function Pa(h,a,b,d,c,e,g,f,n,k){function l(){for(var r=arguments.length,S=r,u=Array(r);S--;)u[S]=arguments[S];if(y){var I,P=Wb(l),S=u.length;for(I=0;S--;)u[S]===P&&I++}if(d&&(u=sc(u,d,c,y)),e&&(u=Ab(u,e,g,y)),r-=I,y&&k>r)return P=Aa(u,P),zd(h,a,Pa,l.placeholder,b,u,P,f,n,k-r);if(P=v?b:this,S=m?P[h]:h,r=u.length,f){I=u.length;for(var E=Va(f.length,I),R=ja(u);E--;){var x=f[E];u[E]=za(x,I)?R[x]:q}}else t&&1<r&&u.reverse();return p&&r>n&&(u.length=n),this&&this!==
xa&&this instanceof l&&(S=w||tc(S)),S.apply(P,u)}var p=128&a,v=1&a,m=2&a,y=24&a,t=512&a,w=m?q:tc(h);return l}function Ub(h,a){return function(b,d){return U(b,h,a(d),{})}}function yd(h){return B(function(a){return a=p(T(a,1),C()),B(function(b){var d=this;return h(a,function(h){return k(h,d,b)})})})}function Bb(h,a,b){return a=L(a),h=fa(h),a&&a>h?(a-=h,b=b===q?" ":b+"",h=Ze(b,je(a/fa(b))),Ya.test(b)?h.match(y).slice(0,a).join(""):h.slice(0,a)):""}function Uc(h,a,b,d){function c(){for(var a=-1,A=arguments.length,
f=-1,n=d.length,l=Array(n+A),p=this&&this!==xa&&this instanceof c?g:h;++f<n;)l[f]=d[f];for(;A--;)l[f++]=arguments[++a];return k(p,e?b:this,l)}var e=1&a,g=tc(h);return c}function Vb(h){return function(a,b,d){d&&"number"!=typeof d&&Qa(a,b,d)&&(b=d=q);a=oa(a);a=a===a?a:0;b===q?(b=a,a=0):b=oa(b)||0;d=d===q?b>a?1:-1:oa(d)||0;var c=-1;b=na(je((b-a)/(d||1)),0);for(var e=Array(b);b--;)e[h?b:++c]=a,a+=d;return e}}function zd(h,a,b,d,c,e,g,f,n,k){var l=8&a;f=f?ja(f):q;var p=l?g:q;g=l?q:g;var v=l?e:q;return e=
l?q:e,a=(a|(l?32:64))&~(l?64:32),4&a||(a&=-4),a=[h,a,c,v,p,e,g,f,n,k],b=b.apply(q,a),wc(h)&&$e(b,a),b.placeholder=d,b}function bb(h){var a=dd[h];return function(h,b){if(h=oa(h),b=L(b)){var d=(O(h)+"e").split("e"),d=a(d[0]+"e"+(+d[1]+b)),d=(O(d)+"e").split("e");return+(d[0]+"e"+(+d[1]-b))}return a(h)}}function Fa(h,a,b,d,c,e,g,f){var n=2&a;if(!n&&"function"!=typeof h)throw new Ta("Expected a function");var k=d?d.length:0;if(k||(a&=-97,d=c=q),g=g===q?g:na(L(g),0),f=f===q?f:L(f),k-=c?c.length:0,64&a){var l=
d,p=c;d=c=q}var v=n?q:ve(h);return e=[h,a,b,d,c,l,p,e,g,f],v&&(b=e[1],h=v[1],a=b|h,d=128==h&&8==b||128==h&&256==b&&v[8]>=e[7].length||384==h&&v[8]>=v[7].length&&8==b,131>a||d)&&(1&h&&(e[2]=v[2],a|=1&b?0:4),(b=v[3])&&(d=e[3],e[3]=d?sc(d,b,v[4]):ja(b),e[4]=d?Aa(e[3],"__lodash_placeholder__"):ja(v[4])),(b=v[5])&&(d=e[5],e[5]=d?Ab(d,b,v[6]):ja(b),e[6]=d?Aa(e[5],"__lodash_placeholder__"):ja(v[6])),(b=v[7])&&(e[7]=ja(b)),128&h&&(e[8]=null==e[8]?v[8]:Va(e[8],v[8])),null==e[9]&&(e[9]=v[9]),e[0]=v[0],e[1]=
a),h=e[0],a=e[1],b=e[2],d=e[3],c=e[4],f=e[9]=null==e[9]?n?0:h.length:na(e[9]-k,0),!f&&24&a&&(a&=-25),n=a&&1!=a?8==a||16==a?Yd(h,a,f):32!=a&&33!=a||c.length?Pa.apply(q,e):Uc(h,a,b,d):kd(h,a,b),(v?af:$e)(n,e)}function Zd(h,a,b,d,c,e){var g=-1,f=2&c,n=1&c,k=h.length,l=a.length;if(!(k==l||f&&l>k))return!1;if(l=e.get(h))return l==a;l=!0;for(e.set(h,a);++g<k;){var p=h[g],v=a[g];if(d)var m=f?d(v,p,g,a,h,e):d(p,v,g,h,a,e);if(m!==q){if(m)continue;l=!1;break}if(n){if(!F(a,function(h){return p===h||b(p,h,d,
c,e)})){l=!1;break}}else if(p!==v&&!b(p,v,d,c,e)){l=!1;break}}return e["delete"](h),l}function cb(h,a,b,d,c,e){switch(b){case "[object ArrayBuffer]":if(h.byteLength!=a.byteLength||!d(new ie(h),new ie(a)))break;return!0;case "[object Boolean]":case "[object Date]":return+h==+a;case "[object Error]":return h.name==a.name&&h.message==a.message;case "[object Number]":return h!=+h?a!=+a:h==+a;case "[object RegExp]":case "[object String]":return h==a+"";case "[object Map]":var g=Ib;case "[object Set]":return g||
(g=Jb),(2&e||h.size==a.size)&&d(g(h),g(a),c,1|e);case "[object Symbol]":return!!Fb&&we.call(h)==we.call(a)}return!1}function $d(h,a,b,d,c,e){var g=2&c,f=sa(h),n=f.length,k=sa(a).length;if(n!=k&&!g)return!1;for(var l=n;l--;){var p=f[l];if(!(g?p in a:nd(a,p)))return!1}if(k=e.get(h))return k==a;k=!0;e.set(h,a);for(var v=g;++l<n;){var p=f[l],m=h[p],y=a[p];if(d)var t=g?d(y,m,p,a,h,e):d(m,y,p,h,a,e);if(t===q?m!==y&&!b(m,y,d,c,e):!t){k=!1;break}v||(v="constructor"==p)}return k&&!v&&(b=h.constructor,d=a.constructor,
b!=d&&"constructor"in h&&"constructor"in a&&!("function"==typeof b&&b instanceof b&&"function"==typeof d&&d instanceof d)&&(k=!1)),e["delete"](h),k}function uc(h){for(var a=h.name+"",b=Jd[a],d=ca.call(Jd,a)?b.length:0;d--;){var c=b[d],e=c.func;if(null==e||e==h)return c.name}return a}function C(){var h=d.iteratee||xe,h=h===xe?lc:h;return arguments.length?h(arguments[0],arguments[1]):h}function Vc(h){h=bf(h);for(var a=h.length;a--;){var b,d=h[a];b=h[a][1];b=b===b&&!W(b);d[2]=b}return h}function vc(h,
a){var b=null==h?q:h[a];return Je(b)?b:q}function Wb(h){return(ca.call(d,"placeholder")?d:h).placeholder}function Ga(h){return wa.call(h)}function Sd(h,a,b){if(null==h)return!1;var d=b(h,a);return d||Ra(a)||(a=Na(a),h=Yb(h,a),null!=h&&(a=ma(a),d=b(h,a))),b=h?h.length:q,d||!!b&&gd(b)&&za(a,b)&&(J(h)||zc(h)||m(h))}function re(h){var a=h.length,b=h.constructor(a);return a&&"string"==typeof h[0]&&ca.call(h,"index")&&(b.index=h.index,b.input=h.input),b}function se(h){return Ha(h.constructor)&&!Wc(h)?wb(ge(h)):
{}}function te(h,a,b){var d=h.constructor;switch(a){case "[object ArrayBuffer]":return va(h);case "[object Boolean]":case "[object Date]":return new d(+h);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return a=h.buffer,b=b?va(a):a,new h.constructor(b,h.byteOffset,h.length);case "[object Map]":return b=
h.constructor,u(Ib(h),c,new b);case "[object Number]":case "[object String]":return new d(h);case "[object RegExp]":return b=new h.constructor(h.source,hb.exec(h)),b.lastIndex=h.lastIndex,b;case "[object Set]":return b=h.constructor,u(Jb(h),f,new b);case "[object Symbol]":return Fb?Object(we.call(h)):{}}}function Ad(h){var a=h?h.length:q;return gd(a)&&(J(h)||zc(h)||m(h))?ta(a,String):null}function Qa(h,a,b){if(!W(b))return!1;var d=typeof a;return("number"==d?da(b)&&za(a,b.length):"string"==d&&a in
b)?Sa(b[a],h):!1}function Ra(h,a){return"number"==typeof h?!0:!J(h)&&(Ja.test(h)||!Ia.test(h)||null!=a&&h in Object(a))}function Xb(h){var a=typeof h;return"number"==a||"boolean"==a||"string"==a&&"__proto__"!=h||null==h}function wc(h){var a=uc(h),b=d[a];return"function"==typeof b&&a in H.prototype?h===b?!0:(a=ve(b),!!a&&h===a[0]):!1}function Wc(h){var a=h&&h.constructor,a=Ha(a)&&a.prototype||bd;return h===a}function Bd(h,a,b,d,c,e){return W(h)&&W(a)&&(e.set(a,h),zb(h,a,q,Bd,e)),h}function Yb(h,a){return 1==
a.length?h:Id(h,Ea(a,0,-1))}function Xc(h){var a=[];return O(h).replace(Ka,function(h,b,d,c){a.push(d?c.replace(hd,"$1"):b||h)}),a}function Dd(h){if(h instanceof H)return h.clone();var a=new ia(h.__wrapped__,h.__chain__);return a.__actions__=ja(h.__actions__),a.__index__=h.__index__,a.__values__=h.__values__,a}function Ed(h,a,b){var d=h?h.length:0;return d?(a=b||a===q?1:L(a),Ea(h,0>a?0:a,d)):[]}function Cd(h,a,b){var d=h?h.length:0;return d?(a=b||a===q?1:L(a),a=d-a,Ea(h,0,0>a?0:a)):[]}function ya(h){return h?
h[0]:q}function ma(h){var a=h?h.length:0;return a?h[a-1]:q}function ae(h,a){return h&&h.length&&a&&a.length?oc(h,a):h}function Yc(h){return h?Cf.call(h):h}function Fd(h){if(!h||!h.length)return[];var a=0;return h=l(h,function(h){return ea(h)?(a=na(h.length,a),!0):void 0}),ta(a,function(a){return p(h,nc(a))})}function be(h,a){if(!h||!h.length)return[];var b=Fd(h);return null==a?b:p(b,function(h){return k(a,q,h)})}function Nd(h){return h=d(h),h.__chain__=!0,h}function xc(h,a){return a(h)}function ce(){return this}
function yc(a,b){return"function"==typeof b&&J(a)?e(a,b):Eb(a,Oa(b))}function Gd(a,b){var d;if("function"==typeof b&&J(a)){for(d=a.length;d--&&!1!==b(a[d],d,a););d=a}else d=ye(a,Oa(b));return d}function Zb(a,b){return(J(a)?p:od)(a,C(b,3))}function Zc(a,b){var d=-1,c=ze(a),e=c.length,g=e-1;for(b=Qb(L(b),0,e);++d<b;){var e=Qc(d,g),f=c[e];c[e]=c[d];c[d]=f}return c.length=b,c}function $c(a,b,d){return b=d?q:b,b=a&&null==b?a.length:b,Fa(a,128,q,q,q,q,b)}function Db(a,b){var d;if("function"!=typeof b)throw new Ta("Expected a function");
return a=L(a),function(){return 0<--a&&(d=b.apply(this,arguments)),1>=a&&(b=q),d}}function Cb(a,b,d){return b=d?q:b,a=Fa(a,8,q,q,q,q,q,b),a.placeholder=Cb.placeholder,a}function Hd(a,b,d){return b=d?q:b,a=Fa(a,16,q,q,q,q,q,b),a.placeholder=Hd.placeholder,a}function de(a,b,d){function c(){y&&Kd(y);l&&Kd(l);r=0;k=l=m=y=t=q}function e(b,d){d&&Kd(d);l=y=t=q;b&&(r=Ld(),p=a.apply(m,k),y||l||(k=m=q))}function g(){var a=b-(Ld()-v);0>=a||a>b?e(t,l):y=fe(g,a)}function f(){e(u,y)}function n(){if(k=arguments,
v=Ld(),m=this,t=u&&(y||!S),!1===w)var d=S&&!y;else{r||l||S||(r=v);var c=w-(v-r),e=(0>=c||c>w)&&(S||l);e?(l&&(l=Kd(l)),r=v,p=a.apply(m,k)):l||(l=fe(f,c))}return e&&y?y=Kd(y):y||b===w||(y=fe(g,b)),d&&(e=!0,p=a.apply(m,k)),!e||y||l||(k=m=q),p}var k,l,p,v,m,y,t,r=0,S=!1,w=!1,u=!0;if("function"!=typeof a)throw new Ta("Expected a function");return b=oa(b)||0,W(d)&&(S=!!d.leading,w="maxWait"in d&&na(oa(d.maxWait)||0,b),u="trailing"in d?!!d.trailing:u),n.cancel=c,n.flush=function(){return(y&&t||l&&u)&&(p=
a.apply(m,k)),c(),p},n}function ad(a,b){if("function"!=typeof a||b&&"function"!=typeof b)throw new Ta("Expected a function");var d=function(){var c=arguments,e=b?b.apply(this,c):c[0],g=d.cache;return g.has(e)?g.get(e):(c=a.apply(this,c),d.cache=g.set(e,c),c)};return d.cache=new ad.Cache,d}function B(a,b){if("function"!=typeof a)throw new Ta("Expected a function");return b=na(b===q?a.length-1:L(b),0),function(){for(var d=arguments,c=-1,e=na(d.length-b,0),g=Array(e);++c<e;)g[c]=d[b+c];switch(b){case 0:return a.call(this,
g);case 1:return a.call(this,d[0],g);case 2:return a.call(this,d[0],d[1],g)}e=Array(b+1);for(c=-1;++c<b;)e[c]=d[c];return e[b]=g,k(a,this,e)}}function Sa(a,b){return a===b||a!==a&&b!==b}function b(a,b){return a>b}function m(a){return ea(a)&&ca.call(a,"callee")&&(!cf.call(a,"callee")||"[object Arguments]"==wa.call(a))}function da(a){return null!=a&&!("function"==typeof a&&Ha(a))&&gd(Df(a))}function ea(a){return ga(a)&&da(a)}function ne(a){return ga(a)?"[object Error]"==wa.call(a)||"string"==typeof a.message&&
"string"==typeof a.name:!1}function Ha(a){return a=W(a)?wa.call(a):"","[object Function]"==a||"[object GeneratorFunction]"==a}function Ie(a){return"number"==typeof a&&a==L(a)}function gd(a){return"number"==typeof a&&-1<a&&0==a%1&&9007199254740991>=a}function W(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function ga(a){return!!a&&"object"==typeof a}function Je(a){return null==a?!1:Ha(a)?df.test($b.call(a)):ga(a)&&(Wa(a)?df:qa).test(a)}function Ke(a){return"number"==typeof a||ga(a)&&"[object Number]"==
wa.call(a)}function oe(a){return!ga(a)||"[object Object]"!=wa.call(a)||Wa(a)?!1:(a=ge(a),null===a?!0:(a=a.constructor,"function"==typeof a&&a instanceof a&&$b.call(a)==Ef))}function ef(a){return W(a)&&"[object RegExp]"==wa.call(a)}function zc(a){return"string"==typeof a||!J(a)&&ga(a)&&"[object String]"==wa.call(a)}function ff(a){return"symbol"==typeof a||ga(a)&&"[object Symbol]"==wa.call(a)}function cd(a){return ga(a)&&gd(a.length)&&!!K[wa.call(a)]}function Ae(a,b){return b>a}function ze(a){if(!a)return[];
if(da(a))return zc(a)?a.match(y):ja(a);if(Ac&&a[Ac])return Hb(a[Ac]());var b=Ga(a);return("[object Map]"==b?Ib:"[object Set]"==b?Jb:ke)(a)}function L(a){if(!a)return 0===a?a:0;if(a=oa(a),a===fb||a===-fb)return 1.7976931348623157E308*(0>a?-1:1);var b=a%1;return a===a?b?a-b:a:0}function gf(a){return a?Qb(L(a),0,4294967295):0}function oa(a){if(W(a)&&(a=Ha(a.valueOf)?a.valueOf():a,a=W(a)?a+"":a),"string"!=typeof a)return 0===a?a:+a;a=a.replace(ec,"");var b=Ba.test(a);return b||vb.test(a)?Ob(a.slice(2),
b?2:8):Kc.test(a)?ac:+a}function Ve(a){return ab(a,Ua(a))}function O(a){if("string"==typeof a)return a;if(null==a)return"";if(ff(a))return Fb?Ff.call(a):"";var b=a+"";return"0"==b&&1/a==-fb?"-0":b}function Id(a,b,d){return a=null==a?q:Oc(a,b),a===q?d:a}function hf(a,b){return Sd(a,b,nd)}function Ue(a,b){return Sd(a,b,jd)}function sa(a){var b=Wc(a);if(!b&&!da(a))return Gf(Object(a));var d,c=Ad(a),e=!!c,c=c||[],g=c.length;for(d in a)!nd(a,d)||e&&("length"==d||za(d,g))||b&&"constructor"==d||c.push(d);
return c}function Ua(a){for(var b=-1,d=Wc(a),c=pd(a),e=c.length,g=Ad(a),f=!!g,g=g||[],n=g.length;++b<e;){var k=c[b];f&&("length"==k||za(k,n))||"constructor"==k&&(d||!ca.call(a,k))||g.push(k)}return g}function bf(a){return G(a,sa(a))}function ke(a){return a?P(a,sa(a)):[]}function Be(a){return jf(O(a).toLowerCase())}function Ye(a){return(a=O(a))&&a.replace(Mb,Cc).replace(ib,"")}function Ze(a,b){a=O(a);b=L(b);var d="";if(!a||1>b||9007199254740991<b)return d;do b%2&&(d+=a),b=he(b/2),a+=a;while(b);return d}
function Xe(a,b,d){return a=O(a),b=d?q:b,b===q&&(b=Pd.test(a)?Od:Nb),a.match(b)||[]}function Ce(a){return function(){return a}}function db(a){return a}function xe(a){return lc("function"==typeof a?a:ua(a,!0))}function De(a,b,d){var c=sa(b),g=Pc(b,c);null!=d||W(b)&&(g.length||!c.length)||(d=b,b=a,a=this,g=Pc(b,sa(b)));var f=W(d)&&"chain"in d?d.chain:!0,n=Ha(a);return e(g,function(d){var c=b[d];a[d]=c;n&&(a.prototype[d]=function(){var b=this.__chain__;if(f||b){var d=a(this.__wrapped__);return(d.__actions__=
ja(this.__actions__)).push({func:c,args:arguments,thisArg:a}),d.__chain__=b,d}return c.apply(a,w([this.value()],arguments))})}),a}function Ee(){}function Te(a){return Ra(a)?nc(a):pb(a)}function kf(a){return a&&a.length?V(a,db):0}I=I?La.defaults({},I,La.pick(xa,Qd)):xa;var Hf=I.Date,If=I.Error,dd=I.Math,Fe=I.RegExp,Ta=I.TypeError,le=I.Array.prototype,bd=I.Object.prototype,$b=I.Function.prototype.toString,ca=bd.hasOwnProperty,Jf=0,Ef=$b.call(Object),wa=bd.toString,Kf=xa._,df=Fe("^"+$b.call(ca).replace(ka,
"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lf=Rd?I.Buffer:q,mf=I.Reflect,Fb=I.Symbol,ie=I.Uint8Array,Kd=I.clearTimeout,nf=mf?mf.enumerate:q,ge=Object.getPrototypeOf,Lf=Object.getOwnPropertySymbols,Ac="symbol"==typeof(Ac=Fb&&Fb.iterator)?Ac:q,zf=Object.create,cf=bd.propertyIsEnumerable,fe=I.setTimeout,ee=le.splice,je=dd.ceil,he=dd.floor,Mf=I.isFinite,Nf=le.join,Gf=Object.keys,na=dd.max,Va=dd.min,Of=I.parseInt,We=dd.random,Cf=le.reverse,sb=vc(I,"Map"),Bc=
vc(I,"Set"),ed=vc(I,"WeakMap"),fd=vc(Object,"create"),me=ed&&new ed,Pf=sb?$b.call(sb):"",Qf=Bc?$b.call(Bc):"",Rf=ed?$b.call(ed):"",of=Fb?Fb.prototype:q,we=Fb?of.valueOf:q,Ff=Fb?of.toString:q,Jd={};d.templateSettings={escape:Hc,evaluate:Ic,interpolate:Jc,variable:"",imports:{_:d}};var Eb=Wd(Da),ye=Wd(mb,!0),ue=wd(),Se=wd(!0);nf&&!cf.call({valueOf:1},"valueOf")&&(pd=function(a){return Hb(nf(a))});var af=me?function(a,b){return me.set(a,b),a}:db,Af=Bc&&2===(new Bc([1,2])).size?function(a){return new Bc(a)}:
Ee,ve=me?function(a){return me.get(a)}:Ee,Df=nc("length"),Bf=Lf||function(){return[]};(sb&&"[object Map]"!=Ga(new sb)||Bc&&"[object Set]"!=Ga(new Bc)||ed&&"[object WeakMap]"!=Ga(new ed))&&(Ga=function(a){var b=wa.call(a);if(a="[object Object]"==b?a.constructor:null,a="function"==typeof a?$b.call(a):"")switch(a){case Pf:return"[object Map]";case Qf:return"[object Set]";case Rf:return"[object WeakMap]"}return b});var $e=function(){var a=0,b=0;return function(d,c){var e=Ld(),g=16-(e-b);if(b=e,0<g){if(150<=
++a)return d}else a=0;return af(d,c)}}(),Sf=B(function(a,b){J(a)||(a=null==a?[]:[Object(a)]);b=T(b,1);for(var d=a,c=b,e=-1,g=d.length,f=-1,n=c.length,k=Array(g+n);++e<g;)k[e]=d[e];for(;++f<n;)k[e++]=c[f];return k}),Tf=B(function(a,b){return ea(a)?lb(a,T(b,1,!0)):[]}),Uf=B(function(a,b){var d=ma(b);return ea(d)&&(d=q),ea(a)?lb(a,T(b,1,!0),C(d)):[]}),Vf=B(function(a,b){var d=ma(b);return ea(d)&&(d=q),ea(a)?lb(a,T(b,1,!0),q,d):[]}),Wf=B(function(a){var b=p(a,md);return b.length&&b[0]===a[0]?xb(b):[]}),
Xf=B(function(a){var b=ma(a),d=p(a,md);return b===ma(d)?b=q:d.pop(),d.length&&d[0]===a[0]?xb(d,C(b)):[]}),Yf=B(function(a){var b=ma(a),d=p(a,md);return b===ma(d)?b=q:d.pop(),d.length&&d[0]===a[0]?xb(d,q,b):[]}),Zf=B(ae),$f=B(function(a,b){b=p(T(b,1),String);var d=kc(a,b);return rd(a,b.sort(eb)),d}),ag=B(function(a){return qb(T(a,1,!0))}),bg=B(function(a){var b=ma(a);return ea(b)&&(b=q),qb(T(a,1,!0),C(b))}),cg=B(function(a){var b=ma(a);return ea(b)&&(b=q),qb(T(a,1,!0),q,b)}),dg=B(function(a,b){return ea(a)?
lb(a,b):[]}),eg=B(function(a){return ud(l(a,ea))}),fg=B(function(a){var b=ma(a);return ea(b)&&(b=q),ud(l(a,ea),C(b))}),gg=B(function(a){var b=ma(a);return ea(b)&&(b=q),ud(l(a,ea),q,b)}),hg=B(Fd),ig=B(function(a){var b=a.length,b=1<b?a[b-1]:q,b="function"==typeof b?(a.pop(),b):q;return be(a,b)}),jg=B(function(a){a=T(a,1);var b=a.length,d=b?a[0]:0,c=this.__wrapped__,e=function(b){return kc(b,a)};return 1>=b&&!this.__actions__.length&&c instanceof H&&za(d)?(c=c.slice(d,+d+(b?1:0)),c.__actions__.push({func:xc,
args:[e],thisArg:q}),(new ia(c,this.__chain__)).thru(function(a){return b&&!a.length&&a.push(q),a})):this.thru(e)}),kg=Tc(function(a,b,d){ca.call(a,d)?++a[d]:a[d]=1}),lg=Tc(function(a,b,d){ca.call(a,d)?a[d].push(b):a[d]=[b]}),mg=B(function(a,b,d){var c=-1,e="function"==typeof b,g=Ra(b),f=da(a)?Array(a.length):[];return Eb(a,function(a){var h=e?b:g&&null!=a?a[b]:q;f[++c]=h?k(h,a,d):yb(a,b,d)}),f}),ng=Tc(function(a,b,d){a[d]=b}),og=Tc(function(a,b,d){a[d?0:1].push(b)},function(){return[[],[]]}),pg=
B(function(a,b){if(null==a)return[];var d=b.length;return 1<d&&Qa(a,b[0],b[1])?b=[]:2<d&&Qa(b[0],b[1],b[2])&&(b.length=1),Rb(a,T(b,1),[])}),Ld=Hf.now,Ge=B(function(a,b,d){var c=1;if(d.length)var e=Aa(d,Wb(Ge)),c=32|c;return Fa(a,c,b,d,e)}),pf=B(function(a,b,d){var c=3;if(d.length)var e=Aa(d,Wb(pf)),c=32|c;return Fa(b,c,a,d,e)}),qg=B(function(a,b){return gc(a,1,b)}),rg=B(function(a,b,d){return gc(a,oa(b)||0,d)}),sg=B(function(a,b){b=p(T(b,1),C());var d=b.length;return B(function(c){for(var e=-1,g=
Va(c.length,d);++e<g;)c[e]=b[e].call(this,c[e]);return k(a,this,c)})}),He=B(function(a,b){var d=Aa(b,Wb(He));return Fa(a,32,q,b,d)}),qf=B(function(a,b){var d=Aa(b,Wb(qf));return Fa(a,64,q,b,d)}),tg=B(function(a,b){return Fa(a,256,q,q,q,T(b,1))}),J=Array.isArray,Re=lf?function(a){return a instanceof lf}:Ce(!1),ug=la(function(a,b){ab(b,sa(b),a)}),rf=la(function(a,b){ab(b,Ua(b),a)}),Md=la(function(a,b,d,c){Sc(b,Ua(b),a,c)}),vg=la(function(a,b,d,c){Sc(b,sa(b),a,c)}),wg=B(function(a,b){return kc(a,T(b,
1))}),xg=B(function(a){return a.push(q,jc),k(Md,q,a)}),yg=B(function(a){return a.push(q,Bd),k(sf,q,a)}),zg=Ub(function(a,b,d){a[b]=d},Ce(db)),Ag=Ub(function(a,b,d){ca.call(a,b)?a[b].push(d):a[b]=[d]},C),Bg=B(yb),Cg=la(function(a,b,d){zb(a,b,d)}),sf=la(function(a,b,d,c){zb(a,b,d,c)}),Dg=B(function(a,b){return null==a?{}:(b=p(T(b,1),String),qd(a,lb(Ua(a),b)))}),Eg=B(function(a,b){return null==a?{}:qd(a,T(b,1))}),Fg=rb(function(a,b,d){return b=b.toLowerCase(),a+(d?Be(b):b)}),Gg=rb(function(a,b,d){return a+
(d?"-":"")+b.toLowerCase()}),Hg=rb(function(a,b,d){return a+(d?" ":"")+b.toLowerCase()}),Ig=Xd("toLowerCase"),jf=Xd("toUpperCase"),Jg=rb(function(a,b,d){return a+(d?"_":"")+b.toLowerCase()}),Kg=rb(function(a,b,d){return a+(d?" ":"")+Be(b)}),Lg=rb(function(a,b,d){return a+(d?" ":"")+b.toUpperCase()}),tf=B(function(a,b){try{return k(a,q,b)}catch(d){return ne(d)?d:new If(d)}}),Mg=B(function(a,b){return e(T(b,1),function(b){a[b]=Ge(a[b],a)}),a}),Ng=xd(),Og=xd(!0),Pg=B(function(a,b){return function(d){return yb(d,
a,b)}}),Qg=B(function(a,b){return function(d){return yb(a,d,b)}}),Rg=yd(p),Sg=yd(g),Tg=yd(F),Ug=Vb(),Vg=Vb(!0),Wg=bb("ceil"),Xg=bb("floor"),Yg=bb("round");return d.prototype=Z.prototype,ia.prototype=wb(Z.prototype),ia.prototype.constructor=ia,H.prototype=wb(Z.prototype),H.prototype.constructor=H,ha.prototype=fd?fd(null):bd,ba.prototype.clear=function(){this.__data__={hash:new ha,map:sb?new sb:[],string:new ha}},ba.prototype["delete"]=function(a){var b=this.__data__;return Xb(a)?(b="string"==typeof a?
b.string:b.hash,(fd?b[a]!==q:ca.call(b,a))&&delete b[a]):sb?b.map["delete"](a):Za(b.map,a)},ba.prototype.get=function(a){var b=this.__data__;return Xb(a)?(b="string"==typeof a?b.string:b.hash,fd?(a=b[a],a="__lodash_hash_undefined__"===a?q:a):a=ca.call(b,a)?b[a]:q,a):sb?b.map.get(a):jb(b.map,a)},ba.prototype.has=function(a){var b=this.__data__;return Xb(a)?(b="string"==typeof a?b.string:b.hash,a=fd?b[a]!==q:ca.call(b,a)):a=sb?b.map.has(a):-1<ic(b.map,a),a},ba.prototype.set=function(a,b){var d=this.__data__;
return Xb(a)?("string"==typeof a?d.string:d.hash)[a]=fd&&b===q?"__lodash_hash_undefined__":b:sb?d.map.set(a,b):Pb(d.map,a,b),this},ra.prototype.push=function(a){var b=this.__data__;Xb(a)?(b=b.__data__,("string"==typeof a?b.string:b.hash)[a]="__lodash_hash_undefined__"):b.set(a,"__lodash_hash_undefined__")},Ma.prototype.clear=function(){this.__data__={array:[],map:null}},Ma.prototype["delete"]=function(a){var b=this.__data__,d=b.array;return d?Za(d,a):b.map["delete"](a)},Ma.prototype.get=function(a){var b=
this.__data__,d=b.array;return d?jb(d,a):b.map.get(a)},Ma.prototype.has=function(a){var b=this.__data__,d=b.array;return d?-1<ic(d,a):b.map.has(a)},Ma.prototype.set=function(a,b){var d=this.__data__,c=d.array;return c&&(199>c.length?Pb(c,a,b):(d.array=null,d.map=new ba(c))),(d=d.map)&&d.set(a,b),this},ad.Cache=ba,d.after=function(a,b){if("function"!=typeof b)throw new Ta("Expected a function");return a=L(a),function(){return 1>--a?b.apply(this,arguments):void 0}},d.ary=$c,d.assign=ug,d.assignIn=rf,
d.assignInWith=Md,d.assignWith=vg,d.at=wg,d.before=Db,d.bind=Ge,d.bindAll=Mg,d.bindKey=pf,d.castArray=function(){if(!arguments.length)return[];var a=arguments[0];return J(a)?a:[a]},d.chain=Nd,d.chunk=function(a,b){b=na(L(b),0);var d=a?a.length:0;if(!d||1>b)return[];for(var c=0,e=-1,g=Array(je(d/b));d>c;)g[++e]=Ea(a,c,c+=b);return g},d.compact=function(a){for(var b=-1,d=a?a.length:0,c=-1,e=[];++b<d;){var g=a[b];g&&(e[++c]=g)}return e},d.concat=Sf,d.cond=function(a){var b=a?a.length:0,d=C();return a=
b?p(a,function(a){if("function"!=typeof a[1])throw new Ta("Expected a function");return[d(a[0]),a[1]]}):[],B(function(d){for(var c=-1;++c<b;){var e=a[c];if(k(e[0],this,d))return k(e[1],this,d)}})},d.conforms=function(a){return Nc(ua(a,!0))},d.constant=Ce,d.countBy=kg,d.create=function(a,b){var d=wb(a);return b?ld(d,b):d},d.curry=Cb,d.curryRight=Hd,d.debounce=de,d.defaults=xg,d.defaultsDeep=yg,d.defer=qg,d.delay=rg,d.difference=Tf,d.differenceBy=Uf,d.differenceWith=Vf,d.drop=Ed,d.dropRight=Cd,d.dropRightWhile=
function(a,b){return a&&a.length?rc(a,C(b,3),!0,!0):[]},d.dropWhile=function(a,b){return a&&a.length?rc(a,C(b,3),!0):[]},d.fill=function(a,b,d,c){var e=a?a.length:0;if(!e)return[];d&&"number"!=typeof d&&Qa(a,b,d)&&(d=0,c=e);e=a.length;d=L(d);0>d&&(d=-d>e?0:e+d);c=c===q||c>e?e:L(c);0>c&&(c+=e);for(c=d>c?0:gf(c);c>d;)a[d++]=b;return a},d.filter=function(a,b){return(J(a)?l:$a)(a,C(b,3))},d.flatMap=function(a,b){return T(Zb(a,b),1)},d.flatten=function(a){return a&&a.length?T(a,1):[]},d.flattenDeep=function(a){return a&&
a.length?T(a,fb):[]},d.flattenDepth=function(a,b){return a&&a.length?(b=b===q?1:L(b),T(a,b)):[]},d.flip=function(a){return Fa(a,512)},d.flow=Ng,d.flowRight=Og,d.fromPairs=function(a){for(var b=-1,d=a?a.length:0,c={};++b<d;){var e=a[b];c[e[0]]=e[1]}return c},d.functions=function(a){return null==a?[]:Pc(a,sa(a))},d.functionsIn=function(a){return null==a?[]:Pc(a,Ua(a))},d.groupBy=lg,d.initial=function(a){return Cd(a,1)},d.intersection=Wf,d.intersectionBy=Xf,d.intersectionWith=Yf,d.invert=zg,d.invertBy=
Ag,d.invokeMap=mg,d.iteratee=xe,d.keyBy=ng,d.keys=sa,d.keysIn=Ua,d.map=Zb,d.mapKeys=function(a,b){var d={};return b=C(b,3),Da(a,function(a,h,c){d[b(a,h,c)]=a}),d},d.mapValues=function(a,b){var d={};return b=C(b,3),Da(a,function(a,h,c){d[h]=b(a,h,c)}),d},d.matches=function(a){return Sb(ua(a,!0))},d.matchesProperty=function(a,b){return Td(a,ua(b,!0))},d.memoize=ad,d.merge=Cg,d.mergeWith=sf,d.method=Pg,d.methodOf=Qg,d.mixin=De,d.negate=function(a){if("function"!=typeof a)throw new Ta("Expected a function");
return function(){return!a.apply(this,arguments)}},d.nthArg=function(a){return a=L(a),function(){return arguments[a]}},d.omit=Dg,d.omitBy=function(a,b){return b=C(b),mc(a,function(a,d){return!b(a,d)})},d.once=function(a){return Db(2,a)},d.orderBy=function(a,b,d,c){return null==a?[]:(J(b)||(b=null==b?[]:[b]),d=c?q:d,J(d)||(d=null==d?[]:[d]),Rb(a,b,d))},d.over=Rg,d.overArgs=sg,d.overEvery=Sg,d.overSome=Tg,d.partial=He,d.partialRight=qf,d.partition=og,d.pick=Eg,d.pickBy=function(a,b){return null==a?
{}:mc(a,C(b))},d.property=Te,d.propertyOf=function(a){return function(b){return null==a?q:Oc(a,b)}},d.pull=Zf,d.pullAll=ae,d.pullAllBy=function(a,b,d){return a&&a.length&&b&&b.length?oc(a,b,C(d)):a},d.pullAt=$f,d.range=Ug,d.rangeRight=Vg,d.rearg=tg,d.reject=function(a,b){var d=J(a)?l:$a;return b=C(b,3),d(a,function(a,d,h){return!b(a,d,h)})},d.remove=function(a,b){var d=[];if(!a||!a.length)return d;var c=-1,e=[],g=a.length;for(b=C(b,3);++c<g;){var f=a[c];b(f,c,a)&&(d.push(f),e.push(c))}return rd(a,
e),d},d.rest=B,d.reverse=Yc,d.sampleSize=Zc,d.set=function(a,b,d){return null==a?a:Rc(a,b,d)},d.setWith=function(a,b,d,c){return c="function"==typeof c?c:q,null==a?a:Rc(a,b,d,c)},d.shuffle=function(a){return Zc(a,4294967295)},d.slice=function(a,b,d){var c=a?a.length:0;return c?(d&&"number"!=typeof d&&Qa(a,b,d)?(b=0,d=c):(b=null==b?0:L(b),d=d===q?c:L(d)),Ea(a,b,d)):[]},d.sortBy=pg,d.sortedUniq=function(a){return a&&a.length?sd(a):[]},d.sortedUniqBy=function(a,b){return a&&a.length?sd(a,C(b)):[]},d.split=
function(a,b,d){return O(a).split(b,d)},d.spread=function(a,b){if("function"!=typeof a)throw new Ta("Expected a function");return b=b===q?0:na(L(b),0),B(function(d){var c=d[b];return d=d.slice(0,b),c&&w(d,c),k(a,this,d)})},d.tail=function(a){return Ed(a,1)},d.take=function(a,b,d){return a&&a.length?(b=d||b===q?1:L(b),Ea(a,0,0>b?0:b)):[]},d.takeRight=function(a,b,d){var c=a?a.length:0;return c?(b=d||b===q?1:L(b),b=c-b,Ea(a,0>b?0:b,c)):[]},d.takeRightWhile=function(a,b){return a&&a.length?rc(a,C(b,
3),!1,!0):[]},d.takeWhile=function(a,b){return a&&a.length?rc(a,C(b,3)):[]},d.tap=function(a,b){return b(a),a},d.throttle=function(a,b,d){var c=!0,e=!0;if("function"!=typeof a)throw new Ta("Expected a function");return W(d)&&(c="leading"in d?!!d.leading:c,e="trailing"in d?!!d.trailing:e),de(a,b,{leading:c,maxWait:b,trailing:e})},d.thru=xc,d.toArray=ze,d.toPairs=bf,d.toPairsIn=function(a){return G(a,Ua(a))},d.toPath=function(a){return J(a)?p(a,String):Xc(a)},d.toPlainObject=Ve,d.transform=function(a,
b,d){var c=J(a)||cd(a);if(b=C(b,4),null==d)if(c||W(a)){var g=a.constructor;d=c?J(a)?new g:[]:Ha(g)?wb(ge(a)):{}}else d={};return(c?e:Da)(a,function(a,c,h){return b(d,a,c,h)}),d},d.unary=function(a){return $c(a,1)},d.union=ag,d.unionBy=bg,d.unionWith=cg,d.uniq=function(a){return a&&a.length?qb(a):[]},d.uniqBy=function(a,b){return a&&a.length?qb(a,C(b)):[]},d.uniqWith=function(a,b){return a&&a.length?qb(a,q,b):[]},d.unset=function(a,b){var d;if(null==a)d=!0;else{d=a;var c=b,c=Ra(c,d)?[c+""]:Na(c);d=
Yb(d,c);c=ma(c);d=null!=d&&hf(d,c)?delete d[c]:!0}return d},d.unzip=Fd,d.unzipWith=be,d.values=ke,d.valuesIn=function(a){return null==a?[]:P(a,Ua(a))},d.without=dg,d.words=Xe,d.wrap=function(a,b){return b=null==b?db:b,He(b,a)},d.xor=eg,d.xorBy=fg,d.xorWith=gg,d.zip=hg,d.zipObject=function(a,b){return vd(a||[],b||[],X)},d.zipObjectDeep=function(a,b){return vd(a||[],b||[],Rc)},d.zipWith=ig,d.extend=rf,d.extendWith=Md,De(d,d),d.add=function(a,b){var d;return a===q&&b===q?0:(a!==q&&(d=a),b!==q&&(d=d===
q?b:d+b),d)},d.attempt=tf,d.camelCase=Fg,d.capitalize=Be,d.ceil=Wg,d.clamp=function(a,b,d){return d===q&&(d=b,b=q),d!==q&&(d=oa(d),d=d===d?d:0),b!==q&&(b=oa(b),b=b===b?b:0),Qb(oa(a),b,d)},d.clone=function(a){return ua(a)},d.cloneDeep=function(a){return ua(a,!0)},d.cloneDeepWith=function(a,b){return ua(a,!0,b)},d.cloneWith=function(a,b){return ua(a,!1,b)},d.deburr=Ye,d.endsWith=function(a,b,d){a=O(a);b="string"==typeof b?b:b+"";var c=a.length;return d=d===q?c:Qb(L(d),0,c),d-=b.length,0<=d&&a.indexOf(b,
d)==d},d.eq=Sa,d.escape=function(a){return(a=O(a))&&Gc.test(a)?a.replace(ub,Dc):a},d.escapeRegExp=function(a){return(a=O(a))&&Lb.test(a)?a.replace(ka,"\\$&"):a},d.every=function(a,b,d){var c=J(a)?g:Lc;return d&&Qa(a,b,d)&&(b=q),c(a,C(b,3))},d.find=function(a,b){if(b=C(b,3),J(a)){var d=D(a,b);return-1<d?a[d]:q}return z(a,b,Eb)},d.findIndex=function(a,b){return a&&a.length?D(a,C(b,3)):-1},d.findKey=function(a,b){return z(a,C(b,3),Da,!0)},d.findLast=function(a,b){if(b=C(b,3),J(a)){var d=D(a,b,!0);return-1<
d?a[d]:q}return z(a,b,ye)},d.findLastIndex=function(a,b){return a&&a.length?D(a,C(b,3),!0):-1},d.findLastKey=function(a,b){return z(a,C(b,3),mb,!0)},d.floor=Xg,d.forEach=yc,d.forEachRight=Gd,d.forIn=function(a,b){return null==a?a:ue(a,Oa(b),Ua)},d.forInRight=function(a,b){return null==a?a:Se(a,Oa(b),Ua)},d.forOwn=function(a,b){return a&&Da(a,Oa(b))},d.forOwnRight=function(a,b){return a&&mb(a,Oa(b))},d.get=Id,d.gt=b,d.gte=function(a,b){return a>=b},d.has=hf,d.hasIn=Ue,d.head=ya,d.identity=db,d.includes=
function(a,b,d,c){return a=da(a)?a:ke(a),d=d&&!c?L(d):0,c=a.length,0>d&&(d=na(c+d,0)),zc(a)?c>=d&&-1<a.indexOf(b,d):!!c&&-1<r(a,b,d)},d.indexOf=function(a,b,d){var c=a?a.length:0;return c?(d=L(d),0>d&&(d=na(c+d,0)),r(a,b,d)):-1},d.inRange=function(a,b,d){return b=oa(b)||0,d===q?(d=b,b=0):d=oa(d)||0,a=oa(a),a>=Va(b,d)&&a<na(b,d)},d.invoke=Bg,d.isArguments=m,d.isArray=J,d.isArrayBuffer=function(a){return ga(a)&&"[object ArrayBuffer]"==wa.call(a)},d.isArrayLike=da,d.isArrayLikeObject=ea,d.isBoolean=
function(a){return!0===a||!1===a||ga(a)&&"[object Boolean]"==wa.call(a)},d.isBuffer=Re,d.isDate=function(a){return ga(a)&&"[object Date]"==wa.call(a)},d.isElement=function(a){return!!a&&1===a.nodeType&&ga(a)&&!oe(a)},d.isEmpty=function(a){if(da(a)&&(J(a)||zc(a)||Ha(a.splice)||m(a)))return!a.length;for(var b in a)if(ca.call(a,b))return!1;return!0},d.isEqual=function(a,b){return nb(a,b)},d.isEqualWith=function(a,b,d){var c=(d="function"==typeof d?d:q)?d(a,b):q;return c===q?nb(a,b,d):!!c},d.isError=
ne,d.isFinite=function(a){return"number"==typeof a&&Mf(a)},d.isFunction=Ha,d.isInteger=Ie,d.isLength=gd,d.isMap=function(a){return ga(a)&&"[object Map]"==Ga(a)},d.isMatch=function(a,b){return a===b||ob(a,b,Vc(b))},d.isMatchWith=function(a,b,d){return d="function"==typeof d?d:q,ob(a,b,Vc(b),d)},d.isNaN=function(a){return Ke(a)&&a!=+a},d.isNative=Je,d.isNil=function(a){return null==a},d.isNull=function(a){return null===a},d.isNumber=Ke,d.isObject=W,d.isObjectLike=ga,d.isPlainObject=oe,d.isRegExp=ef,
d.isSafeInteger=function(a){return Ie(a)&&-9007199254740991<=a&&9007199254740991>=a},d.isSet=function(a){return ga(a)&&"[object Set]"==Ga(a)},d.isString=zc,d.isSymbol=ff,d.isTypedArray=cd,d.isUndefined=function(a){return a===q},d.isWeakMap=function(a){return ga(a)&&"[object WeakMap]"==Ga(a)},d.isWeakSet=function(a){return ga(a)&&"[object WeakSet]"==wa.call(a)},d.join=function(a,b){return a?Nf.call(a,b):""},d.kebabCase=Gg,d.last=ma,d.lastIndexOf=function(a,b,d){var c=a?a.length:0;if(!c)return-1;var e=
c;if(d!==q&&(e=L(d),e=(0>e?na(c+e,0):Va(e,c-1))+1),b!==b)return Gb(a,e,!0);for(;e--;)if(a[e]===b)return e;return-1},d.lowerCase=Hg,d.lowerFirst=Ig,d.lt=Ae,d.lte=function(a,b){return b>=a},d.max=function(a){return a&&a.length?x(a,db,b):q},d.maxBy=function(a,d){return a&&a.length?x(a,C(d),b):q},d.mean=function(a){return kf(a)/(a?a.length:0)},d.min=function(a){return a&&a.length?x(a,db,Ae):q},d.minBy=function(a,b){return a&&a.length?x(a,C(b),Ae):q},d.noConflict=function(){return xa._===this&&(xa._=Kf),
this},d.noop=Ee,d.now=Ld,d.pad=function(a,b,d){a=O(a);b=L(b);var c=fa(a);return b&&b>c?(c=(b-c)/2,b=he(c),c=je(c),Bb("",b,d)+a+Bb("",c,d)):a},d.padEnd=function(a,b,d){return a=O(a),a+Bb(a,b,d)},d.padStart=function(a,b,d){return a=O(a),Bb(a,b,d)+a},d.parseInt=function(a,b,d){return d||null==b?b=0:b&&(b=+b),a=O(a).replace(ec,""),Of(a,b||(M.test(a)?16:10))},d.random=function(a,b,d){if(d&&"boolean"!=typeof d&&Qa(a,b,d)&&(b=d=q),d===q&&("boolean"==typeof b?(d=b,b=q):"boolean"==typeof a&&(d=a,a=q)),a===
q&&b===q?(a=0,b=1):(a=oa(a)||0,b===q?(b=a,a=0):b=oa(b)||0),a>b){var c=a;a=b;b=c}return d||a%1||b%1?(d=We(),Va(a+d*(b-a+pe("1e-"+((d+"").length-1))),b)):Qc(a,b)},d.reduce=function(a,b,d){var c=J(a)?u:E,e=3>arguments.length;return c(a,C(b,4),d,e,Eb)},d.reduceRight=function(a,b,d){var c=J(a)?N:E,e=3>arguments.length;return c(a,C(b,4),d,e,ye)},d.repeat=Ze,d.replace=function(){var a=arguments,b=O(a[0]);return 3>a.length?b:b.replace(a[1],a[2])},d.result=function(a,b,d){if(Ra(b,a))c=null==a?q:a[b];else{b=
Na(b);var c=Id(a,b);a=Yb(a,b)}return c===q&&(c=d),Ha(c)?c.call(a):c},d.round=Yg,d.runInContext=Xa,d.sample=function(a){a=da(a)?a:ke(a);var b=a.length;return 0<b?a[Qc(0,b-1)]:q},d.size=function(a){if(null==a)return 0;if(da(a)){var b=a.length;return b&&zc(a)?fa(a):b}return sa(a).length},d.snakeCase=Jg,d.some=function(a,b,d){var c=J(a)?F:Ud;return d&&Qa(a,b,d)&&(b=q),c(a,C(b,3))},d.sortedIndex=function(a,b){return pc(a,b)},d.sortedIndexBy=function(a,b,d){return qc(a,b,C(d))},d.sortedIndexOf=function(a,
b){var d=a?a.length:0;if(d){var c=pc(a,b);if(d>c&&Sa(a[c],b))return c}return-1},d.sortedLastIndex=function(a,b){return pc(a,b,!0)},d.sortedLastIndexBy=function(a,b,d){return qc(a,b,C(d),!0)},d.sortedLastIndexOf=function(a,b){if(a&&a.length){var d=pc(a,b,!0)-1;if(Sa(a[d],b))return d}return-1},d.startCase=Kg,d.startsWith=function(a,b,d){return a=O(a),d=Qb(L(d),0,a.length),a.lastIndexOf(b,d)==d},d.subtract=function(a,b){var d;return a===q&&b===q?0:(a!==q&&(d=a),b!==q&&(d=d===q?b:d-b),d)},d.sum=kf,d.sumBy=
function(a,b){return a&&a.length?V(a,C(b)):0},d.template=function(a,b,c){var e=d.templateSettings;c&&Qa(a,b,c)&&(b=q);a=O(a);b=Md({},b,e,jc);c=Md({},b.imports,e.imports,jc);var g,f,n=sa(c),k=P(c,n),l=0;c=b.interpolate||Ca;var p="__p+='";c=Fe((b.escape||Ca).source+"|"+c.source+"|"+(c===Jc?Y:Ca).source+"|"+(b.evaluate||Ca).source+"|$","g");var v="sourceURL"in b?"//# sourceURL="+b.sourceURL+"\n":"";if(a.replace(c,function(b,d,c,e,n,k){return c||(c=e),p+=a.slice(l,k).replace(aa,Ec),d&&(g=!0,p+="'+__e("+
d+")+'"),n&&(f=!0,p+="';"+n+";\n__p+='"),c&&(p+="'+((__t=("+c+"))==null?'':__t)+'"),l=k+b.length,b}),p+="';",(b=b.variable)||(p="with(obj){"+p+"}"),p=(f?p.replace(Fc,""):p).replace(bc,"$1").replace(cc,"$1;"),p="function("+(b||"obj")+"){"+(b?"":"obj||(obj={});")+"var __t,__p=''"+(g?",__e=_.escape":"")+(f?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+p+"return __p}",b=tf(function(){return Function(n,v+"return "+p).apply(q,k)}),b.source=p,ne(b))throw b;return b},d.times=
function(a,b){if(a=L(a),1>a||9007199254740991<a)return[];var d=4294967295,c=Va(a,4294967295);b=Oa(b);a-=4294967295;for(c=ta(c,b);++d<a;)b(d);return c},d.toInteger=L,d.toLength=gf,d.toLower=function(a){return O(a).toLowerCase()},d.toNumber=oa,d.toSafeInteger=function(a){return Qb(L(a),-9007199254740991,9007199254740991)},d.toString=O,d.toUpper=function(a){return O(a).toUpperCase()},d.trim=function(a,b,d){return(a=O(a))?d||b===q?a.replace(ec,""):(b+="")?(a=a.match(y),b=b.match(y),a.slice(pa(a,b),S(a,
b)+1).join("")):a:a},d.trimEnd=function(a,b,d){return(a=O(a))?d||b===q?a.replace(fc,""):(b+="")?(a=a.match(y),a.slice(0,S(a,b.match(y))+1).join("")):a:a},d.trimStart=function(a,b,d){return(a=O(a))?d||b===q?a.replace(gb,""):(b+="")?(a=a.match(y),a.slice(pa(a,b.match(y))).join("")):a:a},d.truncate=function(a,b){var d=30,c="...";if(W(b))var e="separator"in b?b.separator:e,d="length"in b?L(b.length):d,c="omission"in b?O(b.omission):c;a=O(a);var g=a.length;if(Ya.test(a))var f=a.match(y),g=f.length;if(d>=
g)return a;if(g=d-fa(c),1>g)return c;if(d=f?f.slice(0,g).join(""):a.slice(0,g),e===q)return d+c;if(f&&(g+=d.length-g),ef(e)){if(a.slice(g).search(e)){var n=d;e.global||(e=Fe(e.source,O(hb.exec(e))+"g"));for(e.lastIndex=0;f=e.exec(n);)var k=f.index;d=d.slice(0,k===q?g:k)}}else a.indexOf(e,g)!=g&&(e=d.lastIndexOf(e),-1<e&&(d=d.slice(0,e)));return d+c},d.unescape=function(a){return(a=O(a))&&Kb.test(a)?a.replace(dc,tb):a},d.uniqueId=function(a){var b=++Jf;return O(a)+b},d.upperCase=Lg,d.upperFirst=jf,
d.each=yc,d.eachRight=Gd,d.first=ya,De(d,function(){var a={};return Da(d,function(b,c){ca.call(d.prototype,c)||(a[c]=b)}),a}(),{chain:!1}),d.VERSION="4.5.1",e("bind bindKey curry curryRight partial partialRight".split(" "),function(a){d[a].placeholder=d}),e(["drop","take"],function(a,b){H.prototype[a]=function(d){var c=this.__filtered__;if(c&&!b)return new H(this);d=d===q?1:na(L(d),0);var e=this.clone();return c?e.__takeCount__=Va(d,e.__takeCount__):e.__views__.push({size:Va(d,4294967295),type:a+
(0>e.__dir__?"Right":"")}),e};H.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}}),e(["filter","map","takeWhile"],function(a,b){var d=b+1,c=1==d||3==d;H.prototype[a]=function(a){var b=this.clone();return b.__iteratees__.push({iteratee:C(a,3),type:d}),b.__filtered__=b.__filtered__||c,b}}),e(["head","last"],function(a,b){var d="take"+(b?"Right":"");H.prototype[a]=function(){return this[d](1).value()[0]}}),e(["initial","tail"],function(a,b){var d="drop"+(b?"":"Right");H.prototype[a]=
function(){return this.__filtered__?new H(this):this[d](1)}}),H.prototype.compact=function(){return this.filter(db)},H.prototype.find=function(a){return this.filter(a).head()},H.prototype.findLast=function(a){return this.reverse().find(a)},H.prototype.invokeMap=B(function(a,b){return"function"==typeof a?new H(this):this.map(function(d){return yb(d,a,b)})}),H.prototype.reject=function(a){return a=C(a,3),this.filter(function(b){return!a(b)})},H.prototype.slice=function(a,b){a=L(a);var d=this;return d.__filtered__&&
(0<a||0>b)?new H(d):(0>a?d=d.takeRight(-a):a&&(d=d.drop(a)),b!==q&&(b=L(b),d=0>b?d.dropRight(-b):d.take(b-a)),d)},H.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},H.prototype.toArray=function(){return this.take(4294967295)},Da(H.prototype,function(a,b){var c=/^(?:filter|find|map|reject)|While$/.test(b),e=/^(?:head|last)$/.test(b),g=d[e?"take"+("last"==b?"Right":""):b],f=e||/^find/.test(b);g&&(d.prototype[b]=function(){var b=this.__wrapped__,n=e?[1]:arguments,k=
b instanceof H,l=n[0],p=k||J(b),v=function(a){return a=g.apply(d,w([a],n)),e&&m?a[0]:a};p&&c&&"function"==typeof l&&1!=l.length&&(k=p=!1);var m=this.__chain__,y=!!this.__actions__.length,l=f&&!m,k=k&&!y;return!f&&p?(b=k?b:new H(this),b=a.apply(b,n),b.__actions__.push({func:xc,args:[v],thisArg:q}),new ia(b,m)):l&&k?a.apply(this,n):(b=this.thru(v),l?e?b.value()[0]:b.value():b)})}),e("pop push shift sort splice unshift".split(" "),function(a){var b=le[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",
e=/^(?:pop|shift)$/.test(a);d.prototype[a]=function(){var a=arguments;return e&&!this.__chain__?b.apply(this.value(),a):this[c](function(d){return b.apply(d,a)})}}),Da(H.prototype,function(a,b){var c=d[b];if(c){var e=c.name+"";(Jd[e]||(Jd[e]=[])).push({name:b,func:c})}}),Jd[Pa(q,2).name]=[{name:"wrapper",func:q}],H.prototype.clone=function(){var a=new H(this.__wrapped__);return a.__actions__=ja(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=ja(this.__iteratees__),
a.__takeCount__=this.__takeCount__,a.__views__=ja(this.__views__),a},H.prototype.reverse=function(){if(this.__filtered__){var a=new H(this);a.__dir__=-1;a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a},H.prototype.value=function(){var a,b=this.__wrapped__.value(),d=this.__dir__,c=J(b),e=0>d,g=c?b.length:0;a=0;for(var f=g,n=this.__views__,k=-1,l=n.length;++k<l;){var p=n[k],v=p.size;switch(p.type){case "drop":a+=v;break;case "dropRight":f-=v;break;case "take":f=Va(f,a+v);break;case "takeRight":a=
na(a,f-v)}}if(a={start:a,end:f},f=a.start,n=a.end,a=n-f,e=e?n:f-1,f=this.__iteratees__,n=f.length,k=0,l=Va(a,this.__takeCount__),!c||200>g||g==a&&l==a)return td(b,this.__actions__);c=[];a:for(;a--&&l>k;){e+=d;g=-1;for(p=b[e];++g<n;){var m=f[g],v=m.type,m=(0,m.iteratee)(p);if(2==v)p=m;else if(!m){if(1==v)continue a;break a}}c[k++]=p}return c},d.prototype.at=jg,d.prototype.chain=function(){return Nd(this)},d.prototype.commit=function(){return new ia(this.value(),this.__chain__)},d.prototype.flatMap=
function(a){return this.map(a).flatten()},d.prototype.next=function(){this.__values__===q&&(this.__values__=ze(this.value()));var a=this.__index__>=this.__values__.length,b=a?q:this.__values__[this.__index__++];return{done:a,value:b}},d.prototype.plant=function(a){for(var b,d=this;d instanceof Z;){var c=Dd(d);c.__index__=0;c.__values__=q;b?e.__wrapped__=c:b=c;var e=c,d=d.__wrapped__}return e.__wrapped__=a,b},d.prototype.reverse=function(){var a=this.__wrapped__;return a instanceof H?(this.__actions__.length&&
(a=new H(this)),a=a.reverse(),a.__actions__.push({func:xc,args:[Yc],thisArg:q}),new ia(a,this.__chain__)):this.thru(Yc)},d.prototype.toJSON=d.prototype.valueOf=d.prototype.value=function(){return td(this.__wrapped__,this.__actions__)},Ac&&(d.prototype[Ac]=ce),d}var q,fb=1/0,ac=NaN,Fc=/\b__p\+='';/g,bc=/\b(__p\+=)''\+/g,cc=/(__e\(.*?\)|\b__t\))\+'';/g,dc=/&(?:amp|lt|gt|quot|#39|#96);/g,ub=/[&<>"'`]/g,Kb=RegExp(dc.source),Gc=RegExp(ub.source),Hc=/<%-([\s\S]+?)%>/g,Ic=/<%([\s\S]+?)%>/g,Jc=/<%=([\s\S]+?)%>/g,
Ia=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ja=/^\w*$/,Ka=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,ka=/[\\^$.*+?()[\]{}|]/g,Lb=RegExp(ka.source),ec=/^\s+|\s+$/g,gb=/^\s+/,fc=/\s+$/,hd=/\\(\\)?/g,Y=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,hb=/\w*$/,M=/^0x/i,Kc=/^[-+]0x[0-9a-f]+$/i,Ba=/^0b[01]+$/i,qa=/^\[object .+?Constructor\]$/,vb=/^0o[0-7]+$/i,Z=/^(?:0|[1-9]\d*)$/,Mb=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ca=/($^)/,aa=/['\n\r\u2028\u2029\\]/g,ib=/[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]/g,
y=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]?|[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g,Ya=/[\u200d\ud800-\udfff\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0\ufe0e\ufe0f]/,
Nb=/[a-zA-Z0-9]+/g,Od=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+|[A-Z\xc0-\xd6\xd8-\xde]+|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g,
Pd=/[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Qd="Array Buffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Reflect RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),K={};K["[object Float32Array]"]=K["[object Float64Array]"]=K["[object Int8Array]"]=K["[object Int16Array]"]=K["[object Int32Array]"]=K["[object Uint8Array]"]=K["[object Uint8ClampedArray]"]=
K["[object Uint16Array]"]=K["[object Uint32Array]"]=!0;K["[object Arguments]"]=K["[object Array]"]=K["[object ArrayBuffer]"]=K["[object Boolean]"]=K["[object Date]"]=K["[object Error]"]=K["[object Function]"]=K["[object Map]"]=K["[object Number]"]=K["[object Object]"]=K["[object RegExp]"]=K["[object Set]"]=K["[object String]"]=K["[object WeakMap]"]=!1;var Q={};Q["[object Arguments]"]=Q["[object Array]"]=Q["[object ArrayBuffer]"]=Q["[object Boolean]"]=Q["[object Date]"]=Q["[object Float32Array]"]=
Q["[object Float64Array]"]=Q["[object Int8Array]"]=Q["[object Int16Array]"]=Q["[object Int32Array]"]=Q["[object Map]"]=Q["[object Number]"]=Q["[object Object]"]=Q["[object RegExp]"]=Q["[object Set]"]=Q["[object String]"]=Q["[object Symbol]"]=Q["[object Uint8Array]"]=Q["[object Uint8ClampedArray]"]=Q["[object Uint16Array]"]=Q["[object Uint32Array]"]=!0;Q["[object Error]"]=Q["[object Function]"]=Q["[object WeakMap]"]=!1;var gc={"\u00c0":"A","\u00c1":"A","\u00c2":"A","\u00c3":"A","\u00c4":"A","\u00c5":"A",
"\u00e0":"a","\u00e1":"a","\u00e2":"a","\u00e3":"a","\u00e4":"a","\u00e5":"a","\u00c7":"C","\u00e7":"c","\u00d0":"D","\u00f0":"d","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u00cb":"E","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u00eb":"e","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u00cf":"I","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u00ef":"i","\u00d1":"N","\u00f1":"n","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u00d5":"O","\u00d6":"O","\u00d8":"O","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u00f5":"o","\u00f6":"o",
"\u00f8":"o","\u00d9":"U","\u00da":"U","\u00db":"U","\u00dc":"U","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u00fc":"u","\u00dd":"Y","\u00fd":"y","\u00ff":"y","\u00c6":"Ae","\u00e6":"ae","\u00de":"Th","\u00fe":"th","\u00df":"ss"},Lc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},id={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},ha={"function":!0,object:!0},jd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},pe=parseFloat,Ob=parseInt,
Za=ha[typeof exports]&&exports&&!exports.nodeType?exports:q,ba=ha[typeof module]&&module&&!module.nodeType?module:q,Rd=ba&&ba.exports===Za?Za:q,kd=I(Za&&ba&&"object"==typeof global&&global),jb=I(ha[typeof self]&&self),ra=I(ha[typeof window]&&window),ha=I(ha[typeof this]&&this),xa=kd||ra!==(ha&&ha.window)&&ra||jb||ha||Function("return this")(),La=Xa();(ra||jb||{})._=La;"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("third_party/lo-dash/lo-dash.min",[],function(){return La}):
Za&&ba?(Rd&&((ba.exports=La)._=La),Za._=La):xa._=La}).call(this);
define("qowtRoot/utils/typeUtils",[],function(){function c(a,c,g){if(g.types.every(function(a){var c=k[a];if(!c)throw Error("Bad config to checkArgTypes: unknown type: "+a);return!c(g.value)})){var f=1===g.types.length?g.types[0]:"["+g.types.join(",")+"]";throw Error("Argument "+c+" passed to function "+a+" was supposed to be of type "+f+" but had value "+g.value);}}var f={checkArgTypes:function(a,e){for(var g in e){var f={value:e[g][0],types:e[g].slice(1)};c(a,g,f)}},isObject:function(a){return"object"===
typeof a&&null!==a},isPromise:function(a){return a instanceof Promise},isPromiseLike:function(a){return!(!a||!f.isFunction(a.then))},isList:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isNumber:function(a){return"number"===typeof a&&!isNaN(a)},isInteger:function(a){return"number"===typeof a&&parseInt(a,10)===a},isFunction:function(a){return"function"===typeof a},isString:function(a){return"[object String]"===Object.prototype.toString.call(a)},isRegex:function(a){return"[object RegExp]"===
Object.prototype.toString.call(a)},isNode:function(a){return a instanceof Node},isNull:function(a){return null===a},isUndefined:function(a){return void 0===a},isBoolean:function(a){return"boolean"===typeof a},getType:function(a){var c;Object.keys(k).forEach(function(g){k[g](a)&&(c=g)});return c},isArgumentsObjectOrList:function(a){return a instanceof Object&&a.hasOwnProperty("length")},extend:function(a,c){for(var g in c)c.hasOwnProperty(g)&&(a[g]=c[g])},createNewType:function(a){var c=function(){},
g={isOfType:function(a){return void 0!==a&&null!==a&&a.constructor===c},markAsType:function(a){Object.defineProperty(a,"constructor",{value:c,configurable:!1,writable:!1,enumerable:!1});return a}};if(a){if(k[a])throw Error("Already registered type "+a);k[a]=g.isOfType}return g}},k={string:f.isString,object:f.isObject,promise:f.isPromise,promiseLike:f.isPromiseLike,node:f.isNode,regex:f.isRegex,"function":f.isFunction,number:f.isNumber,list:f.isList,boolean:f.isBoolean,"null":f.isNull,undefined:f.isUndefined};
return f});define("qowtRoot/models/fileInfo",[],function(){return{}});
define("qowtRoot/pubsub/pubsub",["third_party/lo-dash/lo-dash.min"],function(){function c(a,c){var e=[],k=[],l=[],F=[];g[a]&&g[a].length&&(t++,g[a].forEach(function(a){a.config.after?k.push(a):e.push(a);a.config.once&&F.push(a)}),e.concat(k).forEach(function(e){l.push(e.callback(a,c))}),F.forEach(function(a){f(a.token)}));return Promise.all(l)}function f(a){var c;_.values(g).some(function(e){return e.some(function(g,f){return g.token===a?(c=e.splice(f,1)[0],!0):!1})});return c}function k(a){var c=
0;return c=a?g[a]?g[a].length:0:_.values(g).reduce(function(a,c){return a+c.length},0)}function a(){g={}}var e=Object.create(Object.prototype,{subscriberCount:{get:function(){return k()}},registeredSignals:{get:function(){return _.keys(g)}},publishCount:{get:function(){return t}}});e.subscribe=function(a,c,e){if(!_.isString(a)||!a)throw new TypeError("invalid signal");if(!_.isFunction(c))throw new TypeError("invalid callback");e=e||{};e.once=!!e.once;e.after=!!e.after;var f=(++l).toString();g[a]=
g[a]||[];g[a].push({token:f,callback:c,config:e});return f};e.publish=function(a,e){if(!_.isString(a)||!a)throw new TypeError("invalid signal");e=e||{};return c(a,e)};e.doAction=function(a,e){if(!_.isString(a)||!a)throw new TypeError("invalid action");e=e||{};e=_.isString(e)?{contentType:e}:e;return c("qowt:doAction",{action:a,context:e})};e.unsubscribe=function(a){if(void 0!==a){if(!_.isString(a)||!a)throw new TypeError("invalid token");return f(a)}};e.subscriberCountForSignal=function(a){if(!_.isString(a)||
!a)throw new TypeError("invalid signal");return k(a)};e.clear=a;e.reset=function(){a();t=l=0};var g={},l=0,t=0;return e});define("qowtRoot/models/env",[],function(){return{pointsPerEm:12,fontUnit:"pt"}});
define("qowtRoot/utils/domListener",["qowtRoot/models/env"],function(c){var f={},k=0,a=function(a,e,g,k,w){w=w||!1;e||(console.warn("invalid element supplied for addListener"),e=c.rootNode?c.rootNode:window.document);e.addEventListener(g,k,w);a&&(f[a]=f[a]||[],f[a].push({element:e,eventName:g,handlerFunction:k,useCapture:w}))},e=function(a,e,g,f){f=f||!1;a||(console.warn("invalid element supplied for removeListener"),a=c.rootNode?c.rootNode:window.document);a.removeEventListener(e,g,f)},g=function(a){if(a=
f[a])for(;0<a.length;){var c=a.pop();e(c.element,c.eventName,c.handlerFunction,c.useCapture)}};return{add:function(c,e,g,f,k){a(c,e,g,f,k)},removeGroup:function(a){g(a)},reset:function(){for(var a in f)g(a)},addListener:function(c,e,g,f){a("__DOMLISTENER"+k++,c,e,g,f)},removeListener:function(a,c,g,f){e(a,c,g,f)},dispatchEvent:function(a,e,g){a||(console.warn("invalid element supplied for dispatchEvent"),a=c.rootNode?c.rootNode:window.document);var f=document.createEvent("Event");f.initEvent(e,!0,
!1);f.detail=g;f.eventName=e;a.dispatchEvent(f)}}});(function(){var c={},f=window.sessionStorage.getItem("featureOverrides");f&&(c=JSON.parse(f));c.isRelease=!0;c.edit=!1;window.sessionStorage.setItem("featureOverrides",JSON.stringify(c));window.localStorage.removeItem("testsToInclude");window.localStorage.removeItem("builtInTests")})();define("configs/releaseFeatures",function(){});
(function(){var c={},f=window.sessionStorage.getItem("featureOverrides");f&&(c=JSON.parse(f));c.save=!!(window.chrome&&window.chrome.fileSystem&&window.chrome.fileSystem.chooseEntry);window.sessionStorage.setItem("featureOverrides",JSON.stringify(c))})();define("configs/chromeFeatures",function(){});define("qowtRoot/features/pack",[],function(){return{edit:!0,save:!1,pointEdit:!1,hats:!0}});
define("qowtRoot/features/utils",["qowtRoot/features/pack"],function(c){var f={isEnabled:function(a){a=c[a];return void 0===a?!1:a},enable:function(a){c[a]=!0},disable:function(a){c[a]=!1},setOverrides:function(a){for(var e in a)a.hasOwnProperty(e)&&(c[e]=a[e])},isDebug:function(){return void 0!==k?k:!f.isEnabled("isRelease")},setDebugOverride:function(a){k=a},clearDebugOverride:function(){k=void 0}},k;return f});
(function(c){c("qowtRoot/third_party/when/lib/timer",["require"],function(c){return{set:setTimeout,clear:clearTimeout}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});
(function(c){c("qowtRoot/third_party/when/lib/timed",[],function(){return function(c,k,a){a.prototype.delay=function(a){var g=this;return new this.constructor(function(k,t,n){g.then(function(g){c(function(){k(g)},a)},t,n)})};a.prototype.timeout=function(a,g){var l=this,t=1<arguments.length;return new this.constructor(function(n,p,w){var u=c(function(){p(t?g:Error("timed out after "+a+"ms"))},a);l.then(function(a){k(u);n(a)},function(a){k(u);p(a)},w)})};return a}})})("function"===typeof define&&define.amd?
define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/array",[],function(){return function(c){var k=Array.prototype.map,a=Array.prototype.reduce,e=Array.prototype.reduceRight,g=Array.prototype.forEach,l=c.resolve,t=c.all;c.any=function(a){return new c(function(c,e){function f(a){t.push(a);0===--k&&e(t)}var k=0,t=[];g.call(a,function(a){++k;l(a).then(c,f)});0===k&&c()})};c.some=function(a,e){return new c(function(c,f,k){function t(a){0<z&&(--z,r.push(a),0===z&&c(r))}function x(a){0<D&&(--D,E.push(a),0===D&&
f(E))}var z=0,D,r=[],E=[];g.call(a,function(a){++z;l(a).then(t,x,k)});e=Math.max(e,0);D=z-e+1;z=Math.min(e,z);0===z&&c(r)})};c.settle=function(a){return t(k.call(a,function(a){function c(){return a.inspect()}a=l(a);return a.then(c,c)}))};c.map=function(a,c,e){return t(k.call(a,function(a){return l(a).then(c,e)}))};c.reduce=function(c,e){function g(a,c,f){return l(a).then(function(a){return l(c).then(function(c){return e(a,c,f)})})}return 2<arguments.length?a.call(c,g,arguments[2]):a.call(c,g)};c.reduceRight=
function(a,c){function g(a,e,f){return l(a).then(function(a){return l(e).then(function(e){return c(a,e,f)})})}return 2<arguments.length?e.call(a,g,arguments[2]):e.call(a,g)};c.prototype.spread=function(a){return this.then(t).then(function(c){return a.apply(void 0,c)})};return c}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/fatal",["require","./timer"],function(c){var k=c("./timer").set;return function(a){k(function(){throw a;},0)}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});
(function(c){c("qowtRoot/third_party/when/lib/flow",["require","./fatal"],function(c){function k(){throw new TypeError("catch predicate must be a function");}function a(a,c){return function(){a.call(this);return c}}function e(){}var g=c("./fatal");return function(c){function f(a,c){return function(e){return(c===Error||null!=c&&c.prototype instanceof Error?e instanceof c:c(e))?a.call(this,e):p(e)}}var n=c.resolve,p=c.reject,w=c.prototype["catch"];c.prototype.done=function(a,c){var g=this._handler;
g.when(this._maybeFatal,e,this,g.receiver,a,c)};c.prototype._maybeFatal=function(a){if(Object(a)===a)n(a)["catch"](this._fatal)};c.prototype._fatal=g;c.prototype["catch"]=c.prototype.otherwise=function(a){return 1===arguments.length?w.call(this,a):"function"!==typeof a?this.ensure(k):w.call(this,f(arguments[1],a))};c.prototype["finally"]=c.prototype.ensure=function(c){if("function"!==typeof c)return this;c=a(c,this);return this.then(c,c)};c.prototype["else"]=c.prototype.orElse=function(a){return this.then(void 0,
function(){return a})};c.prototype.yield=function(a){return this.then(function(){return a})};c.prototype.tap=function(a){return this.then(a).yield(this)};return c}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});(function(c){c("qowtRoot/third_party/when/lib/inspect",[],function(){return function(c){c.prototype.inspect=function(){return this._handler.inspect()};return c}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/iterate",[],function(){return function(c){function k(a,c,f,n){function p(n){return e(f(n)).then(function(){return k(a,c,f,a(n))})}return e(n).then(function(a){return e(c(a)).then(function(c){return c?a:p(a)})})}function a(c,f,k,n){function p(n,p){return e(k(n)).then(function(){return a(c,f,k,p)})}return e(n).then(function(a){return e(f(a)).then(function(f){return f?a:e(c(a)).spread(p)})})}var e=c.resolve;c.iterate=k;c.unfold=a;return c}})})("function"===
typeof define&&define.amd?define:function(c){module.exports=c()});(function(c){c("qowtRoot/third_party/when/lib/progress",[],function(){return function(c){c.prototype.progress=function(c){return this.then(void 0,void 0,c)};return c}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/with",[],function(){return function(c){c.prototype["with"]=c.prototype.withThis=c.prototype._bindContext;return c}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/makePromise",[],function(){return function(c){function k(c){var e=this;this._handler=new u;a(c,function(a){e._handler.resolve(a)},function(a){e._handler.reject(a)},function(a){e._handler.notify(a)})}function a(a,c,e,g){try{a(c,e,g)}catch(f){e(f)}}function e(a){return new g(new N(new D(a)))}function g(a){this._handler=a}function l(a,c){if(a instanceof k){var e=a._handler.join();return c===e?new D(new TypeError("Promise cycle")):e}return V(a)?n(a):new z(a)}
function t(a){return a instanceof k?a._handler.join():n(a)}function n(a){try{var c=a.then;return"function"===typeof c?new x(c,a):new z(a)}catch(e){return new D(e)}}function p(){}function w(a){this.handler=a;if(this._isMonitored()){var c=this._env.promiseMonitor.captureStack();this.trace=a._addTrace(c)}}function u(a){this.consumers=[];this.receiver=a;this.handler=void 0;this.resolved=!1;this._isMonitored()&&(this.trace=this._env.promiseMonitor.captureStack())}function N(a){w.call(this,a)}function F(a,
c){w.call(this,a);this.receiver=c}function x(a,c){u.call(this);this.assimilated=!1;this.untrustedThen=a;this.thenable=c}function z(a){this.value=a}function D(a){this.value=a;this.observed=!1;this._isMonitored()&&(this.key=this._env.promiseMonitor.startTrace(a))}function r(){return{state:"pending"}}function E(a,c,e,g,f,k,n,l){this.a=a;this.b=c;this.c=e;this.d=g;this.e=f;this.f=k;this.g=n;this.handler=l}function R(a,c){this.q=a;this.value=c}function V(a){return("object"===typeof a||"function"===typeof a)&&
null!==a}function ta(a,c,g){try{return a.call(g,c)}catch(f){return e(f)}}function G(){}var v,P=c.scheduler,pa=Object.create||function(a){function c(){}c.prototype=a;return new c};k.resolve=function(a){return a instanceof k?a:new g(new N(l(a)))};k.reject=e;k.never=function(){return v};k._defer=function(){return new g(new u)};k.prototype.then=function(a,c,e){var f=this._handler,k=new u(f.receiver);f.when(k.resolve,k.notify,k,f.receiver,a,c,e);return new g(k)};k.prototype["catch"]=k.prototype.otherwise=
function(a){return this.then(void 0,a)};k.prototype._bindContext=function(a){return new g(new F(this._handler,a))};k.all=function(a){function c(a,e,g,f){g.when(G,G,void 0,a,function(a){e[f]=a;0===--k&&this.resolve(e)},a.reject,a.notify)}var e=new u,f=a.length>>>0,k=f,n=[],l,p;for(l=0;l<f;++l)l in a?(p=a[l],V(p)?c(e,n,t(p),l):(n[l]=p,--k)):--k;0===k&&e.resolve(n);return new g(e)};k.race=function(a){if(Object(a)===a&&0===a.length)return v;for(var c=new u,e=0;e<a.length;++e)l(a[e]).when(G,G,void 0,c,
c.resolve,c.reject);return new g(c)};g.prototype=pa(k.prototype);p.prototype.inspect=r;p.prototype.when=G;p.prototype.resolve=G;p.prototype.reject=G;p.prototype.notify=G;p.prototype.join=function(){return this};p.prototype._env=c.monitor||k;p.prototype._addTrace=G;p.prototype._isMonitored=function(){return"undefined"!==typeof this._env.promiseMonitor};w.prototype=pa(p.prototype);w.prototype.join=function(){return this.handler.join()};w.prototype.inspect=function(){return this.handler.inspect()};w.prototype._addTrace=
function(a){return this.handler._addTrace(a)};u.prototype=pa(p.prototype);u.prototype.inspect=function(){return this.resolved?this.handler.join().inspect():r()};u.prototype.resolve=function(a){this._join(l(a,this))};u.prototype.reject=function(a){this._join(new D(a))};u.prototype.join=function(){return this.resolved?this.handler.join():this};u.prototype.run=function(){var a=this.consumers,c=this.handler=this.handler.join();this.consumers=void 0;for(var e=0;e<a.length;e+=7)c.when(a[e],a[e+1],a[e+2],
a[e+3],a[e+4],a[e+5],a[e+6])};u.prototype._join=function(a){this.resolved||(this.resolved=!0,this.handler=a,P.enqueue(this),this._isMonitored()&&(this.trace=a._addTrace(this.trace)))};u.prototype.when=function(a,c,e,g,f,k,n){this.resolved?P.enqueue(new E(a,c,e,g,f,k,n,this.handler.join())):this.consumers.push(a,c,e,g,f,k,n)};u.prototype.notify=function(a){this.resolved||P.enqueue(new R(this.consumers,a))};u.prototype._addTrace=function(a){return this.resolved?this.handler._addTrace(a):a};N.prototype=
pa(w.prototype);N.prototype.when=function(a,c,e,g,f,k,n){P.enqueue(new E(a,c,e,g,f,k,n,this.join()))};F.prototype=pa(w.prototype);F.prototype.when=function(a,c,e,g,f,k,n){void 0!==this.receiver&&(g=this.receiver);this.join().when(a,c,e,g,f,k,n)};x.prototype=pa(u.prototype);x.prototype.when=function(a,c,e,g,f,k,n){this.assimilated||(this.assimilated=!0,this._assimilate());u.prototype.when.call(this,a,c,e,g,f,k,n)};x.prototype._assimilate=function(){var a=this;this._try(this.untrustedThen,this.thenable,
function(c){a.resolve(c)},function(c){a.reject(c)},function(c){a.notify(c)})};x.prototype._try=function(a,c,e,g,f){try{a.call(c,e,g,f)}catch(k){g(k)}};z.prototype=pa(p.prototype);z.prototype.inspect=function(){return{state:"fulfilled",value:this.value}};z.prototype.when=function(a,c,e,g,f){c="function"===typeof f?ta(f,this.value,g):this.value;a.call(e,c)};D.prototype=pa(p.prototype);D.prototype.inspect=function(){return{state:"rejected",reason:this.value}};D.prototype.when=function(a,c,g,f,k,n){this._isMonitored()&&
!this.observed&&this._env.promiseMonitor.removeTrace(this.key);this.observed=!0;c="function"===typeof n?ta(n,this.value,f):e(this.value);a.call(g,c)};D.prototype._addTrace=function(a){this.observed||this._env.promiseMonitor.updateTrace(this.key,a)};v=new g(new p);E.prototype.run=function(){this.handler.when(this.a,this.b,this.c,this.d,this.e,this.f,this.g)};R.prototype.run=function(){for(var a=this.q,c=1;c<a.length;c+=7)this._notify(a[c],a[c+1],a[c+2],a[c+5])};R.prototype._notify=function(a,c,e,g){var f;
if("function"===typeof g)try{f=g.call(e,this.value)}catch(k){f=k}else f=this.value;a.call(c,f)};return k}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/Queue",[],function(){function c(f){this.head=this.tail=this.length=0;this.buffer=Array(1<<f)}c.prototype.push=function(c){this.length===this.buffer.length&&this._ensureCapacity(2*this.length);this.buffer[this.tail]=c;this.tail=this.tail+1&this.buffer.length-1;++this.length;return this.length};c.prototype.shift=function(){var c=this.buffer[this.head];this.buffer[this.head]=void 0;this.head=this.head+1&this.buffer.length-1;--this.length;return c};c.prototype._ensureCapacity=
function(c){var a=this.head,e=this.buffer,g=Array(c),f=0,t;if(0===a)for(t=this.length;f<t;++f)g[f]=e[f];else{c=e.length;for(t=this.tail;a<c;++f,++a)g[f]=e[a];for(a=0;a<t;++f,++a)g[f]=e[a]}this.buffer=g;this.head=0;this.tail=this.length};return c})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/scheduler",["require","./Queue"],function(c){function k(c){this._enqueue=c;this._handlerQueue=new a(15);var g=this;this.drainQueue=function(){g._drainQueue()}}var a=c("./Queue");k.prototype.enqueue=function(a){1===this._handlerQueue.push(a)&&this._enqueue(this.drainQueue)};k.prototype._drainQueue=function(){for(var a=this._handlerQueue;0<a.length;)a.shift().run()};return k})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});
(function(c){c("qowtRoot/third_party/when/lib/async",["require"],function(c){var k;return"undefined"!==typeof process&&null!==process&&"function"===typeof process.nextTick?function(a){process.nextTick(a)}:(k="function"===typeof MutationObserver&&MutationObserver||"function"===typeof WebKitMutationObserver&&WebKitMutationObserver)?function(a,c){var g,f=a.createElement("div");(new c(function(){var a=g;g=void 0;a()})).observe(f,{attributes:!0});return function(a){g=a;f.setAttribute("class","x")}}(document,
k):function(a){var c=setTimeout;return function(a){c(a,0)}}(c)})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});(function(c){c("qowtRoot/third_party/when/lib/Promise",["require","./makePromise","./scheduler","./async"],function(c){var k=c("./makePromise"),a=c("./scheduler");c=c("./async");return k({scheduler:new a(c),monitor:"undefined"!==typeof console?console:void 0})})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});
(function(c){c("qowtRoot/third_party/when/when","require ./lib/timer ./lib/timed ./lib/array ./lib/flow ./lib/inspect ./lib/iterate ./lib/progress ./lib/with ./lib/Promise".split(" "),function(c){function k(a,c,e,g){var f=D(a);return 2>arguments.length?f:f.then(c,e,g)}function a(a){return function(){return g(a,this,r.call(arguments))}}function e(a){return g(a,this,r.call(arguments,1))}function g(a,c,e){return z.all(e).then(function(e){return a.apply(c,e)})}function l(){function a(c){g._handler.resolve(c)}
function c(a){g._handler.reject(a)}function e(a){g._handler.notify(a)}var g=z._defer();this.promise=g;this.resolve=a;this.reject=c;this.notify=e;this.resolver={resolve:a,reject:c,notify:e}}var t=c("./lib/timer"),n=c("./lib/timed"),p=c("./lib/array"),w=c("./lib/flow"),u=c("./lib/inspect"),N=c("./lib/iterate"),F=c("./lib/progress"),x=c("./lib/with"),z=c("./lib/Promise"),z=[p,w,N,F,u,x].reduceRight(function(a,c){return c(a)},n(t.set,t.clear,z)),D=z.resolve,r=Array.prototype.slice;k.promise=function(a){return new z(a)};
k.resolve=z.resolve;k.reject=z.reject;k.lift=a;k["try"]=e;k.attempt=e;k.iterate=z.iterate;k.unfold=z.unfold;k.join=function(){return z.all(arguments)};k.all=function(a){return k(a,z.all)};k.settle=function(a){return k(a,z.settle)};k.any=a(z.any);k.some=a(z.some);k.map=function(a,c){return k(a,function(a){return z.map(a,c)})};k.reduce=function(a,c){var e=r.call(arguments,1);return k(a,function(a){e.unshift(a);return z.reduce.apply(z,e)})};k.reduceRight=function(a,c){var e=r.call(arguments,1);return k(a,
function(a){e.unshift(a);return z.reduceRight.apply(z,e)})};k.isPromiseLike=function(a){return a&&"function"===typeof a.then};k.Promise=z;k.defer=function(){return new l};return k})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});
define("qowtRoot/utils/promiseUtils",["qowtRoot/utils/typeUtils","qowtRoot/third_party/when/when"],function(c,f){var k={cast:function(a){return a instanceof Promise?a:Promise.resolve(a)},delay:function(a,c){a=a||0;return new Promise(function(g){setTimeout(g.bind(void 0,c),a)})},delayThenReject:function(a,c){a=a||0;return new Promise(function(g,f){setTimeout(f.bind(g,c),a)})},throwAndEscapeChain:function(a){a instanceof Error||(console.error("throwAndEscapeChain wrapping value in new Error: ",a),a=
Error(a));f.reject(a).done();throw a;},pipeline:function(a){function e(){for(var f=Array.prototype.slice.call(arguments,0);0<a.length;){var n=a.shift();if(c.isPromiseLike(n))return k.cast(n).then(function(c){a.unshift(c);return e.apply(g,f)});c.checkArgTypes("PromiseUtils.pipeline",{task:[n,"function"]});n=n.apply(g,f);if(c.isPromiseLike(n))return k.cast(n).then(function(a){return e(a)});f=[n]}return f[0]}var g=this,f=Array.prototype.slice.call(arguments,0);if(f.some(c.isPromiseLike))return Promise.all(f).then(function(a){return k.pipeline.apply(g,
a)});c.checkArgTypes("PromiseUtils.pipeline",{tasks:[a,"list"]});a=a.slice(0);return e.apply(g,f.slice(1))},finally:function(a,c){function g(){return k.cast(c()).then(function(){return a})}return k.cast(a).then(g,g)},waitForNextMacroTurn:function(a){return new Promise(function(c){window.setTimeout(c.bind(null,a),0)})}};return k});
define("utils/analytics/googleAnalytics",["qowtRoot/features/utils","qowtRoot/utils/promiseUtils"],function(c,f){function k(e,g){var f;void 0!==z?f=z?Promise.resolve():Promise.reject(Error("ga permission cached (not permitted)")):(window.analytics&&chrome&&chrome.metricsPrivate&&chrome.metricsPrivate.getIsCrashReportingEnabled&&(!c.isDebug()||void 0!==window.__gaMock)?f=Promise.resolve():(console.warn("GA not supported on this platform"),f=Promise.reject(Error("GA not supported on this platform"))),
f=f.then(a).catch(l));return f.then(t).then(e.bind(null,g)).catch(function(){})}function a(){var a=Error("Crash reporting setting timed out");return Promise.race([e(),f.delayThenReject(1E3,a)]).then(g)}function e(){return new Promise(function(a){chrome.metricsPrivate.getIsCrashReportingEnabled(a)})}function g(a){return new Promise(function(c,e){D=window.analytics.getService(F);D.getConfig().addCallback(function(g){g.setTrackingPermitted(a);(z=a)?c():(console.warn("Crash reporting not allowed"),e())})})}
function l(){z=!1;return Promise.reject()}function t(){void 0===r&&n("QO");return Promise.resolve()}function n(a){r&&r.sendAppView(a);r=D.getTracker(N[a]);E&&r.set(window.analytics.Parameters.SESSION_GROUP,E);r.forceSessionStart();return Promise.resolve()}function p(a){x!==a&&(x=a,r.sendAppView(a));return Promise.resolve()}function w(a){r.sendException(a.msg,a.fatal);return Promise.resolve()}function u(a){r.sendEvent(a.category,a.action,a.label,a.value);return Promise.resolve()}var N={word:"UA-44583639-1",
sheet:"UA-44583639-2",point:"UA-44583639-3",QO:"UA-44583639-4"},F="Quickoffice",x,z,D,r,E;return{setSessionGroup:function(a){E=a},setTracker:function(a){return k(n,a)},sendState:function(a){return k(p,a)},sendException:function(a){return k(w,a)},sendEvent:function(a){return k(u,a)},reset:function(){r=D=z=x=void 0}}});
define("qowtRoot/utils/i18n",["qowtRoot/utils/typeUtils","utils/analytics/googleAnalytics"],function(c,f){var k={getMessage:function(a,e){var g="????";if(!chrome||!chrome.i18n)return a;c.isString(a)?(g=chrome.i18n.getMessage(a,e),g||(g=a,k.logError_("Missing translation",a))):k.logError_("Invalid string translation Id",a);return g},logError_:function(a,c){console.error(a+" "+c);f.sendException({msg:a,fatal:!1})}};return k});
define("qowtRoot/customElements/ui/shareButton",["qowtRoot/models/fileInfo","qowtRoot/pubsub/pubsub","qowtRoot/utils/domListener","qowtRoot/utils/i18n"],function(c,f,k,a){var e=Object.create(HTMLElement.prototype);e.createdCallback=function(){this.classList.add("button");this.classList.add("primary");this.classList.add("blue");c.isMacroEnabledFile&&this.classList.add("disabled");this.innerText=a.getMessage("share_button");var e=document.createElement("span");this.insertBefore(e,this.firstChild);k.addListener(this,
"mouseover",this.onMouseOver_);k.addListener(this,"mouseout",this.onMouseOut_);this.classList.contains("disabled")?this.setAttribute("aria-label",a.getMessage("disabled_share_button")):(k.addListener(this,"click",this.onClick_,!1),k.addListener(this,"keydown",this.onKeyDownHandler_,!1),k.addListener(this,"focus",this.onFocus_.bind(this),!1),this.setAttribute("aria-label",a.getMessage("share_button")));this.setAttribute("tabIndex",0);this.setAttribute("role","button")};e.appendTo=function(a){a.appendChild(this)};
e.onClick_=function(){f.publish("qowt:doAction",{action:"share",context:{contentType:"common"}})};e.onMouseOver_=function(){var a={name:"share",dimensions:this.getBoundingClientRect()};this.classList.contains("disabled")?a.name="share_for_macroenabledfiles":a.name="share";document.getElementById("main-toolbar").$.tooltip.show(a)};e.onMouseOut_=function(){document.getElementById("main-toolbar").$.tooltip.hide()};e.onKeyDownHandler_=function(a){if(13===a.keyCode||32===a.keyCode)a.preventDefault(),a.stopPropagation(),
this.onClick_()};e.onFocus_=function(){var a=this.getAttribute("aria-label")+" "+this.getAttribute("role"),c=window.cvox;c&&c.Api.speak(a,0)};e.detach=function(){k.removeListener(this,"click",this.onClick_,!1);k.removeListener(this,"mouseover",this.onMouseOver_);k.removeListener(this,"mouseout",this.onMouseOut_);k.removeListener(this,"keydown",this.onKeyDownHandler_,!1);k.removeListener(this,"focus",this.onFocus_.bind(this),!1)};window.QOWTShareButton=document.registerElement("qowt-sharebutton",{prototype:e});
return{}});
define("qowtRoot/customElements/ui/presentButton",["qowtRoot/pubsub/pubsub","qowtRoot/utils/domListener","qowtRoot/utils/i18n"],function(c,f,k){var a=Object.create(HTMLElement.prototype);a.createdCallback=function(){this.classList.add("button");this.classList.add("basic");this.innerText=k.getMessage("present_button");var a=document.createElement("span");this.insertBefore(a,this.firstChild);f.addListener(this,"click",this.onClick_,!1);f.addListener(this,"mouseover",this.onMouseOver_);f.addListener(this,"mouseout",
this.onMouseOut_);f.addListener(this,"keydown",this.onKeyDownHandler_,!1);f.addListener(this,"focus",this.onFocus_.bind(this),!1);this.setAttribute("tabIndex",0);this.setAttribute("role","button");this.setAttribute("aria-label",k.getMessage("present_button"))};a.appendTo=function(a){a.appendChild(this)};a.onClick_=function(){c.publish("qowt:doAction",{action:"startSlideshow",context:{contentType:"presentation"}})};a.onMouseOver_=function(){var a={name:"presentation",dimensions:this.getBoundingClientRect()};
document.getElementById("main-toolbar").$.tooltip.show(a)};a.onMouseOut_=function(){document.getElementById("main-toolbar").$.tooltip.hide()};a.onKeyDownHandler_=function(a){if(13===a.keyCode||32===a.keyCode)a.preventDefault(),a.stopPropagation(),this.onClick_()};a.onFocus_=function(){var a=this.getAttribute("aria-label")+" "+this.getAttribute("role"),c=window.cvox;c&&c.Api.speak(a,0)};a.detach=function(){f.removeListener(this,"click",this.onClick_,!1);f.removeListener(this,"mouseover",this.onMouseOver_);
f.removeListener(this,"mouseout",this.onMouseOut_);f.removeListener(this,"keydown",this.onKeyDownHandler_,!1);f.removeListener(this,"focus",this.onFocus_.bind(this),!1)};window.QOWTPresentButton=document.registerElement("qowt-presentbutton",{prototype:a});return{}});
define("qowtRoot/customElements/ui/downloadButton",["qowtRoot/pubsub/pubsub","qowtRoot/utils/domListener","qowtRoot/utils/i18n"],function(c,f,k){var a=Object.create(HTMLElement.prototype);a.createdCallback=function(){this.classList.add("button");this.classList.add("basic");this.innerText=k.getMessage("download_button");var a=document.createElement("span");this.insertBefore(a,this.firstChild);f.addListener(this,"click",this.onClick_,!1);f.addListener(this,"mouseover",this.onMouseOver_);f.addListener(this,
"mouseout",this.onMouseOut_);f.addListener(this,"keydown",this.onKeyDownHandler_,!1);f.addListener(this,"focus",this.onFocus_.bind(this),!1);this.setAttribute("tabIndex",0);this.setAttribute("role","button");this.setAttribute("aria-label",k.getMessage("download_button"))};a.appendTo=function(a){a.appendChild(this)};a.onClick_=function(){c.publish("qowt:doAction",{action:"download",context:{contentType:"common"}})};a.onMouseOver_=function(){var a={name:"download",dimensions:this.getBoundingClientRect()};
document.getElementById("main-toolbar").$.tooltip.show(a)};a.onMouseOut_=function(){document.getElementById("main-toolbar").$.tooltip.hide()};a.onKeyDownHandler_=function(a){if(13===a.keyCode||32===a.keyCode)a.preventDefault(),a.stopPropagation(),this.onClick_(),this.blur()};a.onFocus_=function(){var a=this.getAttribute("aria-label")+" "+this.getAttribute("role"),c=window.cvox;c&&c.Api.speak(a,0)};a.detach=function(){f.removeListener(this,"click",this.onClick_,!1);f.removeListener(this,"mouseover",
this.onMouseOver_);f.removeListener(this,"mouseout",this.onMouseOut_);f.removeListener(this,"keydown",this.onKeyDownHandler_,!1);f.removeListener(this,"focus",this.onFocus_.bind(this),!1)};window.QOWTDownloadButton=document.registerElement("qowt-downloadbutton",{prototype:a});return{}});
define("qowtRoot/customElements/ui/appIcon",["qowtRoot/models/env","qowtRoot/utils/i18n","qowtRoot/utils/domListener"],function(c,f,k){var a=Object.create(HTMLElement.prototype),e={word:"http://docs.google.com/document",sheet:"http://docs.google.com/spreadsheets",point:"http://docs.google.com/presentation"};a.createdCallback=function(){var a=document.createElement("a");a.href=e[c.app];a.target="_blank";a.classList.add("qowt-main-appIcon");a.setAttribute("tabindex",0);a.setAttribute("role","link");
var l=c.app+f.getMessage("app_icon_aria_spoken_word");a.setAttribute("aria-label",l);k.addListener(a,"focus",this.onFocus_.bind(this),!1);this.appendChild(a)};a.appendTo=function(a){a.appendChild(this)};a.onFocus_=function(a){if(a.path&&-1!==Array.prototype.slice.call(a.path).indexOf(this)){a=this.querySelector("a.qowt-main-appIcon").getAttribute("aria-label")+" "+this.querySelector("a.qowt-main-appIcon").getAttribute("role");var c=window.cvox;c&&c.Api.speak(a,0)}};window.QOWTAppIcon=document.registerElement("qowt-app-icon",
{prototype:a});return{}});
define("qowtRoot/configs/common",["qowtRoot/customElements/ui/shareButton","qowtRoot/customElements/ui/presentButton","qowtRoot/customElements/ui/downloadButton","qowtRoot/customElements/ui/appIcon"],function(){var c={SUPPORTED_IMAGE_FORMATS:{jpg:!0,jpeg:!0,gif:!0,png:!0,pic:!1,pict:!1,bmp:!0,tif:!0,tiff:!0},ZOOM:{current:void 0,next:void 0,levels:void 0},LAYOUT_DEFAULT_MAXZOOM:void 0,LAYOUT_DEFAULT_MINZOOM:void 0,LAYOUT_DEFAULT_ZOOM_LEVEL:void 0,DOC_VERIFY_DEBOUNCE:50,DEFAULT_COLORS:"#6B9CD4 #DE7872 #B7D37C #A48CC2 #6CC7E1 #F3AB63 #AEC8EE".split(" "),TEXT_STYLE:{defaultHighlightColor:"rgb(255, 255, 255)",
defaultTxtColor:"rgb(0, 0, 0)",shadowText:{setValue:"#000000 0.07em 0.07em 0.07em",getValue:"rgb(0, 0, 0) 0.07em 0.07em 0.07em"},outlineText:{webkitTextFillColor:"transparent",webkitTextStroke:".05em #000000",webkitTextStrokeWidth:"0.05em",webkitTextStrokeColor:"rgb(0, 0, 0)"},embossedText:{setColor:"#ffffff",getColor:"rgb(255, 255, 255)",setShadow:"#000000 1px 1px 2px",getShadow:"rgb(0, 0, 0) 1px 1px 2px"},engravedText:{setColor:"#999999",getColor:"rgb(153, 153, 153)",setShadow:"#000000 -1px -1px 2px",
getShadow:"rgb(0, 0, 0) -1px -1px 2px"}},DEFAULT_BLIP_FILL_PROPERTIES:{tileProps:{Sx:100,Sy:100,Tx:0,Ty:0,align:"TL"},type:"tileFill"},kMESSAGE_BUS_CONNECTION_RETRY:10,kMESSAGE_BUS_CONNECTION_TIMEOUT:3E4,kMESSAGE_BUS_CONNECTION_TIMEOUT_MSG:"MessageBus: Connection timeout",create:function(){return{SUPPORTED_IMAGE_FORMATS:c.SUPPORTED_IMAGE_FORMATS,DIALOGUE_CONFIG:c.DIALOGUE_CONFIG,DEFAULT_COLORS:c.DEFAULT_COLORS,ZOOM:c.ZOOM,LAYOUT_DEFAULT_MAXZOOM:c.LAYOUT_DEFAULT_MAXZOOM,LAYOUT_DEFAULT_MINZOOM:c.LAYOUT_DEFAULT_MINZOOM,
LAYOUT_DEFAULT_ZOOM_LEVEL:c.LAYOUT_DEFAULT_ZOOM_LEVEL}}};return c});
define("qowtRoot/messageBus/messageBusImpl",["qowtRoot/utils/typeUtils","qowtRoot/configs/common","qowtRoot/third_party/when/when"],function(c,f,k){var a=function(a){this.myWin_=a||window;this.pendingConnections_=[];this.acceptedConnections_=[];this.completedConnections_=[];this.acknowledgements_=[];this.listeners_=[];this.msgQueue_=[];this.pendingMsgs_=[];this.myWin_.addEventListener("message",this.handleIncomingMessage_.bind(this),!1)};a.prototype=Object.create(Object.prototype);a.prototype.constructor=
a;a.prototype.connect=function(a,e){if(!a||null===a||!c.isObject(a)||!a.postMessage)throw Error("MessageBus: A valid HTML window object has not been provided to connect()");if(a===this.myWin_)throw Error("MessageBus: Trying to connect to its own window");if(e&&!c.isFunction(e))throw Error("MessageBus: The provided callback function is not of the correct type");for(var g=this.pendingConnections_.length,f=0;f<g;f++)if(this.pendingConnections_[f].win===a)throw Error("MessageBus: Trying to connect to a window that we are already trying to connect to");
g=this.acceptedConnections_.length;for(f=0;f<g;f++)if(this.acceptedConnections_[f].win===a)throw Error("MessageBus: Trying to connect to a window that we are already trying to connect to");g=this.completedConnections_.length;for(f=0;f<g;f++)if(this.completedConnections_[f].win===a)throw Error("MessageBus: Trying to connect to a window that has already been connected");g={win:a,callback:e,currentWaitTime:0,deferred:k.defer()};this.pendingConnections_.push(g);this.tryToConnect_(g);return g.deferred.promise};
a.prototype.pushMessage=function(a){if(!c.isObject(a))throw Error("MessageBus: A valid message object has not been provided to pushMessage()");var g=this.completedConnections_.length;if(0===g)this.pendingMsgs_.push(a);else{if(!c.isObject(a))throw Error("Cannot mark non-object value as quickoffice message");a.qoMessageBus=!0;this.msgQueue_.length>=e&&this.msgQueue_.shift();this.msgQueue_.push(a);for(var f=0;f<g;f++)this.completedConnections_[f].win.postMessage(a,"*")}};a.prototype.listen=function(a,
e){if(!c.isFunction(a))throw Error("MessageBus: A valid listener function has not been provided to listen()");if(e&&!c.isFunction(e))throw Error("MessageBus: The provided filter function is not of the correct type");this.listeners_.push({listener:a,filter:e})};a.prototype.stopListening=function(a){if(!c.isFunction(a))throw Error("MessageBus: A valid listener function has not been provided to stopListening()");for(var e=this.listeners_.length,g=0;g<e;g++)if(this.listeners_[g].listener===a){this.listeners_.splice(g,
1);break}};a.prototype.isConnectedTo=function(a){for(var c=!1,e=this.completedConnections_.length,g=0;g<e;g++)if(a===this.completedConnections_[g].win){c=!0;break}return c};a.prototype.tryToConnect_=function(a){a.currentWaitTime>f.kMESSAGE_BUS_CONNECTION_TIMEOUT?this.handleTimeOut_(a):(a.currentWaitTime+=f.kMESSAGE_BUS_CONNECTION_RETRY,-1!==this.pendingConnections_.indexOf(a)&&a.win.postMessage(g,"*"),a.timeoutId=setTimeout(this.tryToConnect_.bind(this,a),f.kMESSAGE_BUS_CONNECTION_RETRY))};a.prototype.handleTimeOut_=
function(a){var c=f.kMESSAGE_BUS_CONNECTION_TIMEOUT_MSG;window.connectFromAppToQowt&&(c=window.connectFromQowtToApp?Math.abs(Math.round(window.connectFromQowtToApp-window.connectFromAppToQowt)/1E3)>Math.round(f.kMESSAGE_BUS_CONNECTION_TIMEOUT/1E3*.8)?c+":qowt too late to connect":c+":qowt and app connected:handshake failed?":c+":qowt failed to connect");a.deferred.reject(Error(c))};a.prototype.handleIncomingMessage_=function(a){if(a){if(-1!==this.msgQueue_.indexOf(a.data))throw Error("MessageBus: A message that was pushed onto thisbus has arrived back on it - we have a circular dependancy!");
a.data===g?this.handleConnectionRequestMsg_(a):a.data===l?this.handleConnectionAcceptedMsg_(a):a.data===t?this.handleConnectionAckMsg_(a):a&&a.data&&!0===a.data.qoMessageBus&&this.handleClientMsg_(a)}};a.prototype.handleConnectionRequestMsg_=function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionRequest message");a.source.postMessage(l,"*")};a.prototype.handleConnectionAcceptedMsg_=function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionAccepted message");
for(var c=this.pendingConnections_.length,e=0;e<c;e++)if(this.pendingConnections_[e].win===a.source){c=this.pendingConnections_.splice(e,1)[0];a=this.acknowledgements_.indexOf(a.source);-1===a?this.acceptedConnections_.push(c):(this.acknowledgements_.splice(a,1),this.connectionCompleted_(c));c.win.postMessage(t,"*");break}};a.prototype.handleConnectionAckMsg_=function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionAck message");for(var c=this.acceptedConnections_.length,e=
0;e<c;e++)if(this.acceptedConnections_[e].win===a.source){a=this.acceptedConnections_.splice(e,1)[0];this.connectionCompleted_(a);return}this.acknowledgements_.push(a.source)};a.prototype.handleClientMsg_=function(a){if(a.source){for(var c=this.listeners_.slice(),e=c.length,g=0;g<e;g++){var f=c[g];!f||f.filter&&!f.filter.call(this,a)||f.listener.call(this,a)}e=this.completedConnections_.length;for(g=0;g<e;g++)this.completedConnections_[g].win!==a.source&&this.completedConnections_[g].win.postMessage(a.data,
"*")}};a.prototype.connectionCompleted_=function(a){this.completedConnections_.push(a);clearTimeout(a.timeoutId);for(a.callback&&a.callback.call(this);0<this.pendingMsgs_.length;)this.pushMessage(this.pendingMsgs_.shift());a.deferred.resolve()};var e=10,g="qoConnectionRequest",l="qoConnectionAccepted",t="qoConnectionAck";return a});define("qowtRoot/messageBus/messageBus",["qowtRoot/messageBus/messageBusImpl"],function(c){return new c});
define("qowtRoot/errors/localisedError",["qowtRoot/utils/typeUtils","qowtRoot/utils/i18n","third_party/lo-dash/lo-dash.min"],function(c,f){var k=function(a){a=a||"";this.name="LocalisedError";c.isObject(a)&&_.extend(this,a);this.message=(this.code?this.code+": ":"")+(this.message||JSON.stringify(a)||this.title||this.details||this.additionalInfo);this.title=f.getMessage(this.title);this.details=a.fileName?f.getMessage(this.details,a.fileName):f.getMessage(this.details);this.linkData&&this.linkData.msg&&
(this.linkData.msg=f.getMessage(this.linkData.msg)||this.linkData.msg);Error.captureStackTrace(this,k)};k.prototype=Object.create(Error.prototype);return k.prototype.constructor=k});define("qowtRoot/errors/qowtError",["qowtRoot/errors/localisedError"],function(c){var f=function(){c.apply(this,arguments);this.name="QOWTError";Error.captureStackTrace(this,f);this.fatal=!1};f.prototype=Object.create(c.prototype);f.prototype.constructor=f;return window.QOWTError=f});
define("qowtRoot/errors/qowtSilentError",["qowtRoot/errors/localisedError"],function(c){var f=function(){c.apply(this,arguments);this.name="QOWTSilentError";Error.captureStackTrace(this,f);this.fatal=!1;this.silent=!0};f.prototype=Object.create(c.prototype);f.prototype.constructor=f;return window.QOWTSilentError=f});
define("qowtRoot/errors/qowtException",["qowtRoot/errors/localisedError"],function(c){var f=function(){c.apply(this,arguments);this.name="QOWTException";Error.captureStackTrace(this,f);this.fatal=!0};f.prototype=Object.create(c.prototype);f.prototype.constructor=f;return window.QOWTException=f});
define("qowtRoot/errors/errorCatcher","qowtRoot/utils/typeUtils qowtRoot/messageBus/messageBus qowtRoot/pubsub/pubsub qowtRoot/errors/qowtError qowtRoot/errors/qowtSilentError qowtRoot/errors/qowtException".split(" "),function(c,f,k,a,e,g){function l(a){a.error?(console.error("%s caught js exception: %s",x,a.error.name||a.error.message?a.error.name+": "+a.error.message:a.error),console.error(a.error.stack),void 0===a.error.fatal&&(a.error.fatal=!0),n(a.error)):console.error(a)}function t(a,c){console.log("%s caught deprecated error",
x);console.log(c);c.isDeprecatedError=!0;n(c)}function n(k){if(k instanceof Error)void 0===k.fatal&&(k.fatal=!0);else{console.log("%s converting deprecated/bad error",x);switch(!0){case c.isObject(k)&&k.isDeprecatedError:var n={title:k.errorId?k.errorId+"_short_msg":void 0,details:k.errorId?k.errorId+"_msg":void 0,linkData:k.linkData,message:k.additionalInfo};k=k.fatal?new g(n):k.silent?new e(n):new a(n);break;case c.isNumber(k):k=new g({code:k});break;case c.isString(k):k=new g(k);break;default:k=
new g(k.toString())}k.stack=void 0}D.push(k);p(k);if(!k.isSynced){console.log("%s pushing error to msg bus",x);n=_.extend({},k);n.name=k.name;n.message=k.message;n.stack=k.stack;try{f.pushMessage({id:N,error:JSON.stringify(n)})}catch(l){}}}function p(a){console.log("%s dispatching error to observers",x);F.forEach(function(c){try{c.call(c,a)}catch(e){console.warn("Error observer %s threw an exception; ignored",c.name||""),console.warn(e.stack)}})}function w(a){if(a&&a.data&&a.data.error){console.log("%s receiving error from msg bus",
x);a=JSON.parse(a.data.error);var c={};-1!=="Error EvalError RangeError ReferenceError SyntaxError TypeError URIError QOWTError QOWTSilentError QOWTException".split(" ").indexOf(a.name)?(console.log("cast to %s",a.name),c=new window[a.name]):(console.log("cast fallback to Error"),c=Error());_.extend(c,a);void 0===a.stack&&(c.stack=void 0);a=c;a.isSynced=!0;n(a)}}function u(a){return a&&a.data&&a.data.id===N}var N="errorSync",F=[],x="sandbox"===window.name?"QOWT":"App",z,D=[];return{init:function(){z=
k.subscribe("qowt:error",t);window.addEventListener("error",l);f.listen(w,u);Error.stackTraceLimit=Infinity},reset:function(){k.unsubscribe(z);window.removeEventListener("error",l);f.stopListening(w);F=[]},handleError:function(a){n(a)},addObserver:function(a){c.isFunction(a)?F.push(a):console.warn("Error observer must be a function")},observers:function(){return F},lastError:function(){return D[D.length-1]}}});
define("qowtRoot/errors/unique/fileDoesNotExistError",["qowtRoot/errors/qowtException"],function(c){var f=function(){this.title="file_does_not_exist_error_title";this.details="file_does_not_exist_error_details";this.gaState="FileDoesNotExistError";c.apply(this,arguments);this.name="FileDoesNotExistError";Error.captureStackTrace(this,f)};f.prototype=Object.create(c.prototype);return f.prototype.constructor=f});
define("qowtRoot/utils/tryUtils",["qowtRoot/utils/typeUtils"],function(c){var f=function(c){this.rethrowOnException=!1;this.optMsg=c};f.prototype={__proto__:Object.prototype,ignore:function(){return this.run.apply(this,arguments)},rethrow:function(){this.rethrowOnException=!0;return this.run.apply(this,arguments)},run:function(){var f=arguments[0],a=[].splice.call(arguments,1);try{return f.apply(null,a)}catch(e){this.optMsg&&(c.isString(this.optMsg)?console.warn(this.optMsg):console.dir(this.optMsg));
if(this.rethrowOnException){if(e instanceof Error)throw e;throw Error(e);}console.warn("Ignoring exception: ",e)}}};return{withWarning:function(c){return new f(c)},ignore:function(){if(!c.isFunction(arguments[0]))throw Error("ignore must be passed a function as first argument");var k=new f;return k.ignore.apply(k,arguments)},rethrow:function(){var c=new f;return c.rethrow.apply(c,arguments)}}});
define("controllers/appState",["qowtRoot/errors/errorCatcher","utils/analytics/googleAnalytics"],function(c,f){function k(c){a.updateState(c.gaState?c.gaState:c.fatal?"FatalCrash":"NonFatalError",{data_reason:c.message,data_fatal:c.fatal})}var a={init:function(){c.addObserver(k);a.updateState("Init")},setApp:function(a){f.setTracker(a)},updateState:function(a,c){e!==a&&(e=a,window.qowtState={state:e,context:c},f.sendState(e))}},e;return a});
define("utils/converter",[],function(){var c={app2Icon:function(c){return{word:"../img/doc.ico",sheet:"../img/xls.ico",point:"../img/ppt.ico"}[(c||"").toLowerCase()]},extension2Format:function(c){return{doc:"CBF",docx:"OOXML",docm:"OOXML",dot:"CBF",dotx:"OOXML",xls:"CBF",xlsx:"OOXML",xlsm:"OOXML",xlt:"CBF",xltx:"OOXML",csv:"CSV",ppt:"CBF",pptx:"OOXML",pptm:"OOXML",pot:"CBF",potx:"OOXML"}[(c||"").toLowerCase()]},extension2App:function(c){return{doc:"word",docx:"word",docm:"word",dot:"word",dotx:"word",
xls:"sheet",xlsx:"sheet",xlsm:"sheet",xlt:"sheet",xltx:"sheet",csv:"sheet",ppt:"point",pptx:"point",pptm:"point",pot:"point",potx:"point"}[(c||"").toLowerCase()]},extension2Mime:function(c){return{doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",docm:"application/vnd.ms-word.document.macroenabled.12",dot:"application/msword-template",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xls:"application/vnd.ms-excel",
xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlt:"application/vnd.ms-excel",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",csv:"text/csv",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",pptm:"application/vnd.ms-powerpoint.presentation.macroenabled.12",pot:"application/vnd.ms-powerpoint",potx:"application/vnd.openxmlformats-officedocument.presentationml.template"}[(c||
"").toLowerCase()]},app2FileName:function(c){return{word:"Document",point:"Presentation",sheet:"Spreadsheet"}[(c||"").toLowerCase()]},url2App:function(c){var a,e="";(c=(c||"").match(/.*\/([^\/?]*)/))&&(c=c[1].match(/.*\.([^\.]*)$/))&&(e=c[1]);switch(e.toLowerCase()){case "doc":case "docx":case "docm":a="word";break;case "xls":case "xlsx":case "xlsm":case "csv":a="sheet";break;case "ppt":case "pptx":case "pptm":a="point"}return a},mime2Extension:function(c){return f[(c||"").toLowerCase()]},mime2App:function(f){return c.extension2App(c.mime2Extension(f))},
mime2Icon:function(f){return c.app2Icon(c.mime2App(f))},mime2Format:function(f){return c.extension2Format(c.mime2Extension(f))}},f={"application/msword":"doc","application/vnd.ms-word":"doc","application/vnd.msword":"doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","application/vnd.wordprocessing-openxml":"docx","application/vnd.ms-word.document.macroenabled.12":"docm","application/vnd.ms-word.document.12":"docm","application/vnd.openxmlformats":"docx","application/msword-template":"dot",
"application/vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","application/mspowerpoint":"ppt","application/vnd.ms-powerpoint":"ppt","application/vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","application/vnd.presentation-openxml":"pptx","application/vnd.presentation-openxmlm":"pptx","application/vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","application/vnd.openxmlformats-officedocument.presentationml.template":"potx","application/msexcel":"xls",
"application/vnd.ms-excel":"xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","application/vnd.spreadsheet-openxml":"xlsx","application/vnd.ms-excel.sheet.macroenabled.12":"xlsm","application/vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","text/csv":"csv"};return c});
define("qowtRoot/errors/unique/httpErrorFileNotFound",["qowtRoot/errors/qowtException"],function(c){var f=function(){this.title="temporary_unable_to_open_error_short_msg";this.details="temporary_unable_to_open_error_msg";this.gaState="HTTPErrorFileNotFound";c.apply(this,arguments);this.name="HTTPErrorFileNotFound";this.message="HTTP ERROR: 404";Error.captureStackTrace(this,f)};f.prototype=Object.create(c.prototype);return f.prototype.constructor=f});
define("qowtRoot/errors/unique/httpErrorZero",["qowtRoot/errors/qowtException"],function(c){var f=function(){this.title="http_error_zero_short_msg";this.details="http_error_zero_msg";this.gaState="HTTPErrorZero";c.apply(this,arguments);this.name="HTTPErrorZero";this.message="HTTP ERROR: 0";Error.captureStackTrace(this,f)};f.prototype=Object.create(c.prototype);return f.prototype.constructor=f});
define("qowtRoot/errors/unique/timeoutError",["qowtRoot/errors/qowtException"],function(c){var f=function(){this.gaState="TimeoutError";c.apply(this,arguments);this.name="TimeoutError";Error.captureStackTrace(this,f)};f.prototype=Object.create(c.prototype);return f.prototype.constructor=f});
define("utils/retryHandler",[],function(){var c=function(){this.interval=1E3;this.maxInterval=6E4};c.prototype={__proto__:Object.prototype,maxedOut:function(){return this.interval>this.maxInterval},retry:function(c){setTimeout(c,this.interval);this.interval=this.nextInterval_()},reset:function(){this.interval=1E3},nextInterval_:function(){var c=2*this.interval+this.getRandomInt_(0,1E3);return Math.min(c,this.maxInterval)},getRandomInt_:function(c,k){return Math.floor(Math.random()*(k-c+1)+c)}};return c});
define("utils/xhr","qowtRoot/errors/qowtException qowtRoot/errors/unique/httpErrorFileNotFound qowtRoot/errors/unique/httpErrorZero qowtRoot/errors/unique/timeoutError qowtRoot/utils/typeUtils qowtRoot/third_party/when/when utils/retryHandler".split(" "),function(c,f,k,a,e,g,l){var t=function(a){this.method_=a.method||"GET";this.responseType_=a.responseType||"blob";this.url_=this.buildUrl_(a.baseUrl,a.params);this.authToken_=a.authToken;this.contentType_=a.contentType;this.deferred_=g.defer();this.kEstimatedDownloadChunks_=
20;this.timeoutLength_=6E5;this.remainingChunks_=this.kEstimatedDownloadChunks_;this.progress_=0;this.retryHandler_=new l;a.abortPromise&&(a.abortPromise=a.abortPromise.catch(function(){this.xhr_&&this.xhr_.abort&&this.xhr_.abort();this.deferred_.reject(Error("XHR canceled"))}))};t.prototype={__proto__:Object.prototype,send:function(a){this.xhr_=this.createXMLHttpRequest_();this.xhr_.send(a);this.startConnectionTimeout_();return this.deferred_.promise},createXMLHttpRequest_:function(){var a=new XMLHttpRequest;
"GET"===this.method_?a.onprogress=this.onProgress_.bind(this):a.upload.onprogress=this.onProgress_.bind(this);a.onload=this.onSuccess_.bind(this);a.onerror=this.onError_.bind(this);a.open(this.method_,this.url_,!0);a.responseType=this.responseType_;this.authToken_&&a.setRequestHeader("Authorization","Bearer "+this.authToken_);this.contentType_&&a.setRequestHeader("Content-Type",this.contentType_);return a},onSuccess_:function(a){this.clearConnectionTimeout_();if(4===a.target.readyState){var c=a.target.response||
a.target.responseText;if(200===a.target.status&&c){if("json"===a.target.responseType&&"string"===typeof c)try{c=JSON.parse(c)}catch(e){return this.deferred_.reject(Error("XHR response not valid JSON"))}this.deferred_.notify(1);this.deferred_.resolve(c)}else if(0===a.target.status||200===a.target.status&&!c)this.deferred_.reject("HTTP ERROR: ABORTED");else this.onError_(a)}},onProgress_:function(a){this.resetConnectionTimeout_();a&&a.lengthComputable?this.progress_=(a.position||a.loaded)/(a.totalSize||
a.total):(a=this.remainingChunks_/this.kEstimatedDownloadChunks_,this.remainingChunks_-=a,this.progress_+=a/this.kEstimatedDownloadChunks_);this.deferred_.notify(this.progress_)},onError_:function(a){a.target.status&&(500<=a.target.status||429===a.target.status)?this.retry_(a):this.deferred_.reject(this.getErrorFromXhrStatus_(a.target.status))},retry_:function(a){this.retryHandler_.maxedOut()?this.deferred_.reject(this.getErrorFromXhrStatus_(a.target.status)):this.retryHandler_.retry(this.send.bind(this))},
getErrorFromXhrStatus_:function(a){return 0===a?new k:404===a?new f:new c("HTTP ERROR: "+a)},buildUrl_:function(a,c){var e=this.parseUrl_(a),g=this.buildQuery_(c);g&&(e+="?"+g);return e},buildQuery_:function(a){a=a||{};return Object.keys(a).map(function(c){return encodeURIComponent(c)+"="+encodeURIComponent(a[c])}).join("&")},parseUrl_:function(a){if(e.isString(a)){var c=a;c.match(/^http[s]?:\/\//)||c.match(/^blob:/)||(a="http://"+a)}else throw Error("URL for XHR should be a string");return a},startConnectionTimeout_:function(){this.timeout_=
window.setTimeout(function(){var c=new a("XHR timed out");this.deferred_.reject(c)}.bind(this),this.timeoutLength_)},clearConnectionTimeout_:function(){window.clearTimeout(this.timeout_);delete this.timeout_},resetConnectionTimeout_:function(){this.clearConnectionTimeout_();this.startConnectionTimeout_()}};return t});
define("qowtRoot/utils/localStorageManager",["qowtRoot/errors/qowtException"],function(c){return{setItem:function(f,k){try{window.localStorage.setItem(f,k)}catch(a){throw new c({title:"storage_quota_exceed_error_short_msg",details:"storage_quota_exceed_error_msg",message:a.message});}},getItem:function(c){return window.localStorage.getItem(c)}}});
define("ui/progressSpinner",["qowtRoot/features/utils"],function(c){function f(){p&&(p=!1,l.style.opacity="0")}function k(c,e){u[c].progress=1<e?1:0>e||void 0===e?0:e;var g=0,f=0,k=0,l;for(l in u)if(u.hasOwnProperty(l)&&void 0!==u[l].weight&&void 0!==u[l].progress){var n=u[l];"*"===n.weight?k=n.progress:(f+=n.weight,g+=n.progress*n.weight)}0<k&&(g+=k*(1-f));a(g)}function a(a){a=1<a?1:0>a||void 0===a?0:a;var c=parseInt(8*a,10);n&&n.getElementById("circular-progress").setAttribute("class",("editor"===
t?"dark":"light")+" p"+c);1===a&&setTimeout(f,100)}function e(){t=c.isEnabled("edit")?"editor":"viewer";l=document.createElement("div");l.style.display="none";l.classList.add(t);l.classList.add("progress-spinner-container");l.classList.add("fader");l.addEventListener("webkitTransitionEnd",function(){p||(a(0),l.style.display="none")},!1);g=document.createElement("embed");g.classList.add(t);g.classList.add("progress-spinner");g.src="../img/progressSpinner.svg";g.onload=function(){n=g.getSVGDocument()};
l.appendChild(g);var e=document.createElement("div");e.classList.add(t);e.classList.add("progress-spinner-label");e.textContent=chrome.i18n.getMessage("file_loading_spinner_label");l.appendChild(e);document.body.appendChild(l);N=!0}var g,l,t,n,p=!1,w=0,u={},N=!1;return{show:function(c){N||e();p||(p=!0,l.style.display="block",l.style.opacity="1");c&&a(c)},hide:function(){f()},setProgress:function(c){a(c)},addContributor:function(a){w++;var c="contrib"+w;u[c]={weight:a,progress:0};return k.bind(this,
c)},resetContributors:function(){u={};w=0}}});define("utils/htmlConstructor",[],function(){var c={constructHTML:function(f,k){for(var a=document.createDocumentFragment(),e=0;e<f.length;e++){var g=f[e];g.elType=g.elType||"div";var l=document.createElement(g.elType),t;for(t in g)g.hasOwnProperty(t)&&"function"!==typeof g[t]&&"children"!==t&&(l[t]=g[t]);g.children&&c.constructHTML(g.children,l);a.appendChild(l)}k&&k.appendChild(a);return a}};return c});
define("utils/pluginLoader","qowtRoot/errors/errorCatcher qowtRoot/errors/qowtException qowtRoot/errors/qowtSilentError qowtRoot/pubsub/pubsub qowtRoot/third_party/when/when qowtRoot/utils/localStorageManager qowtRoot/utils/typeUtils ui/progressSpinner utils/htmlConstructor".split(" "),function(c,f,k,a,e,g,l,t,n){var p=function(a){this.status="idle";this.myWin_=a||window;this.kHistoricId_="pluginLoadTimes";this.kHistoricCount_=10;this.relatedApp_=null;this.kPluginLoadRetryMax_=3;this.timeouts_=this.pluginLoadAttempt_=
0;this.timeout_=this.expectedLoadTime_=this.averageLoadTime_=this.historicLoadTimes_=this.startTime_=this.progressIntervalId_=this.spinnerUpdateFunc_=this.deferred_=null;this.pluginTimeoutLength_=3E4};p.prototype=Object.create(Object.prototype);p.prototype.constructor=p;p.prototype.loadPlugin=function(a){if("word"!==a&&"sheet"!==a&&"point"!==a)throw Error("Error: unknown app: "+a);this.deferred_=e.defer();this.status="loading";this.relatedApp_=a;this.constructPluginHTML_();return this.deferred_.promise};
p.prototype.constructPluginHTML_=function(){this.pluginLoadAttempt_++;var a=n.constructHTML([{id:"pluginContainer",children:[{elType:"embed",name:"nacl_module",id:"qonacl",width:0,height:0,src:"../plugin/"+this.relatedApp_+".nmf",type:"application/x-nacl"}]}]);this.setupLoadListeners_(a);this.startLoadTimeout_();this.beginLoading_(a)};p.prototype.setupLoadListeners_=function(c){c=c.getElementById("pluginContainer");c.addEventListener("load",this.pluginLoaded_.bind(this),!0);c.addEventListener("error",
this.handleNaclError_.bind(this),!0);c.addEventListener("crash",this.handleNaClCrash_.bind(this),!0);c.addEventListener("abort",this.handleNaClAbort_.bind(this),!0);c.addEventListener("loadstart",this.initProgressUpdate_.bind(this),!0);a.subscribe("app:naclCrash",this.handleNaClCrash_.bind(this))};p.prototype.beginLoading_=function(a){document.body.appendChild(a)};p.prototype.handleNaclTimeout_=function(){this.timeouts_++;this.logMessage_("Nacl loading timeout #"+this.timeouts_);this.startLoadTimeout_()};
p.prototype.handleNaClAbort_=function(){this.clearLoadTimeout_();this.deferred_.reject(Error("Nacl Loading Aborted"))};p.prototype.handleNaclError_=function(){this.logMessage_("NaCl-FAIL#"+this.pluginLoadAttempt_+":"+this.getLastError_());this.clearLoadTimeout_();if(this.pluginLoadAttempt_<this.kPluginLoadRetryMax_){var a=document.getElementById("pluginContainer");if(a&&a.parentNode)a.parentNode.removeChild(a);else throw Error("Cannot retry NaCl load. Unexpected state.");this.constructPluginHTML_()}else{var a=
this.getLastError_(),c;c=!(-1===a.indexOf("Data Execution Prevention is required")&&-1===a.indexOf("CPU model is not supported"));throw new f({title:"app_nacl_error_title",details:c?"app_nacl_error_unsupported_device":"app_nacl_error_load_failed",message:a});}};p.prototype.handleNaClCrash_=function(){this.clearLoadTimeout_();throw new f({title:"app_nacl_crash_title",details:"app_nacl_crash_msg",message:this.getLastError_()});};p.prototype.getLastError_=function(){var a=document.getElementById("qonacl");
return a?a.lastError:"NaCl error or crash: No lastError logged."};p.prototype.logMessage_=function(a){var e=new k(a);c.handleError(e);console.error(a)};p.prototype.updateProgress_=function(){this.spinnerUpdateFunc_(this.progressAlgo_((new Date-this.startTime_)/this.expectedLoadTime_))};p.prototype.initProgressUpdate_=function(){t.show();this.spinnerUpdateFunc_=t.addContributor("*");this.calcExpectedLoadTime_();this.progressIntervalId_=this.myWin_.setInterval(this.updateProgress_.bind(this),10)};p.prototype.calcExpectedLoadTime_=
function(){this.startTime_=new Date;this.historicLoadTimes_=JSON.parse(g.getItem(this.kHistoricId_));this.historicLoadTimes_ instanceof Array||(this.historicLoadTimes_=[]);if(0===this.historicLoadTimes_.length)this.averageLoadTime_=100;else{var a=0;this.historicLoadTimes_.forEach(function(c){a+=c});this.averageLoadTime_=a/this.historicLoadTimes_.length}this.expectedLoadTime_=1.1*this.averageLoadTime_};p.prototype.progressAlgo_=function(a){return Math.pow(a+(1-a)/2,16)};p.prototype.pluginLoaded_=function(){this.clearLoadTimeout_();
this.myWin_.clearInterval(this.progressIntervalId_);l.isFunction(this.spinnerUpdateFunc_)&&this.spinnerUpdateFunc_(1);this.recordLoadTime_();1<this.pluginLoadAttempt_&&this.logMessage_("NaCl Loaded OK: try#"+this.pluginLoadAttempt_);this.status="loaded";this.deferred_.resolve()};p.prototype.recordLoadTime_=function(){for(this.historicLoadTimes_.push(new Date-this.startTime_);this.historicLoadTimes_.length>this.kHistoricCount_;)this.historicLoadTimes_.shift();g.setItem(this.kHistoricId_,JSON.stringify(this.historicLoadTimes_))};
p.prototype.startLoadTimeout_=function(){this.timeout_=this.myWin_.setTimeout(this.handleNaclTimeout_.bind(this),this.pluginTimeoutLength_)};p.prototype.clearLoadTimeout_=function(){this.myWin_.clearTimeout(this.timeout_)};return p});
define("utils/fileWriter",["qowtRoot/third_party/when/when","utils/analytics/googleAnalytics"],function(c,f){var k=function(a){this.entry=a;this.state=0};k.prototype={__proto__:Object.prototype,writeData:function(a){return this.createWriter_().then(this.truncateAndWrite_.bind(this,a)).then(function(){return this.entry}.bind(this))},createWriter_:function(){var a=c.defer();c(0===this.state).then(function(){this.entry.createWriter(a.resolve,a.reject)}.bind(this));return a.promise},writeOrResolve_:function(a,
c,g){if(2===c.readyState)switch(this.state){case 3:try{this.state=1,c.write(a)}catch(k){g.reject(Error(k))}break;case 1:this.state=0,g.resolve()}else f.sendException({msg:"Callback for write/ writeend called when FileWriter.readyState !== DONE",fatal:!1})},truncateAndWrite_:function(a,e){return c.promise(function(c,f){1===e.readyState&&f(Error("INVALID_STATE_ERR : Cannot write when the previous write is still in progress"));e.onwrite=this.writeOrResolve_.bind(this,a,e,{reject:f,resolve:c});e.onerror=
function(a){f(Error(a.currentTarget.error.message))};try{this.state=3,e.truncate(0)}catch(k){throw Error(k);}}.bind(this))}};return k});
define("utils/metrics",["qowtRoot/features/utils","qowtRoot/utils/typeUtils"],function(c,f){var k,a="doc docx docm xls xlsx xlsm ppt pptx pptm pps ppsx ppsm csv".split(" "),e="csvNonEmptyCellCount csvSheetCount csvFormattedCellCount docPageCount docSectionCount docParagraphCount docxPageCount docxSectionCount docxParagraphCount pptSlideCount pptMasterCount pptxSlideCount pptxMasterCount xlsNonEmptyCellCount xlsSheetCount xlsFormattedCellCount xlsxNonEmptyCellCount xlsxSheetCount xlsxFormattedCellCount".split(" ");return{recordFileType:function(e){if(e){var f=
k=e.toLowerCase();if(chrome&&chrome.metricsPrivate&&chrome.metricsPrivate.recordValue){var t;"Array"===a.constructor.name?(e=a.indexOf(f),t=a.length):(e=f,t=a);0>e||e>t?console.warn("Ignoring metrics record for unknown value: "+f):(f={metricName:"Quickoffice.FileFormat",type:"histogram-linear",min:1,max:t,buckets:t+1},c.isDebug()&&void 0===window.__umaMock?console.log("UMA not supported in debug mode"):chrome.metricsPrivate.recordValue(f,e))}}},recordCount:function(a){a=a||{};var l=k+(a.dataPoint||
"");a=a.value||0;if(f.isString(name)&&f.isNumber(a)&&f.isList(e)){var t,n;f.isList(e)?(n=e.indexOf(l),t=e.length):(n=l,t=e);if(!(0<=n&&n<=t))console.warn("Ignoring unknown metrics record "+l+" with value: "+a);else if(!c.isDebug()&&chrome&&chrome.metricsPrivate&&chrome.metricsPrivate)switch(t="Quickoffice."+l,l){case "docPageCount":case "docxPageCount":chrome.metricsPrivate.recordValue&&chrome.metricsPrivate.recordValue({metricName:t,type:"histogram-log",min:1,max:1E3,buckets:50},a);break;case "docParagraphCount":case "docxParagraphCount":chrome.metricsPrivate.recordMediumCount&&
chrome.metricsPrivate.recordMediumCount(t,a);break;case "csvSheetCount":case "docSectionCount":case "docxSectionCount":case "xlsSheetCount":case "xlsxSheetCount":case "pptSlideCount":case "pptxSlideCount":case "pptMasterCount":case "pptxMasterCount":chrome.metricsPrivate.recordSmallCount&&chrome.metricsPrivate.recordSmallCount(t,a);break;case "csvNonEmptyCellCount":case "xlsNonEmptyCellCount":case "xlsxNonEmptyCellCount":case "csvFormattedCellCount":case "xlsFormattedCellCount":case "xlsxFormattedCellCount":chrome.metricsPrivate.recordCount&&
chrome.metricsPrivate.recordCount(t,a);break;default:console.warn("Record count ignored unknown metric "+t)}}else console.warn("Metrics cannot record count - invalid parameters")}}});define("qowtRoot/utils/driveErrors",[],function(){return{OFFLINE:-1,INVALID_CREDENTIALS:401,FORBIDDEN:403,FILE_NOT_FOUND:404,INTERNAL_SERVER_ERROR:500,TIMEOUT:503}});
define("utils/gdrive/firstPartyAuth",["qowtRoot/third_party/when/when","qowtRoot/utils/driveErrors"],function(c,f){function k(a,e,g,k){return c.promise(function(c,n){chrome.cookies.get({url:a,name:e},function(a){a&&void 0!==a.value?(window[g]=k?a.value:!!a.value,c()):n({status:f.INVALID_CREDENTIALS})})})}return{setCookies:function(){return c.all([k("http://*.google.com/","SID","__OVERRIDE_SID"),k("https://*.google.com/","SAPISID","__SAPISID",!0)])}}});
define("qowtRoot/utils/deprecatedUtils",["qowtRoot/models/env","qowtRoot/utils/typeUtils","qowtRoot/errors/qowtSilentError","qowtRoot/errors/errorCatcher"],function(c,f,k,a){var e={NodeType:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,1:"ELEMENT_NODE",2:"ATTRIBUTE_NODE",3:"TEXT_NODE",4:"CDATA_SECTION_NODE",5:"ENTITY_REFERENCE_NODE",
6:"ENTITY_NODE",7:"PROCESSING_INSTRUCTION_NODE",8:"COMMENT_NODE",9:"DOCUMENT_NODE",10:"DOCUMENT_TYPE_NODE",11:"DOCUMENT_FRAGMENT_NODE",12:"NOTATION_NODE"},RegExp:{HEX:/^#?([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/gi,HEX3:/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/gi},regExpExec:function(a,c){var e;if(f.isRegex(a)&&f.isString(c)){var k=a.exec(c);k&&k.length&&(e=k);a.lastIndex=0}return e},parseBoolean:function(a){return"false"===a||"False"===a||!1===a||0===a?!1:!0},computePercentValueOf:function(a,c){return a*
c/100},stripNode:function(a){for(var c=e.cpArray(a.childNodes),f=a.parentNode,k=0;k<c.length;k++)f.insertBefore(c[k],a);f.removeChild(a)},cpArray:function(a){for(var c=[],e=0;e<a.length;e++)c[c.length]=a[e];return c},cloneAndAttach:function(a,c,f){f=e.cloneDiv(a,f);e.copyAllContainedCanvases(a,f);c.appendChild(f);return f},cloneDiv:function(a,c){var f=a.cloneMe?a.cloneMe():a.cloneNode(!1);f.setEid&&f.setEid(a.getEid());for(var k=0;k<a.childNodes.length;k++){var p=a.childNodes[k];p.getAttribute&&"handlers"===
p.getAttribute("qowt-divtype")||(p=e.cloneDiv(p),f.appendChild(p))}c&&(f.id=c);return f},copyAllContainedCanvases:function(a,c){for(var f=a.querySelectorAll("canvas"),k=c.querySelectorAll("canvas"),p=0;p<f.length;p++)if(void 0!==f[p]&&void 0!==k[p]){var w=f[p].getContext("2d"),u=k[p].getContext("2d");e.cloneCanvasImage(w,u)}},cloneCanvasImage:function(c,e){if(0<c.canvas.width&&0<c.canvas.height){var f=c.getImageData(0,0,c.canvas.width,c.canvas.height);f?e.putImageData(f,0,0):(f=new k("Failed to execute putImageData on CanvasRenderingContext2D."),
a.handleError(f))}},getElementStyleString:function(a){var c="",e;for(e in a)c+=e+":"+a[e]+";";return c},appendJSONAttributes:function(a,c){for(var e in c)a[e]=c[e]},bulletTextMeasureElement:void 0,setBulletTextMeasureElement:function(){e.bulletTextMeasureElement={};e.bulletTextMeasureElement._bulletTextMeasureElement=document.createElement("P");e.bulletTextMeasureElement._bulletTextMeasureElement.className="bulletTextMeasureCss";e.bulletTextMeasureElement._bulletTextMeasureElement.style.position=
"absolute";e.bulletTextMeasureElement._bulletTextMeasureElement.style.visibility="hidden";e.bulletTextMeasureElement._bulletTextMeasureElement.height="auto";e.bulletTextMeasureElement._bulletTextMeasureElement.width="auto";e.bulletTextMeasureElement._bulletTextMeasureElement_Style=document.createElement("style");e.bulletTextMeasureElement._bulletTextMeasureElement_Style.type="text/css";document.getElementsByTagName("head")[0].appendChild(e.bulletTextMeasureElement._bulletTextMeasureElement_Style);
c.rootNode.appendChild(e.bulletTextMeasureElement._bulletTextMeasureElement)},setNumberTextMeasureElement:function(){e.numberTextMeasureElement={};e.numberTextMeasureElement._numberTextMeasureElement=document.createElement("P");e.numberTextMeasureElement._numberTextMeasureElement.className="numberTextMeasureCss";e.numberTextMeasureElement._numberTextMeasureElement.style.position="absolute";e.numberTextMeasureElement._numberTextMeasureElement.style.visibility="hidden";e.numberTextMeasureElement._numberTextMeasureElement.height=
"auto";e.numberTextMeasureElement._numberTextMeasureElement.width="auto";e.numberTextMeasureElement._numberTextMeasureElement_Style=document.createElement("style");e.numberTextMeasureElement._numberTextMeasureElement_Style.type="text/css";document.getElementsByTagName("head")[0].appendChild(e.numberTextMeasureElement._numberTextMeasureElement_Style);if(void 0===c.rootNodeContainer||null===c.rootNodeContainer)c.rootNodeContainer=document.getElementById("qowt-doc-root");c.rootNodeContainer.appendChild(e.numberTextMeasureElement._numberTextMeasureElement)},
returnUndefinedIfEmptyJson:function(a){return _.isEmpty(a)?void 0:a}};return e});
define("qowtRoot/utils/domUtils",["qowtRoot/utils/deprecatedUtils","qowtRoot/utils/typeUtils"],function(c,f){var k={totalHeight:function(a){return a.getBoundingClientRect().height},peerIndex:function(a){if(a){for(var c=0;a.previousSibling;)c++,a=a.previousSibling;return c}},isEditable:function(a){a.nodeType===Node.TEXT_NODE&&(a=a.parentNode);return(a=window.getComputedStyle(a))?"read-write"===a["-webkit-user-modify"]:!1},previousNode:function(a){for(var c=a?a.previousSibling:void 0;!c&&a&&a.parentNode;)a=
a.parentNode,c=a.previousSibling;for(;c&&c.lastChild;)c=c.lastChild;return c},nextNode:function(a){for(var c=a?a.nextSibling:void 0;!c&&a&&a.parentNode;)a=a.parentNode,c=a.nextSibling;for(;c&&c.firstChild;)c=c.firstChild;return c},rightMostLeafNode:function(a){for(a=a&&a.lastChild;a&&a.lastChild;)a=a.lastChild;return a},leftMostLeafNode:function(a){for(a=a&&a.firstChild;a&&a.firstChild;)a=a.firstChild;return a},getSiblingByIndex:function(a,c){for(;0<c;c--)if(a=a.nextSibling,!a)return null;return a},
insertAtStart:function(a,c){0<c.childNodes.length?c.insertBefore(a,c.childNodes[0]):c.appendChild(a)},insertAtEnd:function(a,c){c.appendChild(a)},insertAfter:function(a,c){var g=c.parentNode;g&&g.insertBefore(a,c.nextSibling)},insertBefore:function(a,c){var g=c.parentNode;g&&g.insertBefore(a,c)},insertAtSiblingOrParent:function(a,c){if(!a)throw Error("insertAtSiblingOrParent missing context");if(!a.parentNodeId&&!a.siblingNodeId)throw Error("insertAtSiblingOrParent requires either parentNodeId or siblingNodeId");
if(!a.parentNodeId)throw Error("insertAtSiblingOrParent missing parentNodeId");if(c&&!f.isFunction(c))throw Error("insertAtSiblingOrParent errorFuncton must be  a function");var g;(g=document.getElementById(a.siblingNodeId))?k.insertAfter(a.node,g):(g=document.getElementById(a.parentNodeId))?g.insertBefore(a.node,g.firstChild):c&&f.isFunction(c)&&c(" failed to insert node - no parent or sibling node found!")},relativePosition:function(a){if(a.nodeType!==Node.TEXT_NODE)throw Error("error: relativePosition needs to be given text node");
var c=0,g=0;for(a=a.previousSibling;a&&a.nodeType===Node.TEXT_NODE;)c+=a.textContent.length,a=a.previousSibling,g++;return{textNodeIndex:g,characterOffset:c}},absolutePos:function(a){var c=0,g=0;if(a.offsetParent){do c+=a.offsetTop,g+=a.offsetLeft,a=a.offsetParent;while(null!==a)}return{top:c,left:g}},absoluteScroll:function(a){var c=0,g=0;if(a.offsetParent){do c+=a.scrollTop,g+=a.scrollLeft,a=a.offsetParent;while(null!==a)}return{top:c,left:g}},getById:function(a){if(1<arguments.length){for(var c=
0,g=[],l=arguments.length;c<l;c++)g.push(k.getById(arguments[c]));return g}f.isString(a)&&(a=document.getElementById(a));return a},prependChildrenID:function(a,c,g){g=g||"-";if(a&&a.id&&(a.id=""+c+g+a.id,a.childNodes&&a.childNodes.length))for(var f=0,t=a.childNodes.length;f<t;f++)k.prependChildrenID(a.childNodes[f],c,g)},insert:function(a,e,g){switch(g){case "replace":a.parentNode.replaceChild(e,a);break;case "before":a.parentNode.insertBefore(e,a);break;case "after":if(a===a.parentNode.childNodes[a.parentNode.childNodes.length-
1])a.parentNode.appendChild(e);else{for(a=a.nextSibling;a&&a.nodeType!==c.NodeType.ELEMENT_NODE;)a=a.nextSibling;a.parentNode.insertBefore(e,a)}break;case "top":a.insertBefore(e,a.childNodes[0]);break;default:a.appendChild(e)}},stopEvent:function(a){a&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())},contains:function(a,c){return a?!!(a.compareDocumentPosition(c)&document.DOCUMENT_POSITION_CONTAINED_BY):!1},isElementInViewport:function(a){a=a.getBoundingClientRect();
return 0<=a.top&&0<=a.left&&a.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&a.right<=(window.innerWidth||document.documentElement.clientWidth)},removeNode:function(a){a&&f.isNode(a)&&a.parentNode&&f.isNode(a.parentNode)&&a.parentNode.removeChild(a)},getTransformValue:function(a,c){var g=a.style.webkitTransform;if(""!==g)for(var g=g.split(")"),f=0;f<g.length;f++){var k=g[f].split("(");if(k[0].trim()===c)switch(c){case "scale":return f=k[1].split(","),g=f[0].trim(),f=f[1].trim(),
{flipH:g,flipV:f};case "rotate":return k[1]}}return!1},cloneStyle:function(a,c){c&&a&&(a.style.cssText=c.style.cssText)},cloneNode:function(a,c,g){var f;f=a.cloneMe?a.cloneMe(g):g?document.importNode(a,!1):a.cloneNode(!1);f.setEid&&f.setEid(a.getEid());if(c)for(var k=0;k<a.childNodes.length;k++){var n=this.cloneNode(a.childNodes[k],c,g);f.appendChild(n)}return f}};return k});
define("utils/gdrive/apiaryLoader",["qowtRoot/third_party/when/when","qowtRoot/utils/domUtils","qowtRoot/utils/driveErrors"],function(c,f,k){function a(){f.removeNode(e);var a=document.createElement("script");a.id=e;a.src=g+"?onload="+l;document.getElementsByTagName("head")[0].appendChild(a)}var e="__apiary_script",g="https://apis.google.com/js/client.js",l="__apiaryLoaded";return{load:function(){return navigator.onLine?c.promise(function(c){window[l]=function(){window[l]=void 0;c()};a()}):c.reject({status:k.OFFLINE})}}});
define("utils/gdrive/driveUtils",[],function(){return{getErrorCode:function(c){return c&&c.result&&c.result.error&&c.result.error.code||c&&c.status},getErrorReason:function(c){return c&&c.result&&c.result.error&&c.result.error.errors&&c.result.error.errors[0]&&c.result.error.errors[0].reason},getErrorMessage:function(c){return c&&c.result&&c.result.error&&c.result.error.message||c&&c.statusText}}});
define("utils/gdrive/drive","qowtRoot/errors/errorCatcher qowtRoot/errors/qowtException qowtRoot/errors/qowtSilentError qowtRoot/utils/driveErrors utils/gdrive/firstPartyAuth utils/gdrive/apiaryLoader utils/gdrive/driveUtils qowtRoot/third_party/when/when".split(" "),function(c,f,k,a,e,g,l,t){function n(){return E?t.resolve():t.all([g.load(),e.setCookies()]).timeout(3E4,new f("init apiary timed out")).then(p).then(function(){E=!0})}function p(){gapi.client.setApiKey("AIzaSyD-qQA49y2Lv7b0KJCQghmHKe0iMHFnIts");
gapi.config.update("googleapis.config/auth/useFirstPartyAuth",!0);V&&gapi.config.update("googleapis.config/fogId",V)}function w(a){return R?t.resolve(R):x({path:"/drive/v2/files/"+a,method:"GET",params:{updateViewedDate:!0,supportsTeamDrives:!0}},"Drive.getMetaData_").then(function(a){return R=a&&a.result}).catch(r)}function u(a){return x({path:"/drive/v2/files/"+a+"?alt=media",method:"GET",params:{supportsTeamDrives:!0}},"Drive.download_").then(D).catch(r)}function N(a,c,e){a={path:"/drive/v2/files/"+
a+"/copy",method:"POST",params:{convert:c,supportsTeamDrives:!0}};e.title&&(a.body={title:e.title});return x(a,"Drive.createFileFromDriveFile_")}function F(a,e,g){g&&g.mimeType||c.handleError(new k("Drive upload called with no mime type."));var f=t.defer(),l=new FileReader;l.readAsBinaryString(a);l.onload=function(){var a=g.mimeType,c=btoa(l.result),a="\r\n---------314159265358979323846\r\nContent-Type: application/json\r\n\r\n"+JSON.stringify(g)+"\r\n---------314159265358979323846\r\nContent-Type: "+
a+"\r\nContent-Transfer-Encoding: base64\r\n\r\n"+c+"\r\n---------314159265358979323846--";e.headers={"Content-Type":'multipart/mixed; boundary="-------314159265358979323846"'};e.body=a;x(e,"Drive.upload_").then(f.resolve,f.reject)};return f.promise}function x(c,e){var g=t.defer();gapi.client.request(c).then(g.resolve,function(c,f){var k=l.getErrorCode(f),n=l.getErrorReason(f);k===a.INTERNAL_SERVER_ERROR||k===a.TIMEOUT||k===a.FORBIDDEN&&("rateLimitExceeded"===n||"userRateLimitExceeded"===n)?gapi.client.request(c).then(g.resolve,
z.bind(null,g,e)):z(g,e,f)}.bind(null,c));return g.promise}function z(a,e,g){e+=" error:";var f=l.getErrorCode(g),n=l.getErrorMessage(g);console.error([e,f,n].join(" "));c.handleError(new k([e,f].join(" ")));a.reject(g)}function D(a){a=a.body;for(var c=a.length,e=new ArrayBuffer(c),e=new Uint8Array(e),g=0;g<c;g++)e[g]=a.charCodeAt(g);return new Blob([e])}function r(a){throw a;}var E=!1,R,V;return{getMetaData:function(a){return n().then(w.bind(null,a))},download:function(a){return n().then(u.bind(null,
a))},upload:function(a,c,e){e={path:"/upload/drive/v2/files/"+a,method:"PUT",params:{newRevision:e?"true":"false",uploadType:"multipart",alt:"json",supportsTeamDrives:!0}};return n().then(w.bind(null,a)).then(F.bind(null,c,e))},createFileFromDriveFile:function(a,c,e){return n().then(N.bind(null,a,c,e))},createFileFromNonDriveFile:function(a,c,e){c={path:"/upload/drive/v2/files/",method:"POST",params:{uploadType:"multipart",convert:c,supportsTeamDrives:!0}};return n().then(F.bind(null,a,c,e))},clearCachedMetaData:function(){R=
void 0},setUserId:function(a){V=a}}});
define("qowtRoot/utils/pathUtils",["qowtRoot/utils/typeUtils"],function(c){return{create:function(f){return function(){var k={extension:function(){return e},dirName:function(){return l},baseName:function(){return g},fileName:function(){return a},smartBaseName:function(){var a=k.baseName();if(a)var c=/(-[0-9]+)$/g,e=a.match(c),a=e?a.replace(c,--e):a+"-1";return a}},a,e,g,l;(function(){if(f&&c.isString(f)){var k=f.lastIndexOf("/");l=-1!==k?f.substr(0,k+1):void 0;a=-1!==k?f.substr(k+1):f;k=a.lastIndexOf(".");
g=-1!==k?a.substr(0,k):a;var n=a.length;e=-1!==k?a.substr(k+1,n):void 0}})();return k}()}}});define("qowtRoot/utils/uuid",[],function(){return{generateUUID:function(){var c=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(f){var k=(c+16*Math.random())%16|0;c=Math.floor(c/16);return("x"===f?k:k&7|8).toString(16)})}}});
define("controllers/fileManager","qowtRoot/third_party/when/when utils/converter utils/xhr utils/pluginLoader utils/fileWriter utils/metrics utils/gdrive/drive utils/gdrive/driveUtils ui/progressSpinner controllers/appState qowtRoot/utils/i18n qowtRoot/utils/tryUtils qowtRoot/utils/pathUtils qowtRoot/errors/qowtException qowtRoot/errors/unique/httpErrorFileNotFound qowtRoot/errors/unique/httpErrorZero qowtRoot/errors/unique/timeoutError qowtRoot/utils/typeUtils qowtRoot/utils/driveErrors qowtRoot/utils/uuid third_party/lo-dash/lo-dash.min".split(" "),function(c,
f,k,a,e,g,l,t,n,p,w,u,N,F,x,z,D,r,E,R){var V,ta=function(){};ta.prototype={__proto__:Object.prototype,init:function(a,e){this.config_=a;this.uuid_=e;this.isReady=!1;this.fileTypeKnown=c.defer();var g=c(this.fileTypeKnown.promise).then(this.loadPlugin_.bind(this)).catch(function(a){throw a;}),f=c.resolve().then(this.tryToRestoreOrDeleteFromCache_.bind(this)).catch(this.openOriginalFile_.bind(this));return c.all([g,f]).then(this.whenDone_.bind(this))},getUUID:function(){return this.getCache().uuid},
getCache:function(){var a=window.sessionStorage.getItem("__fileManagerCache");return u.ignore(JSON.parse.bind(JSON,a))||{}},getEntryPoint:function(){return V},originalURL:function(){return _.get(this,"config_.originalURL")},privateFilePath:function(){return this.returnFilePath_(_.get(this,"config_.privateFile",{}))},downloadFilePath:function(){return this.returnFilePath_(_.get(this,"config_.downloadFile",{}))},userFilePath:function(){return this.returnFilePath_(_.get(this,"config_.userFile",{}))},
mimeType:function(){var a=this.config_.mimeType;f.mime2App(a)||(a=this.privateFilePath()||this.userFilePath()||this.originalURL(),a=N.create(a).extension()||this.config_.extension,a=f.extension2Mime(a));return a},displayName:function(){var a=_.get(this,"config_.preferredFilename",{});if(0<a.length)return a;var c;if(a=this.userFilePath()||this.originalURL()){a=N.create(a).fileName();try{c=window.decodeURIComponent(a)}catch(e){try{c=window.unescape(a)}catch(g){c=a}}}else c=this.config_.title;return c},
driveDocId:function(){return _.get(this,"config_.driveDocId")},driveFileRole:function(){return _.get(this,"config_.driveFileRole")},createPrivateFile:function(a){this.config_.mimeType=f.extension2Mime(a);return this.createPrivateFile_(a).then(this.cacheInfo_.bind(this))},overwriteUserFile:function(a){return this.config_.privateFile?this.config_.driveDocId||this.config_.userFile?this.config_.driveDocId?this.uploadDriveFile_(a):this.copyFile_(this.config_.privateFile,this.config_.userFile):c.reject(Error("Cannot overwrite user file: No user or drive file")):
c.reject(Error("Cannot overwrite user file: private is file missing"))},newUserFile:function(a,e){function g(a){return l.createFileFromNonDriveFile(a,!1,k).catch(function(){return this.saveAsLocal_()}.bind(this))}var f,k;this.config_.privateFile?!this.config_.driveDocId||e?f=this.saveAsLocal_(a):a?(k={title:this.nameForCopiedFile_()},f=l.createFileFromDriveFile(this.config_.driveDocId,!1,k)):(k={title:this.nameForSaveAsFile_(),mimeType:this.mimeType(),parents:[_.get(this,"config_.parents[0]")]},f=
this.getFileFromEntry_(this.config_.privateFile).then(g.bind(this))):f=c.reject(Error("Cannot create new user file: Private file missing"));return f},downloadToLocalFile:function(){this.getFileFromEntry_(this.config_.downloadFile).then(function(a){a=window.URL.createObjectURL(a);var c=this.tryAndGetDownloadFileName_();chrome.downloads.download({url:a,filename:c,conflictAction:"uniquify",saveAs:!1})}.bind(this))},convertToDocs:function(){var a={title:this.nameForConvertedFile_(),mimeType:this.mimeType()};
return this.config_.driveDocId?l.createFileFromDriveFile(this.config_.driveDocId,!0,a):this.getFileFromEntry_(this.config_.privateFile).then(function(c){return l.createFileFromNonDriveFile(c,!0,a)})},cacheFileDetails:function(a){window.sessionStorage.setItem("__fileManagerCache",JSON.stringify(a))},returnFilePath_:function(a){return a.fullPath||a.name},getFileType_:function(){var a;this.config_.driveDocId?a="driveDoc":this.config_.streamURL?a="stream":this.config_.userFile&&(a="userFile");return a},
getDriveDoc_:function(){return l.getMetaData(this.config_.driveDocId).then(function(a){void 0===a.mimeType||void 0===a.title||void 0===a.id?a=void 0===f.mime2App(a.mimeType)?c.reject(Error("Drive mimeType not an MS Office mimeType")):c.reject(Error("Drive document missing crucial information")):(this.config_.mimeType=a.mimeType,this.config_.extension=a.fileExtension,this.config_.title=a.title,this.config_.driveDocId=a.id,this.config_.parents=a.parents,this.config_.driveFileRole=_.get(a,"userPermission.role"),
a=this.createPrivateFile_().then(this.updateInfoAndDownload_.bind(this,"DownloadingDriveDoc")));return a}.bind(this)).yield(!0)},getStream_:function(){return this.createPrivateFile_().then(this.updateInfoAndDownload_.bind(this,"DownloadingStream")).yield(!0)},getUserFile_:function(){return this.createPrivateFile_().then(function(){this.updateAppStateAndCache_("LocalFile");return this.copyFile_(this.config_.userFile,this.config_.privateFile)}.bind(this))},updateInfoAndDownload_:function(a){this.updateAppStateAndCache_(a);
return this.download_()},updateAppStateAndCache_:function(a){this.initAppState_(a);this.cacheInfo_();this.fileTypeKnown.resolve()},restoreConfigFromCache_:function(a){this.config_.isDownloaded=a.isDownloaded;this.config_.mimeType=a.mimeType||this.config_.mimeType;this.config_.extension=a.extension||this.config_.extension;this.config_.driveDocId=a.driveDocId||this.config_.driveDocId;this.config_.driveFileRole=a.driveFileRole||this.config_.driveFileRole;this.config_.title=a.title||this.config_.title;
this.config_.parents=a.parents||this.config_.parents;this.config_.originalURL=a.originalURL||this.config_.originalURL},deleteFromCache_:function(a){return this.deletePrivateFile_(a).then(this.cacheFileDetails.bind(this,{}))},tryDeletingPrivateFile_:function(a){function e(){return c.reject(Error("IncompleteDownload"))}function g(){return c.reject(Error("CacheDeleteFailed"))}return a.privateFilePath?this.deleteFromCache_(a.privateFilePath).then(e,g):c.reject(Error("NoPrivateFile"))},tryToRestoreOrDeleteFromCache_:function(){var a;
(a=this.getCache())&&a.uuid===this.uuid_?a.isDownloaded?(V="restore",this.restoreConfigFromCache_(a),a=this.tryToRestoreFiles_(a)):a=this.tryDeletingPrivateFile_(a):a=c.reject(Error("NoCache"));return a},saveFileEntryAndUpdateCache_:function(a){this.config_.userFile=a;this.cacheInfo_()},tryToRestoreFiles_:function(a){function e(){this.config_.downloadFileName=a.downloadFileName;this.updateAppStateAndCache_("BrowserRefresh");return a.userFileId?this.restoreFileById_(a.userFileId).then(this.saveFileEntryAndUpdateCache_.bind(this)).yield(!0):
!0}return a.privateFilePath?this.restorePrivateFile_(a.privateFilePath).then(this.restoreDownloadFile_.bind(this,a.downloadFilePath)).then(e.bind(this)):c.reject(Error("There is no cached private file path"))},nameForCopiedFile_:function(){return"Copy of "+this.displayName()},nameForSaveAsFile_:function(){return"Copy of "+N.create(this.displayName()).baseName()+"."+f.mime2Extension(this.mimeType())},nameForConvertedFile_:function(){return N.create(this.displayName()).baseName()},saveAsLocal_:function(a){var e=
N.create(this.displayName()),g=this.config_.userFile?e.smartBaseName():e.baseName(),k=f.mime2App(this.mimeType());a=a?[e.extension()]:G[k];g+="."+(-1===a.indexOf(e.extension())?a[0]:e.extension());return this.selectFile_(g,a).then(function(a){this.config_.mimeType=void 0;this.config_.extension=void 0;this.config_.driveDocId=void 0;this.config_.driveFileRole=void 0;this.config_.preferredFilename=void 0;this.saveFileEntryAndUpdateCache_(a);return this.copyFile_(this.config_.privateFile,this.config_.userFile)}.bind(this),
function(){c.reject({userCancelled:!0})})},initAppState_:function(a){var c=this.mimeType();if(c&&0!==c.length)g.recordFileType(f.mime2Extension(c)),p.setApp(f.mime2App(c)),p.updateState(a);else throw Error("Unknown mimeType; unable to know which app to load");},whenDone_:function(){this.isReady=!0;return c.resolve(!0)},handleDriveError_:function(a){switch(t.getErrorCode(a)){case E.FILE_NOT_FOUND:this.throwFileNotFoundException_();break;case E.INTERNAL_SERVER_ERROR:case E.OFFLINE:this.throwTemporaryUnableToOpenException_(a);
break;default:this.handleGenericFileError_(a)}},throwTemporaryUnableToOpenException_:function(a){throw new F({title:"temporary_unable_to_open_error_short_msg",details:"temporary_unable_to_open_error_msg",message:r.isString(a)&&a||a.message||t.getErrorCode(a)});},handleGenericFileError_:function(a){if("SecurityError"===a.name)this.throwSecurityException_();else if(a instanceof D)this.throwTimeoutException_(a);else{if(a instanceof z)throw a;if(a instanceof x)throw a;this.throwFileOpenCrashException_(a)}},
throwEntryPointException_:function(){throw new F({title:"entry_point_error_short_msg",details:"entry_point_error_msg"});},throwSecurityException_:function(){throw new F({title:"security_error_short_msg",details:"security_error_msg"});},throwTimeoutException_:function(a){a.title=w.getMessage("download_file_timeout_error_short_msg");a.details=w.getMessage("download_file_timeout_error_msg");throw a;},throwFileNotFoundException_:function(){throw new F({title:"file_not_found_error_short_msg",details:"file_not_found_error_msg"});
},throwFileOpenCrashException_:function(a){var c=new F({title:"file_open_crash_error_short_msg",details:"file_open_crash_error_msg",message:r.isString(a)&&a||a.message||t.getErrorCode(a)});c.stack=a.stack;throw c;},cacheInfo_:function(){var a={originalURL:this.config_.originalURL,isDownloaded:this.config_.isDownloaded,streamURL:this.config_.streamURL,mimeType:this.config_.mimeType,extension:this.config_.extension,privateFilePath:this.privateFilePath(),downloadFilePath:this.downloadFilePath(),downloadFileName:this.config_.downloadFileName,
userFileId:this.config_.userFile&&window.RequestFileSystem&&chrome.fileSystem.retainEntry(this.config_.userFile),driveDocId:this.config_.driveDocId,driveFileRole:this.config_.driveFileRole,title:this.config_.title,parents:this.config_.parents,uuid:this.uuid_};this.cacheFileDetails(a)},restoreFileById_:function(a){return c.promise(function(c,e){window.RequestFileSystem?chrome.fileSystem.restoreEntry(a,c):e(Error("NoAccessToFileSystem"))})},restorePrivateFile_:function(a){return this.getTempFs_().then(function(c){return a?
this.openFileAndSaveEntry_(c,a,"privateFile"):this.createPrivateFile_()}.bind(this))},createDownloadableFile_:function(){return this.getTempFs_().then(function(a){return this.createDownloadableFileFromPrivateFile_(a)}.bind(this)).then(function(a){this.config_.downloadFile=a;this.config_.downloadFileName=this.displayName()}.bind(this))},restoreDownloadFile_:function(a){return this.getTempFs_().then(function(c){return a?this.openFileAndSaveEntry_(c,a,"downloadFile"):this.createDownloadableFile_()}.bind(this))},
download_:function(){n.show();var a=n.addContributor(.9);return(this.config_.driveDocId?l.download(this.config_.driveDocId):void 0===this.config_.streamURL?c.reject(Error("FileManager needs URL to download")):(new k({baseUrl:this.config_.streamURL})).send()).then(function(a){return(new e(this.config_.privateFile)).writeData(a)}.bind(this),void 0,a).then(function(){this.config_.isDownloaded=!0;this.cacheInfo_();a(1);n.hide()}.bind(this))},loadPlugin_:function(){var c=this.mimeType(),e=f.mime2App(c);
if(!e||0===e.length)throw Error("Could not find app from mimeType: "+c);return(new a).loadPlugin(e)},selectFile_:function(a,e){return c.promise(function(c,g){window.chrome.fileSystem.chooseEntry({type:"saveFile",suggestedName:a,accepts:[{extensions:e}]},function(a){window.chrome.runtime.lastError&&"User cancelled"===window.chrome.runtime.lastError.message?g(Error(window.chrome.runtime.lastError.message)):c(a)}.bind(this))}.bind(this))},getTempFs_:function(){return c.promise(function(a,c){window.webkitRequestFileSystem(window.TEMPORARY,
1048576,a,c)})},getFileFromFs_:function(a,e,g){return c.promise(function(c,f){a.root.getFile(e,g,c,f)})},createFile_:function(a,c){return this.getFileFromFs_(a,c,{create:!0,exclusive:!1})},openFile_:function(a,c){return this.getFileFromFs_(a,c,{create:!1})},createDownloadableFileFromPrivateFile_:function(a){return c.promise(function(c,e){var g=this.config_.privateFile,f=g.name.split("."),f=[f[0],f[1]].join("_downloadable.");g.copyTo(a.root,f,c,e)}.bind(this))},deletePrivateFile_:function(a){return this.getTempFs_().then(function(e){return c.promise(function(c,
g){e.root.getFile(a,{create:!1},function(a){a.remove(c,g)})})})},createPrivateFile_:function(a){return this.getTempFs_().then(function(a,c){var e=R.generateUUID(),g=a||f.mime2Extension(this.mimeType()),e=[e,g].join(".");return this.createFile_(c,e)}.bind(this,a)).then(function(a){return this.config_.privateFile=a}.bind(this))},openFileAndSaveEntry_:function(a,c,e){return this.openFile_(a,c).then(function(a){return this.config_[e]=a}.bind(this))},copyFile_:function(a,g){function f(a,g){var k=new e(a);
return"File"===g.constructor.name?k.writeData(g):c.reject("Cannot copy file: Source is not a File")}return void 0===g?c.reject(Error("Cannot copy file: Missing destination file")):g.isFile?void 0===a?c.reject(Error("Cannot copy file: Missing source file")):a.file?this.getFileFromEntry_(a).then(f.bind(null,g)):f(g,a):c.reject("Cannot copy file: Destination is not a FileEntry/ a File")},uploadDriveFile_:function(a){var c=this.config_.driveDocId;return this.getFileFromEntry_(this.config_.privateFile).then(function(e){return l.upload(c,
e,a)})},getFileFromEntry_:function(a){return c.promise(function(c,e){a.file?a.file(c):e(Error("Entry missing file function"))})},tryAndGetDownloadFileName_:function(){function a(c){var e=c&&c.lastIndexOf(".");c=c.substr(e+1);return"doc"===c||"docx"===c||"ppt"===c||"pptx"===c||"xls"===c||"xlsx"===c}var c=_.get(this,"config_.downloadFileName","downloadedFile"),e="."+(this.config_.extension?this.config_.extension:f.mime2Extension(this.mimeType()));try{c=encodeURIComponent(c).replace(/[!'()*]/g,function(a){return"%"+
a.charCodeAt(0).toString(16)}).replace(/%20/g," "),a(c)||(c+=e)}catch(g){c="downloadedFile"+e}return c},openOriginalFile_:function(a){var c;switch(this.getFileType_()){case "driveDoc":c=this.getDriveDoc_().catch(this.handleDriveError_.bind(this));break;case "stream":c=this.getStream_().catch(this.handleGenericFileError_.bind(this));break;case "userFile":c=this.getUserFile_().catch(this.handleGenericFileError_.bind(this));break;default:this.throwEntryPointException_(a)}return c.then(this.createDownloadableFile_.bind(this)).then(this.cacheInfo_.bind(this))}};
var G={word:["docx"],sheet:["xlsx"],point:["pptx"]};return new ta});
define("qowtRoot/utils/errorUtils",[],function(){return{stripStack:function(c){var f="";if(c=c.stack?c.stack.split("\n"):void 0)for(var f=f+(c[0]+";"),k=1;k<c.length;k++){var a=c[k].match(/\s*at\s*(\S*)\s*(\S*):(\d+):(\d+)\)/);if(a){a.shift();var e=a[1].lastIndexOf("/");a[1]=-1!==e?a[1].substr(e+1):a[1];f+=a.join(":")+";"}}return f},errorInfo:function(c){var f;c&&(f=c.e,c.e_info&&c.e_info.category&&(f+="; Category: "+c.e_info.category));return f},errorCode:function(c){return c&&c.split(";",1)[0]},
category:function(c){a:{c=c.split(";");for(var f=1;f<c.length;f++){var k=c[f].split(":");if("Category"===k[0].trim()){c=k[1].trim();break a}}c=""}return c}}});
define("errorObservers/gaExceptionLogger",["qowtRoot/pubsub/pubsub","qowtRoot/utils/errorUtils","utils/analytics/googleAnalytics"],function(c,f,k){var a="idle";c.subscribe("qowt:init",function(){a="idle"});return function(c){if("idle"===a){var g={msg:f.stripStack(c)||c.message||c.name||"unknown error",fatal:c.fatal};console.log("GA logging as:",g);k.sendException(g);a=c.fatal?"fatal exception logged":a}}});define("errorObservers/hideUI",["ui/progressSpinner"],function(c){return function(){c.hide()}});
define("errorObservers/showQOWT",[],function(){return function(c){c.silent||(document.getElementById("sandbox").style.display="block")}});
define("utils/sendUserFeedback",["qowtRoot/errors/errorCatcher","qowtRoot/utils/errorUtils","controllers/fileManager"],function(c,f,k){var a=[];c.addObserver(function(c){var g=c.fatal?"FATAL: ":"NonFatal: ",g=g+(f.stripStack(c)||c.message||c.name||"unknown error");a.push(g)});return{openFeedbackUI:function(c){c={requestFeedback:!0,feedbackInfo:{description:c,categoryTag:"FromQuickoffice",pageUrl:k.originalURL(),systemInformation:[{key:"appID",value:chrome.runtime.id},{key:"appVersion",value:chrome.runtime.getManifest().version},
{key:"mimeType",value:k.mimeType()},{key:"exceptions",value:a.toString()}]}};chrome.runtime.sendMessage("gfdkimpbcpahaombhbimeihdjnejgicl",c,function(){})}}});
define("utils/backgroundPageUtils",["qowtRoot/utils/promiseUtils","qowtRoot/third_party/when/when"],function(c){function f(){var e=new Promise(function(a,c){chrome&&chrome.runtime&&chrome.runtime.getBackgroundPage?chrome.runtime.getBackgroundPage(a):c(Error("chrome.runtime.getBackgroundPage not available"))});return Promise.race([e,c.delayThenReject(a,Error("chrome.runtime.getBackgroundPage timed out"))])}function k(a){var f=new Promise(function(c){var e=function(a){a.isReady?c(a):window.setTimeout(e.bind(null,
a),10)};e(a)});return Promise.race([f,c.delayThenReject(e,Error("Background page timed out getting ready"))])}var a=1E4,e=1E4;return{getPage:function(){return f().then(k)}}});
define("utils/urlUtils",["qowtRoot/utils/typeUtils"],function(c){return{parseURL:function(f){if(!c.isString(f))throw Error("Invalid URI");var k=f.split("?");f=k[0];var k=1<k.length?k[1]:"",a=this.parseQueryString(k);return{baseURL:f,queryString:k,queryObject:a}},parseQueryString:function(f){if(!c.isString(f))throw Error("Invalid QueryString");var k;if(f){k={};f=f.split(/[&;]/g);for(var a=0;a<f.length;a++)if(f[a]){var e=f[a].split("="),g=decodeURIComponent(e[0]).toLowerCase(),e=1<e.length?decodeURIComponent(e[1]):
void 0;k[g]=e}}return k},stripQueryString:function(){var c=this.parseURL(window.location.href);window.history.replaceState({},"",c.baseURL)}}});
!function(c,f){function k(k,p,r){var w=[];p=1==p?{entropy:!0}:p||{};k=l(g(p.entropy?[k,n(c)]:null==k?t():k,3),w);var G=new a(w),w=function(){for(var a=G.g(N),c=x,e=0;a<z;)a=(a+e)*u,c*=u,e=G.g(1);for(;a>=D;)a/=2,c/=2,e>>>=1;return(a+e)/c};return w.int32=function(){return 0|G.g(4)},w.quick=function(){return G.g(4)/4294967296},w.double=w,l(n(G.S),c),(p.pass||r||function(a,c,g,k){return k&&(k.S&&e(k,G),a.state=function(){return e(G,{})}),g?(f[F]=a,c):a})(w,k,"global"in p?p.global:this==f,p.state)}function a(a){var c,
e=a.length,g=this,f=0,k=g.i=g.j=0,l=g.S=[];for(e||(a=[e++]);f<u;)l[f]=f++;for(f=0;f<u;f++)l[f]=l[k=r&k+a[f%e]+(c=l[f])],l[k]=c;(g.g=function(a){for(var c,e=0,f=g.i,k=g.j,l=g.S;a--;)c=l[f=r&f+1],e=e*u+l[r&(l[f]=l[k=r&k+c])+(l[k]=c)];return g.i=f,g.j=k,e})(u)}function e(a,c){return c.i=a.i,c.j=a.j,c.S=a.S.slice(),c}function g(a,c){var e,f=[],k=typeof a;if(c&&"object"==k)for(e in a)try{f.push(g(a[e],c-1))}catch(l){}return f.length?f:"string"==k?a:a+"\x00"}function l(a,c){for(var e,g=a+"",f=0;f<g.length;)c[r&
f]=r&(e^=19*c[r&f])+g.charCodeAt(f++);return n(c)}function t(){try{var a;return p&&(a=p.randomBytes)?a=a(u):(a=new Uint8Array(u),(w.crypto||w.msCrypto).getRandomValues(a)),n(a)}catch(e){return a=w.navigator,[+new Date,w,a&&a.plugins,w.screen,n(c)]}}function n(a){return String.fromCharCode.apply(0,a)}var p,w=this,u=256,N=6,F="random",x=f.pow(u,N),z=f.pow(2,52),D=2*z,r=u-1;if(f["seed"+F]=k,l(f.random(),c),"object"==typeof module&&module.exports){module.exports=k;try{p=require("crypto")}catch(E){}}else"function"==
typeof define&&define.amd&&define("third_party/seedrandom/seedrandom.min",[],function(){return k})}([],Math);define("utils/timeUtils",[],function(){return{DAY_IN_MS:864E5,WEEK_IN_MS:6048E5,weekSinceEpoch:function(){var c=Date.now()/this.WEEK_IN_MS;return Math.ceil(c)}}});
define("common/elements/google-consumer-survey/google-consumer-survey",["qowtRoot/utils/localStorageManager","qowtRoot/utils/uuid","third_party/seedrandom/seedrandom.min","utils/timeUtils"],function(c,f,k,a){var e=90*a.DAY_IN_MS;window.GoogleConsumerSurvey=Polymer({is:"google-consumer-survey",properties:{siteId:{reflect:!1,value:""},targetPercentage:{reflect:!1,value:void 0},bucketing:{reflect:!1,value:void 0}},created:function(){this.UUID=c.getItem("__GCS_uuid")||f.generateUUID();c.setItem("__GCS_uuid",
this.UUID);window._402=window._402||{};window._402.promptHandlerUrl="https://www.google.com/insights/consumersurveys/gk/prompt"},attached:function(){this.shouldLaunchSurvey_()&&this.launchSurvey_()},shouldLaunchSurvey_:function(){var c=!1;this.targetPercentage||this.bucketing?this.surveyResultsStale_(a.WEEK_IN_MS)&&(c=this.sampleUser_()):c=this.surveyResultsStale_(e);return c},sampleUser_:function(){var c=!1,e=parseInt(this.UUID.split("-")[1],16),f=this.bucketing?65535/this.bucketing:65535,n=a.weekSinceEpoch(),
p=n%(this.bucketing||1)*f;e>=p&&e<p+f&&(this.fire("user-considered-for-sampling"),k(e*n)()<(void 0===this.targetPercentage?1:this.targetPercentage/100)&&(this.fire("user-sampled-for-survey"),c=!0));return c},surveyResultsStale_:function(a){var e=!0,f=c.getItem("__GCS_site_"+this.siteId);f&&(e=Date.now()-f>a);return e},launchSurvey_:function(){this.siteId&&0!==this.siteId.length&&this.parentNode?(this.scriptTag=document.createElement("script"),this.scriptTag.src="https://www.google.com/insights/consumersurveys/async_survey?force_http=1&site="+
this.siteId,this.appendChild(this.scriptTag),this.userSurveyed=!0,c.setItem("__GCS_site_"+this.siteId,Date.now())):console.warn("<google-consumer-survey>: missing siteId!")}});return{}});
define("monkeyLoader",["qowtRoot/features/utils"],function(c){function f(a,c,f){c([a],function(a){k++;f(a)},function(c){0===k?(console.warn("Failed to load "+a+". The monkey server is likely not running."),f()):(console.error("Monkey _is_ running, but we failed to laod module "+a+"."),console.error(c),console.error(c.stack))})}var k=0;return{load:function(a,e,g){e=e||"";c.isDebug()?(console.log("Loading "+a),f.apply(this,arguments)):g()}}});
define("controllers/application","qowtRoot/errors/errorCatcher qowtRoot/errors/qowtException qowtRoot/errors/unique/fileDoesNotExistError qowtRoot/utils/typeUtils qowtRoot/utils/tryUtils qowtRoot/utils/promiseUtils qowtRoot/messageBus/messageBus qowtRoot/features/utils controllers/appState controllers/fileManager errorObservers/gaExceptionLogger errorObservers/hideUI errorObservers/showQOWT utils/analytics/googleAnalytics utils/converter utils/metrics utils/sendUserFeedback utils/backgroundPageUtils utils/gdrive/driveUtils utils/urlUtils qowtRoot/third_party/when/when utils/gdrive/drive qowtRoot/utils/uuid qowtRoot/pubsub/pubsub qowtRoot/utils/localStorageManager common/elements/google-consumer-survey/google-consumer-survey".split(" "),function(c,
f,k,a,e,g,l,t,n,p,w,u,N,F,x,z,D,r,E,R,V,ta,G,v,P){function pa(c){c=c.data;if(!a.isString(c)&&!a.isObject(c))throw Error("Invlid content from Core");if(a.isString(c))c=e.withWarning("JSON Syntax error in content from Core").rethrow(JSON.parse.bind(JSON,c)),"NaClCrash"===c.name&&(vb=!0);else if(vb){var f=c;console.error("reporting minidump to local server");var g=new FormData;g.append("prod","Quickoffice");g.append("ver",chrome.runtime.getManifest().version);g.append("upload_file_minidump",new Blob([f]));
f=new XMLHttpRequest;f.open("POST",chrome.runtime.getManifest().crash_dump_server,!0);f.send(g);v.publish("app:naclCrash")}vb||l.pushMessage({id:"dcp",content:c})}function S(a){if(a.keyCode&&(a.metaKey||a.ctrlKey))switch(a.keyCode){case 80:a.preventDefault();l.pushMessage({id:"print"});break;case 83:a.preventDefault()}}function I(){Cc();eb({category:"network-status",action:window.navigator.onLine?"online":"offline"});return V.promise(function(a){chrome.identity.getProfileUserInfo(function(c){c=""!==
c.email;var e=window.navigator.onLine;eb({category:"account-status",action:c?"signed-in":"signed-out"});eb({category:"account-network",action:c?e?"signedin-online":"signedin-offline":e?"signedout-online":"signedout-offline"});a()}.bind(this))}.bind(this)).timeout(3E3,"Timed-out waiting for identity info").catch(function(){})}function eb(a){if(window.navigator.onLine)F.sendEvent(a);else{var c=Dc();c.push(a);P.setItem("pending_ga",JSON.stringify(c))}}function Cc(){if(window.navigator.onLine){var a=
Dc();if(0<a.length)for(var c=0;c<a.length;c++)a[c]&&"object"===typeof a[c]&&F.sendEvent({category:a[c].category,action:a[c].action,label:a[c].label});P.setItem("pending_ga",JSON.stringify([]))}}function Dc(){var a;try{a=P.getItem("pending_ga"),a=JSON.parse(a),Array.isArray(a)||(a=[])}catch(c){a=[],console.warn("Failed to initialize file store so resetting it to be empty: "+c)}return a}function Ec(){var a=V.defer();chrome&&chrome.tabs&&chrome.tabs.getCurrent?chrome.tabs.getCurrent(function(c){c&&c.id?
(Ca=c.id,a.resolve()):a.reject(Error("Missing tab id"))}):a.reject(Error("Missing chrome.tabs API"));return Promise.race([a.promise,g.delayThenReject(3E4,Error("Requesting current tab id timed out"))])}function Gb(){l.listen(tb,Ib);l.listen(ka,Aa);return Promise.resolve()}function Wa(){var a=R.parseURL(window.location.href);a.queryObject?(p.cacheFileDetails(a.queryObject),R.stripQueryString()):a.queryObject=p.getCache();if(a.queryObject.state)return za(a.queryObject.state);if(a.queryObject.uuid)return a.queryObject.uuid;
throw new k;}function za(a){return r.getPage().then(function(c){var e;try{var g=JSON.parse(a);if(c.handleDriveDoc&&g.ids)e=c.handleDriveDoc(g.ids),ta.setUserId(g.userId);else throw new f("Missing handleDriveDoc api");}catch(k){throw new f("JSON parse error for state argument");}return e||V.reject(Error("Failed to retrieve the UUID for first Drive Doc"))})}function Hb(c){return r.getPage().then(function(e){if(e.addReaperLock){aa=c[1];if(!a.isString(aa))throw Error("Failed to get a valid UUID");e.addReaperLock(Ca);
e=e.getFileDetails(aa);if(!e)throw new f("Missing FileDetails object");e=Object.create(e);return p.init(e,aa)}throw Error("Background page's 'addReaperLock' function is undefined");}).then(ec)}function Ib(a){var c=!1;a&&a.data&&"dcpRequest"===a.data.id&&(c=!0);return c}function Aa(a){return!Ib(a)}function Jb(){var a=P.getItem("onboardingComplete");chrome.i18n.getMessage("@@ui_locale").match(/en[-_]us/i)&&a&&!t.isDebug()&&t.isEnabled("hats")&&window.setTimeout(function(){var a={word:{siteId:"wtkwz5qvgh3olklj43wihw3lhi",
rate:3},sheet:{siteId:"renjicjirwkihjol6bv5k5q7hm",rate:8},point:{siteId:"4jgyc2mhqmpdwpatxatmggghiq",rate:4}},c=x.mime2App(p.mimeType());if(a[c]){var e=fa();e.siteId=a[c].siteId;e.targetPercentage=a[c].rate;e.bucketing=12;document.body.appendChild(e)}},3E3)}function fa(){var a=document.createElement("google-consumer-survey");a.addEventListener("user-considered-for-sampling",function(){F.sendEvent({category:"user-survey",action:"sampling",label:"user-consired"})});a.addEventListener("user-sampled-for-survey",
function(){F.sendEvent({category:"user-survey",action:"sampling",label:"user-sampled"})});return a}function tb(a){if(a&&a.data&&a.data.content)if(a=a.data.content,-1!=="writeToExisting writeToNew writeToExistingDriveFile convertToDocs makeACopy download".split(" ").indexOf(a.name))fb(a);else{var c=Ja;switch(a.name){case "oPT":case "oDC":case "owb":a.pa=p.privateFilePath();c(a);break;case "sDC":"OOXML"===x.mime2Format(p.mimeType())?c(a):p.createPrivateFile("docx").done(Xa.bind(M,a,c));break;case "saveWkbk":"OOXML"===
x.mime2Format(p.mimeType())?q(a,c):p.createPrivateFile("xlsx").done(q.bind(M,a,c));break;case "sPT":"OOXML"===x.mime2Format(p.mimeType())?q(a,c):p.createPrivateFile("pptx").done(q.bind(M,a,c));break;default:c(a)}}else throw Error("DCP Requests must have content");}function Xa(a,c){a.name="saveAs";a.dst=p.privateFilePath();c(a)}function q(a,c){a.dst=p.privateFilePath();c(a)}function fb(a){switch(a.name){case "writeToExisting":p.overwriteUserFile().done(cc.bind(M,a.name,p.userFilePath()),Ia.bind(M,
a.name));break;case "writeToNew":p.newUserFile(!1,a.context&&a.context.toLocal).then(cc.bind(M,a.name,p.userFilePath()),dc.bind(M,a.name)).done(function(){},Ia.bind(M,a.name));break;case "makeACopy":Ia(a.name);p.newUserFile(!0).done(Ic.bind(M,p.userFilePath()),Jc);break;case "writeToExistingDriveFile":Ia(a.name);p.overwriteUserFile(a.newRevision).done(ub.bind(M,a.token),Kb.bind(M,a.token));break;case "convertToDocs":Ia(a.name);p.convertToDocs().done(Gc,Hc);break;case "download":p.downloadToLocalFile();
Ia(a.name);break;default:console.log("#!#! Unexpected processAppRequest "+a.name)}}function ac(a){return V.promise(function(c){Lb(bc(a),c)})}function Fc(a){return V.promise(function(c){var e=bc(a);chrome&&chrome.tabs&&e&&chrome.tabs.update(Ca,{url:e},c)})}function bc(a){var c=a.result.alternateLink;c.match(/.*\/file\/.*/)?a="chrome-extension://"+chrome.runtime.id+'/views/app.html?state={"ids":["'+a.result.id+'"],"action":"open"}':(a=c,a=(c=a.match(/(.*)\?(.*)/))?c[2]&&0<c[2].length?a+"&nativeconvert=1":
a+"nativeconvert=1":a+"?nativeconvert=1");return a}function cc(a,c,e){p.userFilePath()!==c&&fc();"writeToNew"===a&&"drive"===Ka()?Fc(e).then(Ia.bind(M,a)):Ia(a);l.pushMessage({id:"userFileNotification",context:{type:"saveSuccess",format:x.mime2Format(p.mimeType()),userFileType:Ka(),driveFileReadOnly:"reader"===p.driveFileRole()}})}function dc(a){l.pushMessage({id:"dcp",content:{name:a,userCancelled:!0}});l.pushMessage({id:"userFileNotification",context:{type:"saveCancel"}})}function ub(a){l.pushMessage({id:"driveFileNotification",
context:{type:"saveSuccess",saveToken:a}})}function Kb(a,c){l.pushMessage({id:"driveFileNotification",context:{type:"saveFailure",saveToken:a,errorCode:E.getErrorCode(c)}})}function Gc(a){var c=ib;l.pushMessage({id:"driveFileNotification",context:{type:"convertSuccess"}});ib=!1;if(!c)return ac(a)}function Hc(a){var c=ib;ib=!1;c||l.pushMessage({id:"recordEvent",category:"menu",action:"convertToDocsFailed"});l.pushMessage({id:"driveFileNotification",context:{type:"convertFailure",errorCode:E.getErrorCode(a)}})}
function Ic(a,c){"drive"===Ka()?ac(c):(document.title=p.displayName(),p.userFilePath()!==a&&fc(),l.pushMessage({id:"localFileNotification",context:{type:"copySuccess",displayName:p.displayName(),format:x.mime2Format(p.mimeType()),userFileType:Ka(),driveFileReadOnly:!1}}))}function Jc(a){"drive"===Ka()&&(l.pushMessage({id:"recordEvent",category:"menu",action:"makeCopyFailed"}),l.pushMessage({id:"driveFileNotification",context:{type:"copyFailure",errorCode:E.getErrorCode(a)}}))}function Ia(a,c){document.title=
p.displayName();l.pushMessage({id:"dcp",content:{name:a,displayName:p.displayName(),format:x.mime2Format(p.mimeType()),userFileType:Ka(),driveFileReadOnly:"reader"===p.driveFileRole(),e:c&&c.message||c}})}function Ja(a){if(qa&&qa.postMessage)a=a instanceof ArrayBuffer?a:e.withWarning("Msg to Core must be JSON").rethrow(JSON.stringify.bind(JSON,a)),qa.postMessage(a);else throw Error("Error: NaCl module not ready?");}function Ka(){var a;p.userFilePath()?a="local":p.driveDocId()&&(a="drive");return a}
function ka(a){if(a&&a.data)switch(a.data.id){case "closeApp":window.close();break;case "reportAnIssue":D.openFeedbackUI(a.data.description);break;case "showHelp":case "signIntoDrive":Lb(a.data.link);break;case "recordCount":z.recordCount(a.data.context);break;case "stateChange":a=a.data.data;n.updateState(a.state,a.context);break;case "recordEvent":F.sendEvent(a.data);break;case "recordCachableEvent":eb(a.data);break;case "createNewTab":Lb(a.data.link);break;case "conversionCancelled":ib=!0}}function Lb(a,
c){chrome&&chrome.tabs&&a&&a.match(/^https?:\/\/|^file:\/\//i)&&chrome.tabs.create({url:a},c)}function ec(){gb();fc();hd();Y();hb();M.openFile()}function gb(){return r.getPage().then(function(a){if(a.cacheTabId)a.cacheTabId(aa,Ca);else throw Error("Background page's 'cacheTabId' function is undefined");})}function fc(){return r.getPage().then(function(a){if(a.cachePrivateFilePath)a.cachePrivateFilePath(aa,p.privateFilePath());else throw Error("Background page's 'cachePrivateFilePath' function is undefined");
})}function hd(){return r.getPage().then(function(a){if(a.cacheDownloadFilePath)a.cacheDownloadFilePath(aa,p.downloadFilePath());else throw Error("Background page's 'cacheDownloadFilePath' function is undefined");})}function Y(){return r.getPage().then(function(a){if(a.cacheTimestamp)a.cacheTimestamp(aa);else throw Error("Background page's 'cacheTimestamp' function is undefined");})}function hb(){return r.getPage().then(function(a){if(a.removeReaperLock)a.removeReaperLock(Ca);else throw Error("Background page's 'removeReaperLock' function is undefined");
})}var M={openFile:function(){if(!p.isReady)throw Error("Error: app not ready to open file yet");n.updateState("Opening");document.title=p.displayName();var a=x.mime2Icon(p.mimeType());if(a){var c=document.createElement("link");c.type="image/x-icon";c.rel="shortcut icon";c.href=a;document.getElementsByTagName("head")[0].appendChild(c)}if(qa=document.getElementById("qonacl"))qa.addEventListener("message",pa,!1);else throw Error("App can not find core plugin");Z&&l.pushMessage({id:Mb,overrides:Z});
Ba.app=x.mime2App(p.mimeType());a=x.mime2Extension(p.mimeType());a=!("docm"!==a&&"pptm"!==a&&"xlsm"!==a);l.pushMessage({id:"openFile",displayName:p.displayName(),originalURL:p.originalURL(),userFileType:Ka(),entryPoint:p.getEntryPoint(),driveFileReadOnly:"reader"===p.driveFileRole(),format:x.mime2Format(p.mimeType()),environment:Ba,isMacroEnabledFile:a})}},Kc,Ba,qa,vb,Z,Mb="featureOverrides",Ca,aa,ib=!1;(function(){chrome.runtime.onMessage.addListener(function(a,c,e){"reaperCheck"===a&&e({uuid:p.getUUID()})})})();
(function(){try{Z={};var c=window.sessionStorage.getItem(Mb),e=P.getItem(Mb);a.extend(Z,JSON.parse(c));a.extend(Z,JSON.parse(e));0<Object.keys(Z).length&&t.setOverrides(Z)}catch(f){}})();require(["monkeyLoader!monkeyAppClient"],function(){document.title="";Kc=document.getElementById("sandbox");window.connectFromAppToQowt=new Date;l.connect(Kc.contentWindow);var a=G.generateUUID();F.setSessionGroup(a);n.init();Ba={locale:chrome.i18n.getMessage("@@ui_locale"),defaultLocale:"en"};window.addEventListener("keydown",
S);c.addObserver(w);c.addObserver(u);c.addObserver(N);c.init();V.all([I(),Wa(),Ec(),Gb()]).then(Hb).then(Jb).done()});return M});require(["third_party/domready/domReady!"],function(){require(["controllers/application"])});define("mainApp",function(){});
